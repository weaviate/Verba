(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{87094:function(e,t,s){Promise.resolve().then(s.bind(s,14923))},14923:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return em}});var l=s(57437),o=s(76062),n=s.n(o),r=s(53716),a=s.n(r),i=s(8120),c=s.n(i),d=s(44090),x=s.n(d),g=s(2265),m=s(58177),u=s(30505),h=s(8603),b=s(14063),p=s(97223),f=e=>{let{Icon:t,iconSize:s,title:o,currentPage:n,setPage:r,setCurrentPage:a,APIHost:i,hide:c}=e;return(0,l.jsxs)("button",{disabled:null===i,className:"btn md:btn-sm lg:btn-md ".concat(c?"hidden":"flex"," flex-grow items-center justify-center border-none hover:bg-button-hover-verba ").concat(n===r?"bg-primary-verba text-text-verba":"bg-button-verba text-text-alt-verba"),onClick:e=>{a(r)},children:[(0,l.jsx)(t,{size:s}),(0,l.jsx)("p",{className:"md:text-xs lg:text-sm sm:hidden md:flex",children:o})]},o)};async function v(){try{let e=await fetch("https://api.github.com/repos/weaviate/verba",{method:"GET"}),t=await e.json();if(t)return t.stargazers_count;return 0}catch(e){return console.error("Failed to perform search:",e),0}}let j=e=>e>=1e3?(e/1e3).toFixed(1).replace(/\.0$/,"")+"k":e.toString();var y=e=>{let{imageSrc:t,title:s,subtitle:o,APIHost:n,version:r,currentPage:a,setCurrentPage:i,production:c}=e,[d,x]=(0,g.useState)("0");(0,g.useEffect)(()=>{(async()=>{try{let e=await v();if(e){let t=j(e);x(t)}}catch(e){console.error("Failed to fetch GitHub stars:",e)}})()},[]);let y=()=>{window.open("https://github.com/weaviate/verba","_blank","noopener,noreferrer")};return(0,l.jsxs)("div",{className:"flex justify-between items-center mb-10",children:[(0,l.jsxs)("div",{className:"flex flex-row items-center gap-5",children:[(0,l.jsx)("img",{src:t,width:80,className:"flex"}),(0,l.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-end justify-center lg:gap-3",children:[(0,l.jsx)("p",{className:"sm:text-2xl md:text-3xl text-text-verba",children:s}),(0,l.jsx)("p",{className:"sm:text-sm text-base text-text-alt-verba font-light",children:o})]})]}),(0,l.jsxs)("div",{className:"flex flex-row justify-center items-center",children:[(0,l.jsx)("div",{className:"hidden sm:h-[3vh] lg:h-[5vh] bg-text-alt-verba w-px sm:mx-2 md:mx-4"}),(0,l.jsxs)("div",{className:"lg:flex hidden lg:flex-row items-center lg:gap-3 justify-between",children:[(0,l.jsx)("div",{className:" ".concat(c?"h-[0vh]":"sm:h-[3vh] lg:h-[5vh] mx-1"," hidden sm:block bg-text-alt-verba w-px")}),(0,l.jsx)(f,{hide:!1,APIHost:n,Icon:m.utr,iconSize:18,title:"Chat",currentPage:a,setCurrentPage:i,setPage:"CHAT"}),(0,l.jsx)(f,{hide:!1,APIHost:n,Icon:m.emU,iconSize:18,title:"Documents",currentPage:a,setCurrentPage:i,setPage:"DOCUMENTS"}),(0,l.jsx)(f,{hide:c,APIHost:n,Icon:u.lLR,iconSize:18,title:"Overview",currentPage:a,setCurrentPage:i,setPage:"STATUS"}),(0,l.jsx)("div",{className:" ".concat(c?"h-[0vh]":"sm:h-[3vh] lg:h-[5vh] mx-1"," hidden sm:block bg-text-alt-verba w-px")}),(0,l.jsx)(f,{hide:c,APIHost:n,Icon:h.Lgw,iconSize:18,title:"Add Documents",currentPage:a,setCurrentPage:i,setPage:"ADD"}),(0,l.jsx)(f,{hide:c,APIHost:n,Icon:m.LTV,iconSize:18,title:"RAG",currentPage:a,setCurrentPage:i,setPage:"RAG"}),(0,l.jsx)(f,{hide:c,APIHost:n,Icon:m.zfW,iconSize:18,title:"Settings",currentPage:a,setCurrentPage:i,setPage:"SETTINGS"}),(0,l.jsx)("div",{className:"sm:h-[3vh] lg:h-[5vh] mx-1 hidden sm:block bg-text-alt-verba w-px"}),(0,l.jsxs)("button",{className:"md:hidden btn md:btn-sm lg:btn-md lg:flex items-center justify-center border-none bg-secondary-verba hover:bg-button-hover-verba",onClick:y,children:[(0,l.jsx)(b.hJX,{size:18,className:"text-text-verba"}),(0,l.jsx)("p",{className:"text-xs sm:hidden md:flex text-text-verba ",children:d})]}),(0,l.jsx)("p",{className:"hidden lg:flex text-xs text-text-alt-verba",children:r})]}),(0,l.jsx)("div",{className:"flex flex-row items-center sm:gap-1 lg:gap-5 justify-between",children:(0,l.jsx)("div",{className:"lg:hidden sm:flex md:ml-4 sm:mr-8",children:(0,l.jsx)("ul",{className:"menu md:menu-md sm:menu-sm sm:menu-horizontal bg-base-200 rounded-box bg-bg-alt-verba z-50",children:(0,l.jsx)("li",{children:(0,l.jsxs)("details",{children:[(0,l.jsx)("summary",{children:(0,l.jsx)(p.bqP,{size:20})}),(0,l.jsxs)("ul",{className:"bg-bg-alt-verba",children:[(0,l.jsx)("li",{onClick:e=>{i("CHAT")},children:(0,l.jsx)("a",{children:"Chat"})}),(0,l.jsx)("li",{onClick:e=>{i("DOCUMENTS")},children:(0,l.jsx)("a",{children:"Documents"})}),(0,l.jsx)("li",{onClick:e=>{i("STATUS")},children:(0,l.jsx)("a",{children:"Status"})}),(0,l.jsx)("li",{onClick:e=>{i("ADD")},children:(0,l.jsx)("a",{children:"Add Documents"})}),(0,l.jsx)("li",{onClick:e=>{i("RAG")},children:(0,l.jsx)("a",{children:"RAG"})}),(0,l.jsx)("li",{onClick:e=>{i("SETTINGS")},children:(0,l.jsx)("a",{children:"Settings"})}),(0,l.jsx)("li",{onClick:y,children:(0,l.jsx)("a",{children:"GitHub"})}),(0,l.jsx)("li",{className:"items-center justify-center text-xs text-text-alt-verba mt-2",children:r})]})]})})})})})]})]})};let N=["Inter","Plus_Jakarta_Sans","Open_Sans","PT_Mono"],C={value:"Plus_Jakarta_Sans",type:"select",options:N,description:"Text Font"},w={title:"Chat Settings",description:"Customize chat settings like caching generated answers in Weaviate or let Weaviate give you autocomplete suggestions.",settings:{caching:{checked:!0,type:"check",description:"Enable Caching"},suggestion:{checked:!0,type:"check",description:"Enable Autocompletion"},info_button:{checked:!0,type:"check",description:"Enable Help Information"},max_document_size:{value:1e4,type:"number",description:"Max characters to show Documents"}}},S={Default:{Customization:{title:"Customization",description:"Customize the layout of your Verba by changing the title, subtitle, logo, and colors of the app.",settings:{title:{text:"Verba",type:"text",description:"Title of the Page"},subtitle:{text:"The Golden RAGtriever",type:"text",description:"Subtitle of the Page"},intro_message:{text:"Welcome to Verba, your open-source RAG application!",type:"text",description:"Intro Message"},placeholder_message:{text:"Ask Verba anything!",type:"text",description:"Input Placeholder"},image:{src:"https://github.com/weaviate/Verba/blob/main/frontend/public/favicon.png?raw=true",type:"image",description:"Logo of the Page"},primary_color:{color:"#FDFF91",type:"color",description:"Primary Color"},secondary_color:{color:"#90FFA8",type:"color",description:"Secondary Color"},warning_color:{color:"#FF8399",type:"color",description:"Accent Color"},bg_color:{color:"#FEF7F7",type:"color",description:"Background Color"},bg_alt_color:{color:"#FFFFFF",type:"color",description:"Alternative Background Color"},text_color:{color:"#161616",type:"color",description:"Text Color"},text_alt_color:{color:"#8E8E8E",type:"color",description:"Alternative Text Color"},button_color:{color:"#EFEFEF",type:"color",description:"Button Color"},button_hover_color:{color:"#DCDCDC",type:"color",description:"Button Hover Color"},bg_console:{color:"#3F3E40",type:"color",description:"Console Background"},text_console:{color:"#FFFFFF",type:"color",description:"Console Text"},font:C,theme:"light"}},Chat:w},DarkMode:{Customization:{title:"Customization",description:"Customize the layout of your Verba by changing the title, subtitle, logo, and colors of the app.",settings:{title:{text:"Verba",type:"text",description:"Title of the Page"},subtitle:{text:"The Dark RAGtriever",type:"text",description:"Subtitle of the Page"},intro_message:{text:"Welcome to the dark mode version of Verba! Spooky, right?",type:"text",description:"Intro Message"},placeholder_message:{text:"Ask anything!",type:"text",description:"Input Placeholder"},image:{src:"https://github.com/weaviate/Verba/blob/main/frontend/public/favicon.png?raw=true",type:"image",description:"Logo of the Page"},primary_color:{color:"#BB86FC",type:"color",description:"Primary Color"},secondary_color:{color:"#008F82",type:"color",description:"Secondary Color"},warning_color:{color:"#FF8399",type:"color",description:"Accent Color"},bg_color:{color:"#202020",type:"color",description:"Background Color"},bg_alt_color:{color:"#2F2929",type:"color",description:"Alternative Background Color"},text_color:{color:"#ffffff",type:"color",description:"Text Color"},text_alt_color:{color:"#999999",type:"color",description:"Alternative Text Color"},button_color:{color:"#3C3C3C",type:"color",description:"Button Color"},button_hover_color:{color:"#2C2C2C",type:"color",description:"Button Hover Color"},bg_console:{color:"#2F2929",type:"color",description:"Console Background"},text_console:{color:"#FFFFFF",type:"color",description:"Console Text"},font:{value:"Open_Sans",type:"select",options:N,description:"Text Font"},theme:"dark"}},Chat:w},Weaviate:{Customization:{title:"Customization",description:"Customize the layout of your Verba by changing the title, subtitle, logo, and colors of the app.",settings:{title:{text:"Weaviate Verba",type:"text",description:"Title of the Page"},subtitle:{text:"Chatbot for Weaviate",type:"text",description:"Subtitle of the Page"},intro_message:{text:"Welcome to Weaviate, your AI-Native vector database. How can I help you with Weaviate today?",type:"text",description:"Intro Message"},placeholder_message:{text:"Ask all questions related to Weaviate",type:"text",description:"Input Placeholder"},image:{src:"https://github.com/weaviate/Verba/blob/1.0.0/frontend/public/weaviate.png?raw=true",type:"image",description:"Logo of the Page"},primary_color:{color:"#6BDF4A",type:"color",description:"Primary Color"},secondary_color:{color:"#7AD6EB",type:"color",description:"Secondary Color"},warning_color:{color:"#F4404E",type:"color",description:"Accent Color"},bg_color:{color:"#EDEDED",type:"color",description:"Background Color"},bg_alt_color:{color:"#ffffff",type:"color",description:"Alternative Background Color"},text_color:{color:"#130C49",type:"color",description:"Text Color"},text_alt_color:{color:"#8196A6",type:"color",description:"Alternative Text Color"},button_color:{color:"#E6E3E3",type:"color",description:"Button Color"},button_hover_color:{color:"#FFFFFF",type:"color",description:"Button Hover Color"},bg_console:{color:"#3F3E40",type:"color",description:"Console Background"},text_console:{color:"#FFFFFF",type:"color",description:"Console Text"},font:{value:"Inter",type:"select",options:N,description:"Text Font"},theme:"light"}},Chat:w},GoogleHackathon:{Customization:{title:"Customization",description:"Customize the layout of your Verba by changing the title, subtitle, logo, and colors of the app.",settings:{title:{text:"Prinses Maxima Centrum",type:"text",description:"Title of the Page"},subtitle:{text:"Medical RAG",type:"text",description:"Subtitle of the Page"},intro_message:{text:"Welcome to Medical Retrieval Augmented Generation! We ingested medical data, like clinical reports, research and more to improve access to healthcare. Try it out by asking questions related to diseases, symptoms and medical conditions.",type:"text",description:"Intro Message"},placeholder_message:{text:"Ask a medical question",type:"text",description:"Input Placeholder"},image:{src:"https://www.prinsesmaximacentrum.nl/img/logo/prinses-maxima-centrum-logo-en.svg",type:"image",description:"Logo of the Page"},primary_color:{color:"#FF963F",type:"color",description:"Primary Color"},secondary_color:{color:"#53E797",type:"color",description:"Secondary Color"},warning_color:{color:"#F11F78",type:"color",description:"Accent Color"},bg_color:{color:"#F1F1F1",type:"color",description:"Background Color"},bg_alt_color:{color:"#FFFFFF",type:"color",description:"Alternative Background Color"},text_color:{color:"#000F1D",type:"color",description:"Text Color"},text_alt_color:{color:"#818181",type:"color",description:"Alternative Text Color"},button_color:{color:"#E4E4E4",type:"color",description:"Button Color"},button_hover_color:{color:"#CCCCCC",type:"color",description:"Button Hover Color"},bg_console:{color:"#3F3E40",type:"color",description:"Console Background"},text_console:{color:"#FFFFFF",type:"color",description:"Console Text"},font:{value:"Open_Sans",type:"select",options:N,description:"Text Font"},theme:"light"}},Chat:w},Custom:{Customization:{title:"Customization",description:"Customize the layout of your Verba by changing the title, subtitle, logo, and colors of the app.",settings:{title:{text:"My RAG",type:"text",description:"Title of the Page"},subtitle:{text:"Powered by Weaviate",type:"text",description:"Subtitle of the Page"},intro_message:{text:"Welcome to Verba, your open-source RAG application!",type:"text",description:"Intro Message"},placeholder_message:{text:"Ask Verba anything!",type:"text",description:"Input Placeholder"},image:{src:"https://github.com/weaviate/Verba/blob/main/frontend/public/favicon.png?raw=true",type:"image",description:"Logo of the Page"},primary_color:{color:"#FDFF91",type:"color",description:"Primary Color"},secondary_color:{color:"#90FFA8",type:"color",description:"Secondary Color"},warning_color:{color:"#FF8399",type:"color",description:"Accent Color"},bg_color:{color:"#FEF7F7",type:"color",description:"Background Color"},bg_alt_color:{color:"#FFFFFF",type:"color",description:"Alternative Background Color"},text_color:{color:"#161616",type:"color",description:"Text Color"},text_alt_color:{color:"#8E8E8E",type:"color",description:"Alternative Text Color"},button_color:{color:"#EFEFEF",type:"color",description:"Button Color"},button_hover_color:{color:"#DCDCDC",type:"color",description:"Button Hover Color"},bg_console:{color:"#3F3E40",type:"color",description:"Console Background"},text_console:{color:"#FFFFFF",type:"color",description:"Console Text"},font:C,theme:"light"}},Chat:w}};var _=s(65125),k=e=>{let{title:t,TextFieldSetting:s,setting:o,settingsConfig:n,setSettingsConfig:r}=e;return(0,l.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,l.jsx)("div",{className:"flex items-center justify-center",children:(0,l.jsx)("p",{children:s.description})}),(0,l.jsx)("div",{className:"flex items-center justify-center",children:(0,l.jsx)("label",{className:"input input-bordered flex items-center gap-2 w-full bg-bg-verba",children:(0,l.jsx)("input",{type:"text",className:"grow",placeholder:t,value:n[o].settings[t].text,onChange:e=>{let s=e.target.value;r(e=>{let l=JSON.parse(JSON.stringify(e));return l[o].settings[t].text=s,l})}})})})]},t)},A=e=>{let{title:t,ImageFieldSetting:s,setting:o,settingsConfig:n,setSettingsConfig:r}=e;return(0,l.jsxs)("div",{className:"flex flex-col justify-center gap-1",children:[(0,l.jsx)("div",{className:"flex justify-center items-center",children:(0,l.jsx)("p",{children:s.description})}),(0,l.jsx)("div",{className:"flex justify-center items-center",children:(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"flex justify-center items-center mt-4",children:(0,l.jsx)("img",{src:n[o].settings[t].src,alt:"Logo",className:"max-w-xs max-h-32 rounded-xl"})}),(0,l.jsxs)("div",{className:"flex justify-center items-center mt-1",children:[(0,l.jsx)("button",{onClick:()=>{var e;return null===(e=document.getElementById("LogoImageInput"))||void 0===e?void 0:e.click()},className:"btn border-none text-xs bg-bg-verba text-text-alt-verba",children:"Add Logo"}),(0,l.jsx)("input",{id:"LogoImageInput",type:"file",accept:"image/*",onChange:e=>{if(e.target.files&&e.target.files[0]){let s=new FileReader;s.onload=e=>{r(s=>{var l;let n=JSON.parse(JSON.stringify(s));return n[o].settings[t].src=null===(l=e.target)||void 0===l?void 0:l.result,n})},s.readAsDataURL(e.target.files[0])}},className:"hidden"})]})]})})]},t)},F=s(73478),E=e=>{let{title:t,ColorSetting:s,setting:o,settingsConfig:n,setSettingsConfig:r}=e,a=e=>{r(s=>{let l=JSON.parse(JSON.stringify(s));return l[o].settings[t].color=e,l})};return(0,l.jsxs)("div",{className:"flex flex-col justify-center gap-1",children:[(0,l.jsx)("div",{className:"flex justify-center items-center",children:(0,l.jsx)("p",{children:s.description})}),(0,l.jsx)("div",{className:"flex gap-2 justify-center items-center",children:(0,l.jsxs)("div",{className:"flex flex-col gap-1 h-[15vh]",children:[(0,l.jsx)("label",{className:"input bg-bg-verba input-sm input-bordered flex items-center gap-2 w-full",children:(0,l.jsx)("input",{type:"text",className:"grow",placeholder:t,value:n[o].settings[t].color,onChange:e=>{a(e.target.value)}})}),(0,l.jsx)(F.gW,{color:n[o].settings[t].color,onChange:e=>{a(e)}})]})})]},t)},T=e=>{let{title:t,SelectSetting:s,setting:o,settingsConfig:n,setSettingsConfig:r}=e;return(0,l.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,l.jsx)("div",{className:"flex items-center justify-center",children:(0,l.jsx)("p",{children:s.description})}),(0,l.jsx)("div",{className:"flex items-center justify-center",children:(0,l.jsx)("select",{value:n[o].settings[t].value,onChange:e=>{let s=e.target.value;r(e=>{let l=JSON.parse(JSON.stringify(e));return l[o].settings[t].value=s,l})},className:"select bg-bg-verba",children:s.options.map(e=>(0,l.jsx)("option",{children:e},"Select_"+e))})})]},t)},P=e=>{let{title:t,CheckboxSetting:s,setting:o,settingsConfig:n,setSettingsConfig:r}=e;return(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsx)("div",{className:"flex items-center justify-center",children:(0,l.jsx)("p",{children:s.description})}),(0,l.jsx)("div",{className:"flex items-center justify-center",children:(0,l.jsx)("input",{type:"checkbox",className:"toggle",checked:n[o].settings[t].checked,onChange:e=>{let s=e.target.checked;r(e=>{let l=JSON.parse(JSON.stringify(e));return l[o].settings[t].checked=s,l})}})})]},t)},O=e=>{let{title:t,NumberFieldSetting:s,setting:o,settingsConfig:n,setSettingsConfig:r}=e;return(0,l.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,l.jsx)("div",{className:"flex items-center justify-center",children:(0,l.jsx)("p",{children:s.description})}),(0,l.jsx)("div",{className:"flex items-center justify-center",children:(0,l.jsx)("label",{className:"input input-bordered flex items-center gap-2 w-full bg-bg-verba",children:(0,l.jsx)("input",{type:"number",className:"grow",placeholder:t,value:n[o].settings[t].value,onChange:e=>{let s=e.target.value;r(e=>{let l=JSON.parse(JSON.stringify(e));return l[o].settings[t].value=s,l})}})})})]},t)},I=e=>{let{Icon:t,iconSize:s,title:o,currentSetting:n,setSetting:r,setSettingString:a}=e;return(0,l.jsxs)("button",{className:"btn lg:btn-lg flex items-center justify-center border-none hover:bg-button-hover-verba ".concat(n===a?"bg-primary-verba text-text-verba":"bg-button-verba text-text-alt-verba"),onClick:e=>{r(a)},children:[(0,l.jsx)(t,{size:s}),(0,l.jsx)("p",{className:"sm:hidden md:flex md:text-base lg:text-lg",children:o})]},o)},R=e=>{let{settingTemplate:t,setSettingTemplate:s,baseSetting:o,setBaseSetting:n}=e,[r,a]=(0,g.useState)("Customization"),[i,c]=(0,g.useState)(JSON.parse(JSON.stringify(o[t]))),[d,x]=(0,g.useState)(Object.keys(S));(0,g.useEffect)(()=>{x(Object.keys(S)),c(JSON.parse(JSON.stringify(o[t])))},[o,t]);let u=(e,t)=>{if(""===r)return null;switch(t.type){case"text":return(0,l.jsx)(k,{title:e,setting:r,TextFieldSetting:t,settingsConfig:i,setSettingsConfig:c});case"image":return(0,l.jsx)(A,{title:e,setting:r,ImageFieldSetting:t,settingsConfig:i,setSettingsConfig:c});case"check":return(0,l.jsx)(P,{title:e,setting:r,CheckboxSetting:t,settingsConfig:i,setSettingsConfig:c});case"select":return(0,l.jsx)(T,{title:e,setting:r,SelectSetting:t,settingsConfig:i,setSettingsConfig:c});case"color":return(0,l.jsx)(E,{title:e,setting:r,ColorSetting:t,settingsConfig:i,setSettingsConfig:c});case"number":return(0,l.jsx)(O,{title:e,setting:r,NumberFieldSetting:t,settingsConfig:i,setSettingsConfig:c});default:return null}};return(0,l.jsxs)("div",{className:"flex justify-between items-start gap-5",children:[(0,l.jsxs)("div",{className:"hidden lg:flex lg:flex-col gap-5 lg:w-1/4",children:[(0,l.jsxs)("div",{className:"flex flex-col justify-center items-center gap-5",children:[(0,l.jsx)("p",{className:"md:text-base lg:text-lg text-text-alt-verba",children:"Settings"}),(0,l.jsxs)("div",{className:"flex flex-col w-full bg-bg-alt-verba p-5 rounded-lg shadow-lg gap-2",children:[(0,l.jsx)(I,{Icon:b._TT,iconSize:20,title:"Customize Verba",currentSetting:r,setSetting:a,setSettingString:"Customization"}),(0,l.jsx)(I,{Icon:m.utr,iconSize:20,title:"Chat Settings",currentSetting:r,setSetting:a,setSettingString:"Chat"})]})]}),""!=r&&(0,l.jsxs)("div",{className:"sm:hidden md:flex flex-col justify-center items-center gap-5",children:[(0,l.jsx)("p",{className:" md:text-base lg:text-lg text-text-alt-verba",children:"Description"}),(0,l.jsx)("div",{className:"flex flex-col w-full bg-bg-alt-verba p-5 rounded-lg shadow-lg gap-2",children:(0,l.jsxs)("p",{className:"sm:text-xs md:text-sm lg:text-base",children:[" ",S[t][r]?S[t][r].description:""]})})]})]}),(0,l.jsxs)("div",{className:"flex flex-col lg:justify-center justify-start lg:items-center items-start gap-5 w-full lg:w-3/4",children:[(0,l.jsxs)("div",{className:"flex flex-row gap-2 items-center justify-center w-full",children:[(0,l.jsx)("div",{className:"lg:hidden sm:flex md:ml-4 sm:mr-8",children:(0,l.jsx)("ul",{className:"menu menu-sm sm:menu-horizontal bg-base-200 rounded-box bg-bg-alt-verba z-40",children:(0,l.jsx)("li",{children:(0,l.jsxs)("details",{children:[(0,l.jsxs)("summary",{children:[(0,l.jsx)(p.bqP,{size:15})," Settings"]}),(0,l.jsxs)("ul",{className:"bg-bg-alt-verba",children:[(0,l.jsx)("li",{onClick:()=>{a("Customization")},children:(0,l.jsx)("a",{children:"Customize Verba"})}),(0,l.jsx)("li",{onClick:()=>{a("Chat")},children:(0,l.jsx)("a",{children:"Chat Settings"})})]})]})})})}),(0,l.jsx)("p",{className:"sm:hidden md:flex text-lg text-text-alt-verba",children:"Configuration"}),(0,l.jsx)("select",{value:t,onChange:e=>{s(e.target.value)},className:"select select-md lg:select-sm text-xs bg-bg-alt-verba text-text-verba",children:d.map(e=>(0,l.jsx)("option",{children:e},"Template"+e))})]}),(0,l.jsxs)("div",{className:"flex flex-col w-full bg-bg-alt-verba p-10 rounded-lg shadow-lg h-[70vh] gap-2 overflow-y-scroll",children:[(0,l.jsx)("p",{className:"font-bold text-2xl lg:mb-5",children:r}),""!=r&&(0,l.jsxs)("div",{className:"lg:hidden flex flex-col items-start gap-5 mb-5",children:[(0,l.jsx)("p",{className:" md:text-base lg:text-lg text-text-alt-verba",children:"Description"}),(0,l.jsx)("div",{className:"flex flex-col w-full gap-2",children:(0,l.jsxs)("p",{className:"sm:text-xs md:text-sm lg:text-base",children:[" ",S[t][r]?S[t][r].description:""]})})]}),(0,l.jsx)("div",{className:" flex-coll gap-4 grid sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3",children:r&&Object.entries(S[t][r].settings).map(e=>{let[t,s]=e;return u(t,s)})}),(0,l.jsxs)("div",{className:"flex justify-end gap-2 mt-3",children:[(0,l.jsxs)("button",{onClick:()=>{n(e=>{let s=JSON.parse(JSON.stringify(e));return s[t]=i,s})},className:"btn flex items-center justify-center border-none text-text-verba bg-secondary-verba hover:bg-button-hover-verba",children:[(0,l.jsx)(b.FJM,{}),(0,l.jsx)("p",{className:"",children:"Apply"})]}),(0,l.jsxs)("button",{onClick:()=>{c(JSON.parse(JSON.stringify(o[t])))},className:"btn flex items-center justify-center border-none text-text-verba bg-warning-verba hover:bg-button-hover-verba",children:[(0,l.jsx)(_.B4e,{}),(0,l.jsx)("p",{className:"",children:"Reset"})]})]})]})]})]})},D=s(15560),z=s.n(D);let G=()=>{let e="https:"===window.location.protocol?"wss:":"ws:",t=window.location.host;return"".concat(e,"//").concat(t,"/ws/generate_stream")};var B=s(13921),J=s(44025),V=s(38666),H=e=>{let{message:t,handleCopyToBillboard:s,settingConfig:o}=e;return(0,l.jsxs)("div",{className:"flex items-end gap-2 ".concat("user"===t.type?"justify-end":"justify-start"),children:[(0,l.jsx)("div",{className:"flex flex-col p-4 rounded-xl animate-press-in shadow-md sm:text-sm md:text-base ".concat("user"===t.type?"bg-primary-verba":"bg-bg-verba"),children:"system"===t.type?(0,l.jsx)(B.D,{className:"prose md:prose-base sm:prose-sm p-3 prose-pre:bg-bg-alt-verba",components:{code(e){let{node:t,inline:s,className:n,children:r,...a}=e,i=/language-(\w+)/.exec(n||"");return!s&&i?(0,l.jsx)(J.Z,{style:"dark"===o.Customization.settings.theme?V.vk:V.Yn,language:i[1],PreTag:"div",...a,children:String(r).replace(/\n$/,"")}):(0,l.jsx)("code",{className:n,...a,children:r})}},children:t.content}):(0,l.jsx)("div",{className:"whitespace-pre-wrap",children:t.content})}),(0,l.jsx)("div",{className:"flex flex-col items-center justify-center",children:"system"===t.type&&(0,l.jsx)("button",{onClick:()=>s(t.content),className:"btn border-none shadow-none flex gap-1 bg-bg-alt-verba hover:bg-secondary-verba hover:text-text-verba text-text-alt-verba",children:(0,l.jsx)("p",{className:"text-xs",children:"Copy"})})})]})},M=s(61379),L=e=>{let{status:t,true_text:s,false_text:o}=e;return(0,l.jsx)("div",{className:"p-2 rounded-lg text-text-verba text-sm ".concat(t?"bg-secondary-verba":"bg-bg-alt-verba text-text-alt-verba"),children:(0,l.jsx)("p",{className:"text-xs ".concat(t?"text-text-verba":"text-text-alt-verba"),children:t?s:o})})},W=e=>{let{component_name:t,Icon:s,changeTo:o,changePage:n,disable:r}=e;return(0,l.jsxs)("button",{disabled:r,onClick:()=>n(o),className:"btn btn-sm w-full border-none p-2 rounded-lg text-text-verba text-sm bg-button-verba hover:bg-primary-verba }",children:[(0,l.jsx)("div",{className:"hidden md:flex",children:(0,l.jsx)(s,{size:15})}),(0,l.jsx)("p",{className:'text-xs "text-text-verba',children:t})]})},U=e=>{let{APIHost:t,settingConfig:s,setChunks:o,setChunkTime:n,setCurrentPage:r,production:a,RAGConfig:i}=e,[c,d]=(0,g.useState)(""),x=(0,g.useRef)(null),[m,u]=(0,g.useState)(null),[b,p]=(0,g.useState)(""),[f,v]=(0,g.useState)([]),[j,y]=(0,g.useState)(!1),[N,C]=(0,g.useState)("DONE"),[w,S]=(0,g.useState)(!1),[_,k]=(0,g.useState)([]),[A,F]=(0,g.useState)(!1),[E,T]=(0,g.useState)(""),[P,O]=(0,g.useState)("GOOD"),I=e=>{navigator.clipboard.writeText(e).then(function(){R("Copied message")},function(e){console.error("Unable to copy text: ",e)})},R=(e,t)=>{if(t?O("BAD"):O("GOOD"),A){T(e);return}T(e),F(!0),setTimeout(()=>{F(!1),T("")},3e3)};(0,g.useEffect)(()=>{v(V("VERBA_CONVERSATION")),o(Z("VERBA_CHUNKS"));let e=G(),t=new WebSocket(e);return t.onopen=()=>{console.log("WebSocket connection opened to "+e),R("WebSocket Online")},t.onmessage=e=>{let t;try{t=JSON.parse(e.data)}catch(t){console.error("Received data is not valid JSON:",e.data);return}let s=t.message;if(d(e=>e+s),"stop"===t.finish_reason){y(!1),C("DONE");let e=t.full_text;if(t.cached){let s=t.distance;v(t=>[...t,{type:"system",content:e,cached:!0,distance:s}])}else v(t=>[...t,{type:"system",content:e}]);d("")}},t.onerror=e=>{console.error("WebSocket Error:",e),R("WebSocket Error: "+e,!0),y(!1),C("DONE")},t.onclose=e=>{e.wasClean?console.log("WebSocket connection closed cleanly, code=".concat(e.code,", reason=").concat(e.reason)):console.error("WebSocket connection died"),R("WebSocket Connection Offline",!0),y(!1),C("DONE")},u(t),()=>{t.readyState!==WebSocket.CLOSED&&t.close()}},[]),(0,g.useEffect)(()=>{f.length>1&&J("VERBA_CONVERSATION",f),x.current&&(f[f.length-1],x.current.scrollIntoView({behavior:"smooth"}))},[f]);let D=async e=>{p(e),k([])},B=(e,t)=>{if((null==m?void 0:m.readyState)===WebSocket.OPEN){let s=JSON.stringify({query:e,context:t,conversation:f});m.send(s)}else console.error("WebSocket is not open. ReadyState:",null==m?void 0:m.readyState)},J=(e,t)=>{localStorage.setItem(e,JSON.stringify(t))},V=e=>{{let t=localStorage.getItem(e);if(t&&JSON.parse(t).length>0)return JSON.parse(t)}return[{type:"system",content:s.Customization.settings.intro_message.text}]},U=e=>{localStorage.removeItem(e)},q=(e,t)=>{localStorage.setItem(e,JSON.stringify(t))},Z=e=>{try{{let t=localStorage.getItem(e);if(t&&JSON.parse(t).length>0)return JSON.parse(t)}}catch(e){console.error("Failed to load chunks from local storage:",e)}return[]},K=e=>{localStorage.removeItem(e)},Y=async e=>{if(null==e||e.preventDefault(),k([]),null===t){R("No connection to server");return}if(!j&&b.trim()){v(e=>[...e,{type:"user",content:b}]),p("");let e=document.getElementById("reset");null!==e?(e.style.height="",e.style.width=""):console.error('The element with ID "target" was not found in the DOM.');try{y(!0),C("CHUNKS");let e=await fetch(t+"/api/query",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:b})}),s=await e.json();s?(""!==s.error&&R(s.error,!0),o(s.chunks),q("VERBA_CHUNKS",s.chunks),k([]),n(s.took),s.context&&(B(b,s.context),C("RESPONSE"))):(R("Failed to fetch from API: No data received",!0),y(!1),C("DONE"))}catch(e){console.error("Failed to fetch from API:",e),R("Failed to fetch from API: "+e,!0),y(!1),C("DONE")}}},$=async e=>{if(w||""===e||j||!s.Chat.settings.suggestion.checked){k([]);return}try{S(!0);let s=await fetch(t+"/api/suggestions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:e})}),l=await s.json();l&&k(l.suggestions),S(!1)}catch(e){console.error("Failed to fetch suggestions:",e),S(!1)}},X=e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),Q=(e,t)=>{let s=X(t),o=e.split(RegExp("(".concat(s,")"),"gi"));return(0,l.jsx)("div",{className:"flex flex-row gap-1",children:o.map((e,s)=>(0,l.jsx)("p",{className:e.toLowerCase()===t.toLowerCase()?"font-bold text-sm":"",children:e},s))})};return(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsxs)("div",{className:"flex flex-col bg-bg-alt-verba rounded-lg shadow-lg p-2 md:p-5 text-text-verba gap-5 h-[55vh] overflow-auto",children:[(0,l.jsxs)("div",{className:"flex gap-1 md:gap-2 items-center",children:[i&&(0,l.jsx)("div",{className:"flex gap-2 items-center",children:(0,l.jsx)(W,{disable:a,component_name:i?i.Generator.selected:"",Icon:M.VB9,changeTo:"RAG",changePage:r})}),(0,l.jsx)("div",{className:"hidden sm:block md:h-[3vh] lg:h-[2vh] bg-text-alt-verba w-px mx-0 md:mx-1"}),(0,l.jsx)(L,{status:null!==t&&null!==m&&m.readyState===WebSocket.OPEN,true_text:"Online",false_text:"Connecting..."}),(0,l.jsx)(L,{status:s.Chat.settings.caching.checked,true_text:"Caching",false_text:"No Caching"}),(0,l.jsx)(L,{status:s.Chat.settings.suggestion.checked,true_text:"Suggestions",false_text:"No Suggestions"})]}),(0,l.jsxs)("div",{className:"flex flex-col",children:[f.map((e,t)=>(0,l.jsx)("div",{ref:t===f.length-1?x:null,className:"mb-4 ".concat("user"===e.type?"text-right":""),children:(0,l.jsx)(H,{message:e,handleCopyToBillboard:I,settingConfig:s})},t)),c&&(0,l.jsx)(H,{settingConfig:s,message:{type:"system",content:c,cached:!1},handleCopyToBillboard:I})]}),j&&(0,l.jsxs)("div",{className:"flex items-center pl-4 mb-4 gap-3",children:[(0,l.jsx)(z(),{color:s.Customization.settings.text_color.color,loading:!0,size:10,speedMultiplier:.75}),(0,l.jsxs)("p",{children:["CHUNKS"===N&&"Retrieving chunks","RESPONSE"===N&&"Generating answer"]})]})]}),(0,l.jsx)("div",{className:"flex flex-col bg-bg-alt-verba rounded-lg shadow-lg p-5 text-text-verba gap-5 min-h-[9.3vh]",children:(0,l.jsxs)("form",{className:"flex justify-between w-full items-center gap-3",onSubmit:Y,children:[(0,l.jsx)("textarea",{id:"reset",rows:1,cols:10,onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),Y(e))},value:b,onChange:e=>{p(e.target.value),$(e.target.value)},className:" bg-bg-alt-verba textarea textarea-xs p-2 text-sm md:text-base w-full",placeholder:"Ask ".concat(s.Customization.settings.title.text," anything")}),(0,l.jsx)("button",{type:"submit",className:"btn btn-circle border-none shadow-none bg-bg-alt-verba hover:bg-secondary-verba",children:(0,l.jsx)(h.ghy,{size:18})}),(0,l.jsx)("div",{className:"tooltip text-text-verba","data-tip":"Reset Conversation",children:(0,l.jsx)("button",{type:"button",onClick:()=>{U("VERBA_CONVERSATION"),K("VERBA_CHUNKS"),o([]),v([{type:"system",content:s.Customization.settings.intro_message.text}]),p(""),k([])},className:"btn btn-circle border-none shadow-none bg-bg-alt-verba hover:bg-secondary-verba",children:(0,l.jsx)(h.oRX,{size:18})})})]})}),(0,l.jsx)("div",{className:"flex flex-col gap-2",children:_.map((e,t)=>(0,l.jsx)("button",{className:"btn sm:btn-sm md:btn-md border:none bg-button-verba hover:bg-button-hover-verba text-sm font-normal",onClick:()=>D(e),children:Q(e,b)},t+e))}),(0,l.jsx)("div",{className:"animate-pop-in ".concat(A?"opacity-100":"opacity-0"," ").concat("GOOD"===P?"bg-secondary-verba":"bg-warning-verba"," text-text-verba p-3 rounded text-sm transition-opacity"),children:(0,l.jsx)("p",{children:E})})]})},q=s(77095),Z=e=>{let{chunks:t,selectedChunk:s,chunkTime:o,setSelectedChunk:n,setCurrentPage:r,RAGConfig:a,production:i}=e;return(0,g.useEffect)(()=>{t&&t.length>0?n(t[0]):n(null)},[t]),(0,l.jsx)("div",{className:"flex flex-col gap-2",children:(0,l.jsxs)("div",{className:"flex flex-col bg-bg-alt-verba rounded-lg shadow-lg p-5 text-text-verba gap-3 md:h-[17vh] lg:h-[65vh] overflow-auto",children:[(0,l.jsxs)("div",{className:"flex md:flex-col gap-5",children:[(0,l.jsx)("div",{className:"flex md:flex-row lg:flex-col gap-2 justify-center md:justify-start items-center",children:a&&(0,l.jsxs)("div",{className:"flex flex-row lg:flex-col gap-2 items-center lg:w-full",children:[(0,l.jsx)(W,{disable:i,component_name:a?a.Embedder.selected:"",Icon:b.i1q,changeTo:"RAG",changePage:r}),(0,l.jsx)(W,{disable:i,component_name:a?a.Retriever.selected:"",Icon:b.U41,changeTo:"RAG",changePage:r})]})}),t&&t.length>0&&(0,l.jsx)("div",{className:"sm:hidden md:flex items-center justify-center",children:(0,l.jsxs)("p",{className:"items-center justify-center text-text-alt-verba text-xs",children:[t.length," chunks retrieved in ",o," seconds."]})})]}),(0,l.jsx)("div",{className:"flex sm:flex-row lg:flex-col gap-2",children:t&&t.map((e,t)=>(0,l.jsxs)("button",{onClick:()=>n(e),className:"btn md:btn-base lg:btn-lg sm:w-2/3 md:w-1/3 lg:w-full flex justify-start items-center gap-5 ".concat((null==s?void 0:s.chunk_id)===e.chunk_id&&s.doc_uuid===e.doc_uuid?"bg-secondary-verba":"bg-button-verba"," hover:button-hover-verba"),children:[(0,l.jsx)("div",{className:"tooltip text-xs","data-tip":"Score: ".concat(Math.round(100*e.score)),children:(0,l.jsx)("button",{className:"btn btn-xs text-xs btn-circle lg:btn-sm bg-bg-alt-verba hover:bg-primary-verba flex md:text-sm lg:text-base",children:(0,l.jsx)(q.ZP,{end:t+1,className:"text-sm"})})}),(0,l.jsxs)("div",{className:"flex flex-col items-start truncate sm:w-1/2",children:[(0,l.jsx)("p",{className:"text-xs lg:text-sm text-text-verba",children:e.doc_name}),(0,l.jsx)("p",{className:"text-xs text-text-alt-verba",children:e.doc_type})]})]},e.doc_name+t))})]})})},K=s(21794),Y=e=>{let{title:t,modal_id:s,text:o,triggerAccept:n,triggerString:r,triggerValue:a}=e;return(0,l.jsx)("dialog",{id:s,className:"modal",children:(0,l.jsxs)("div",{className:"modal-box",children:[(0,l.jsx)("h3",{className:"font-bold text-lg",children:t}),(0,l.jsx)("p",{children:o}),(0,l.jsx)("div",{className:"modal-action",children:(0,l.jsxs)("form",{method:"dialog",children:[(0,l.jsx)("button",{className:"btn text-text-verba bg-primary-verba hover:bg-button-hover-verba",onClick:()=>{n(a)},children:r}),(0,l.jsx)("button",{className:"btn text-text-verba bg-warning-verba hover:bg-button-hover-verba ml-2",children:"Cancel"})]})})]})})},$=e=>{let{APIhost:t,selectedChunk:s,settingConfig:o,selectedDocument:n,deletable:r,setSelectedChunk:a,setDocuments:i,setTriggerReset:c,production:d}=e,[x,m]=(0,g.useState)(null),[u,h]=(0,g.useState)(null),[p,f]=(0,g.useState)(!1),[v,j]=(0,g.useState)(!1),y=(0,g.useRef)(null);(0,g.useEffect)(()=>{null!=s&&null!=t?N():m(null)},[s]);let N=async()=>{if(null!=s&&null!=t)try{f(!0);let e=await fetch(t+"/api/get_document",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({document_id:s.doc_uuid})}),l=await e.json();l&&(""!==l.error?(m(null),console.error(l.error),h(null),f(!1),j(!1)):(m(l.document),h(function(e,t){if(null===t||""===t)return{beginning:e,substring:"",ending:""};let s=e.indexOf(t);if(-1===s)return{beginning:e,substring:"",ending:""};let l=s+t.length,o=e.substring(0,s),n=e.substring(s,l);return{beginning:o,substring:n,ending:e.substring(l)}}(l.document.text,s.text)),f(!1),y.current&&y.current.scrollIntoView({behavior:"smooth"}),""!==s.text&&l.document.text.length>o.Chat.settings.max_document_size.value?j(!1):j(!0)))}catch(e){console.error("Failed to fetch document:",e),f(!1)}},C=async e=>{try{console.log("DELETING "+e),fetch(t+"/api/delete_document",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({document_id:e})}),m(null),a(null),i&&i(null),c&&c(e=>!e)}catch(e){console.error("Failed to delete document:",e)}};return null===x||p?(0,l.jsx)("div",{className:"flex flex-col gap-2",children:(0,l.jsx)("div",{className:"flex flex-col bg-bg-alt-verba rounded-lg items-center justify-center shadow-lg p-5 text-text-verba gap-5 sm:h-[47vh] lg:h-[65vh] overflow-auto",children:p&&(0,l.jsxs)("div",{className:"flex items-center justify-center pl-4 mb-4 gap-3",children:[(0,l.jsx)(z(),{color:o.Customization.settings.text_color.color,loading:!0,size:10,speedMultiplier:.75}),(0,l.jsx)("p",{children:"Loading Document..."})]})})}):(0,l.jsxs)("div",{className:"flex flex-col bg-bg-alt-verba rounded-lg shadow-lg p-5 text-text-verba gap-5 sm:h-[53.5vh] lg:h-[65vh] overflow-auto",children:[(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)("p",{className:"sm:text-sm md:text-lg font-semibold",children:x.name}),(0,l.jsx)("p",{className:"sm:text-xs md:text-sm text-text-alt-verba",children:x.type})]}),(0,l.jsxs)("div",{className:"flex gap-3",children:[u&&""!==u.substring&&(0,l.jsx)("div",{className:"flex",children:(0,l.jsxs)("button",{onClick:()=>{j(e=>!e)},className:"btn border-none text-text-verba bg-button-verba hover:bg-button-hover-verba flex gap-2",children:[(0,l.jsx)(_.rQE,{}),(0,l.jsx)("p",{className:"sm:hidden md:flex text-xs text-text-verba",children:v?"Show Only Context":"Show Whole Document"})]})}),""!==x.link&&(0,l.jsx)("div",{className:"flex",children:(0,l.jsxs)("button",{onClick:()=>{window.open(null==x?void 0:x.link,"_blank","noopener,noreferrer")},className:"btn border-none text-text-verba bg-button-verba hover:bg-button-hover-verba flex gap-2",children:[(0,l.jsx)(b.CkN,{}),(0,l.jsx)("p",{className:"sm:hidden md:flex text-xs text-text-verba",children:"Go To Source"})]})}),r&&!d&&(0,l.jsx)("div",{className:"flex",children:(0,l.jsxs)("button",{onClick:()=>{let e=document.getElementById("delete_document_modal");e instanceof HTMLDialogElement&&e.showModal()},className:"btn border-none text-text-verba bg-warning-verba hover:bg-button-hover-verba flex gap-2",children:[(0,l.jsx)(_.ZkW,{}),(0,l.jsx)("p",{className:"sm:hidden md:flex text-xs text-text-verba",children:"Delete Document"})]})})]})]}),u&&(0,l.jsxs)("div",{className:"flex flex-col gap-5",children:[v&&""!==u.beginning&&(0,l.jsx)(B.D,{className:"prose max-w-prose md:prose-base sm:prose-sm p-3 prose-pre:bg-bg-alt-verba",components:{code(e){let{node:t,inline:s,className:n,children:r,...a}=e,i=/language-(\w+)/.exec(n||"");return!s&&i?(0,l.jsx)(J.Z,{style:"dark"===o.Customization.settings.theme?V.vk:V.Yn,language:i[1],PreTag:"div",...a,children:String(r).replace(/\n$/,"")}):(0,l.jsx)("code",{className:n,...a,children:r})}},children:u.beginning}),""!==u.substring&&(0,l.jsxs)("div",{ref:y,className:" border-secondary-verba border-2 rounded-lg shadow-lg flex gap-2 flex-col p-3",children:[(0,l.jsx)("div",{className:"flex w-1/3",children:(0,l.jsxs)("div",{className:"p-2 flex gap-1 rounded-lg text-text-verba text-sm bg-secondary-verba }",children:[(0,l.jsx)(K.drw,{}),(0,l.jsx)("p",{className:"text-xs text-text-verba}",children:"Context Used"})]})}),(0,l.jsx)(B.D,{className:"prose md:prose-base sm:prose-sm p-3 prose-pre:bg-bg-alt-verba",components:{code(e){let{node:t,inline:s,className:n,children:r,...a}=e,i=/language-(\w+)/.exec(n||"");return!s&&i?(0,l.jsx)(J.Z,{style:"dark"===o.Customization.settings.theme?V.vk:V.Yn,language:i[1],PreTag:"div",...a,children:String(r).replace(/\n$/,"")}):(0,l.jsx)("code",{className:n,...a,children:r})}},children:u.substring})]}),v&&""!==u.ending&&(0,l.jsx)(B.D,{className:"prose md:prose-base sm:prose-sm p-3 prose-pre:bg-bg-alt-verba",components:{code(e){let{node:t,inline:s,className:n,children:r,...a}=e,i=/language-(\w+)/.exec(n||"");return!s&&i?(0,l.jsx)(J.Z,{style:"dark"===o.Customization.settings.theme?V.vk:V.Yn,language:i[1],PreTag:"div",...a,children:String(r).replace(/\n$/,"")}):(0,l.jsx)("code",{className:n,...a,children:r})}},children:u.ending})]}),(0,l.jsx)(Y,{modal_id:"delete_document_modal",title:"Delete Document",text:"Do you want to delete "+x.name+"?",triggerString:"Delete",triggerValue:s?s.doc_uuid:"",triggerAccept:C})]})},X=e=>{let{tooltip_text:t,display_text:s,settingConfig:o}=e;return(0,l.jsxs)("div",{className:"items-center gap-2 ".concat(o.Chat.settings.info_button.checked?"flex":"hidden"),children:[(0,l.jsx)("div",{className:"tooltip tooltip-right text-xs","data-tip":t,children:(0,l.jsx)("button",{className:"btn btn-circle btn-sm border-none bg-bg-verba hover:bg-secondary-verba text-text-verba",children:(0,l.jsx)(b.LL$,{})})}),(0,l.jsx)("p",{className:"text-sm text-text-alt-verba",children:s})]})},Q=e=>{let{APIHost:t,settingConfig:s,setCurrentPage:o,RAGConfig:n,production:r}=e,[a,i]=(0,g.useState)([]),[c,d]=(0,g.useState)(0),[x,m]=(0,g.useState)(null);return(0,l.jsxs)("div",{className:"flex sm:flex-col md:flex-row justify-between items-start md:gap-3 ",children:[(0,l.jsxs)("div",{className:"sm:w-full md:w-1/2 lg:w-2/6 flex flex-col gap-2",children:[(0,l.jsx)(X,{settingConfig:s,tooltip_text:"Use the Chat Interface to interact with your data. Your query will be used to retrieve relevant information and to construct a response. You can choose between different Large Language Models (LLM) to create a response.",display_text:"Chat Interface"}),(0,l.jsx)(U,{production:r,RAGConfig:n,settingConfig:s,APIHost:t,setChunks:i,setChunkTime:d,setCurrentPage:o})]}),(0,l.jsxs)("div",{className:"flex lg:flex-row sm:flex-col justify-between items-start sm:w-full md:w-1/2 lg:w-4/6 gap-3",children:[(0,l.jsxs)("div",{className:"sm:w-full lg:w-1/4 flex flex-col gap-2",children:[(0,l.jsx)(X,{settingConfig:s,tooltip_text:"Use the Chunk Interface to browse through relevant chunks of your data, based on your last query. You can choose between different embeddings and retrieval techniques.",display_text:"Relevant Context"}),(0,l.jsx)(Z,{production:r,chunks:a,RAGConfig:n,selectedChunk:x,setSelectedChunk:m,chunkTime:c,setCurrentPage:o})]}),(0,l.jsxs)("div",{className:"sm:w-full lg:w-3/4 flex flex-col gap-2",children:[(0,l.jsx)(X,{settingConfig:s,tooltip_text:"Use the Document Viewer to inspect your data and extracts of context that were used to generate responses to your queries. You can switch between showing the whole document and only showing the specific extract.",display_text:"Document Viewer"}),(0,l.jsx)($,{production:r,setSelectedChunk:m,selectedChunk:x,APIhost:t,settingConfig:s,deletable:!1,selectedDocument:null})]})]})]})},ee=e=>{let{APIHost:t,selectedDocument:s,settingConfig:o,setSelectedDocument:n,documents:r,setDocuments:a,triggerReset:i,setCurrentPage:c,RAGConfig:d,production:x}=e,[m,u]=(0,g.useState)(""),[p,f]=(0,g.useState)(1),[v,j]=(0,g.useState)(0),[y,N]=(0,g.useState)([]),[C,w]=(0,g.useState)(null),[S,_]=(0,g.useState)(null),[k,A]=(0,g.useState)(!1),F=async e=>{try{A(!0);let s=await fetch(t+"/api/get_all_documents",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:e||"",doc_type:S||"",page:p,pageSize:100})}),l=await s.json();l&&(""!==l.error?(console.error(l.error),A(!1),a(null)):(a(l.documents),N(l.doc_types),w(l.current_embedder),j(l.took),A(!1)))}catch(e){console.error("Failed to fetch document:",e),A(!1)}};(0,g.useEffect)(()=>{null!=r&&null!=t?F(m):(a(null),A(!1))},[p,S]),(0,g.useEffect)(()=>{null!=t?F(m):(a(null),A(!1))},[i]);let E=()=>{F(m)},T=e=>{n({text:"",doc_name:e.name,chunk_id:0,doc_uuid:e.uuid,doc_type:e.type,score:0})};return(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsx)("div",{className:"flex flex-col bg-bg-alt-verba rounded-lg shadow-lg p-5 text-text-verba md:gap-5 min-h-[15vh] md:min-h-[9.3vh]",children:(0,l.jsxs)("form",{className:"flex flex-col lg:flex-row w-full items-center justify-between gap-2 lg:gap-3",onSubmit:E,children:[(0,l.jsx)("textarea",{rows:1,cols:10,onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),E())},value:m,onChange:e=>{u(e.target.value)},className:" bg-bg-alt-verba textarea textarea-xs p-2 text-sm md:text-base w-full",placeholder:"Search for documents"}),(0,l.jsxs)("div",{className:"flex justify-between items-center gap-2 lg:w-3/5",children:[(0,l.jsx)("div",{className:"flex w-full",children:(0,l.jsx)(W,{disable:x,component_name:d?d.Embedder.selected:"",Icon:b.i1q,changeTo:"RAG",changePage:c})}),(0,l.jsx)("button",{type:"button",onClick:E,className:"btn btn-sm md:btn-md btn-circle border-none shadow-none bg-bg-alt-verba hover:bg-secondary-verba",children:(0,l.jsx)(b.U41,{size:18})}),(0,l.jsx)("button",{type:"button",onClick:()=>{u(""),F("")},className:"btn btn-sm md:btn-md btn-circle border-none shadow-none bg-bg-alt-verba hover:bg-secondary-verba",children:(0,l.jsx)(h.oRX,{size:18})})]})]})}),(0,l.jsxs)("div",{className:"flex flex-col bg-bg-alt-verba rounded-lg shadow-lg p-5 text-text-verba gap-3 sm:h-[35vh] md:h-[40vh] lg:h-[55vh] overflow-auto",children:[(0,l.jsxs)("div",{className:"flex gap-2 items-center justify-center",children:[(0,l.jsx)("div",{className:"flex items-center justify-center",children:(0,l.jsxs)("select",{value:S||"All",onChange:e=>{_("All"===e.target.value?null:e.target.value)},className:"select select-sm bg-bg-verba",children:[(0,l.jsx)("option",{children:"All"},"Select_None"),y.map(e=>(0,l.jsx)("option",{children:e},"Select_"+e))]})}),(0,l.jsxs)("div",{className:"join justify-center items-center text-text-verba",children:[p>1&&(0,l.jsx)("button",{onClick:()=>{r&&(1==p?f(1):f(e=>e-1))},className:"join-item btn btn-sm border-none bg-button-verba hover:bg-secondary-verba",children:"\xab"}),(0,l.jsxs)("button",{className:"join-item btn btn-sm border-none bg-button-verba hover:bg-secondary-verba",children:["Page ",p]}),r&&r.length>=100&&(0,l.jsx)("button",{onClick:()=>{r&&(r.length<100?f(1):f(e=>e+1))},className:"join-item btn btn-sm border-none bg-button-verba hover:bg-secondary-verba",children:"\xbb"})]})]}),r&&r.length>0&&(0,l.jsx)("div",{className:"sm:hidden md:flex items-center justify-center",children:(0,l.jsxs)("p",{className:"items-center justify-center text-text-alt-verba text-xs",children:[r.length," documents retrieved in ",v," seconds with ",C,"."]})}),(0,l.jsx)("div",{className:"gap-2 grid grid-cols-1 lg:grid-cols-2",children:r&&r.map((e,t)=>(0,l.jsx)("button",{onClick:()=>T(e),className:"btn md:btn-md lg:btn-lg w-full flex justify-start gap-4 ".concat(s&&s.doc_uuid===e.uuid?"bg-secondary-verba":"bg-button-verba"," hover:button-hover-verba"),children:(0,l.jsxs)("div",{className:"flex flex-col items-start truncate",children:[(0,l.jsx)("p",{className:"text-xs lg:text-sm text-text-verba",children:e.name}),(0,l.jsx)("p",{className:"text-xs text-text-alt-verba",children:e.type})]})},e.name+t))}),k&&(0,l.jsxs)("div",{className:"flex items-center justify-center pl-4 mb-4 gap-3",children:[(0,l.jsx)(z(),{color:o.Customization.settings.text_color.color,loading:!0,size:10,speedMultiplier:.75}),(0,l.jsx)("p",{children:"Loading Document"})]})]})]})},et=e=>{let{APIHost:t,settingConfig:s,setCurrentPage:o,RAGConfig:n,production:r}=e,[a,i]=(0,g.useState)([]),[c,d]=(0,g.useState)(0),[x,m]=(0,g.useState)(null),[u,h]=(0,g.useState)(!1);return(0,l.jsxs)("div",{className:"flex sm:flex-col md:flex-row justify-center items-start gap-3 ",children:[(0,l.jsx)("div",{className:"sm:w-full md:w-2/4",children:(0,l.jsx)(ee,{production:r,RAGConfig:n,setCurrentPage:o,triggerReset:u,documents:a,setDocuments:i,APIHost:t,setSelectedDocument:m,settingConfig:s,selectedDocument:x})}),(0,l.jsx)("div",{className:"sm:w-full md:w-2/4",children:(0,l.jsx)($,{production:r,setTriggerReset:h,deletable:!0,setDocuments:i,setSelectedChunk:m,selectedChunk:x,APIhost:t,settingConfig:s,selectedDocument:null})})]})},es=e=>{let{title:t,value:s,checked:o}=e;return(0,l.jsx)("div",{className:"flex p-3 rounded-lg ".concat(o?"bg-secondary-verba":"bg-bg-verba"),children:(0,l.jsxs)("div",{className:"flex gap-2 text-text-verba items-center",children:[(0,l.jsx)("p",{children:t}),(0,l.jsx)("div",{className:"text-xs lg:text-sm text-text-verba",children:null!==s?(0,l.jsx)("p",{children:s}):(0,l.jsx)("p",{children:o?"Available":"Not Available"})})]})})},el=e=>{let{type:t,connected:s,isFetching:o,schemas:n,settingConfig:r,reset_verba:a}=e;return(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsxs)("div",{className:"flex flex-col bg-bg-alt-verba rounded-lg shadow-lg p-5 text-text-verba gap-6 h-[65vh] overflow-auto",children:[(0,l.jsxs)("div",{className:"flex lg:flex-row flex-col gap-2",children:[(0,l.jsx)("p",{className:"text-text-verba font-bold text-lg",children:"Admin Console"}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)(L,{status:null!==t,true_text:t||"",false_text:t||""}),(0,l.jsx)(L,{status:"Online"===s,true_text:s,false_text:"Connecting..."})]})]}),o&&(0,l.jsxs)("div",{className:"flex items-center justify-center pl-4 mb-4 gap-3",children:[(0,l.jsx)(z(),{color:r.Customization.settings.text_color.color,loading:!0,size:10,speedMultiplier:.75}),(0,l.jsx)("p",{children:"Loading Stats"})]}),"Online"===s&&(0,l.jsxs)("div",{className:"gap-2 grid grid-cols-2",children:[(0,l.jsxs)("button",{onClick:()=>{let e=document.getElementById("reset_verba_modal");e instanceof HTMLDialogElement&&e.showModal()},className:"btn bg-button-verba text-text-verba hover:bg-warning-verba flex gap-2",children:[(0,l.jsx)("div",{className:"hidden lg:flex",children:(0,l.jsx)(_.ZkW,{})}),(0,l.jsx)("p",{className:"flex text-xs",children:"Reset Verba"})]}),(0,l.jsxs)("button",{onClick:()=>{let e=document.getElementById("reset_documents_modal");e instanceof HTMLDialogElement&&e.showModal()},className:"btn bg-button-verba text-text-verba hover:bg-warning-verba flex gap-2",children:[(0,l.jsx)("div",{className:"hidden lg:flex",children:(0,l.jsx)(_.ZkW,{})}),(0,l.jsx)("p",{className:"flex text-xs",children:"Reset Documents"})]}),(0,l.jsxs)("button",{onClick:()=>{let e=document.getElementById("reset_cache_modal");e instanceof HTMLDialogElement&&e.showModal()},className:"btn bg-button-verba text-text-verba hover:bg-warning-verba flex gap-2",children:[(0,l.jsx)("div",{className:"hidden lg:flex",children:(0,l.jsx)(_.ZkW,{})}),(0,l.jsx)("p",{className:"flex text-xs",children:"Reset Cache"})]}),(0,l.jsxs)("button",{onClick:()=>{let e=document.getElementById("reset_suggestions_modal");e instanceof HTMLDialogElement&&e.showModal()},className:"btn bg-button-verba text-text-verba hover:bg-warning-verba flex gap-2",children:[(0,l.jsx)("div",{className:"hidden lg:flex",children:(0,l.jsx)(_.ZkW,{})}),(0,l.jsx)("p",{className:"flex text-xs",children:"Reset Suggestion"})]}),(0,l.jsxs)("button",{onClick:()=>{let e=document.getElementById("reset_config_modal");e instanceof HTMLDialogElement&&e.showModal()},className:"btn bg-button-verba text-text-verba hover:bg-warning-verba flex gap-2",children:[(0,l.jsx)("div",{className:"hidden lg:flex",children:(0,l.jsx)(_.ZkW,{})}),(0,l.jsx)("p",{className:"flex text-xs",children:"Reset Config"})]})]}),(0,l.jsx)("div",{className:"flex flex-col gap-2",children:n&&Object.entries(n).map(e=>{let[t,s]=e;return(0,l.jsx)(es,{title:t,value:s,checked:!1},t+"SCHEMA")})})]}),(0,l.jsx)(Y,{modal_id:"reset_verba_modal",title:"Reset Verba",text:"Do you want to delete all data Verba data?",triggerString:"Reset",triggerValue:"VERBA",triggerAccept:a}),(0,l.jsx)(Y,{modal_id:"reset_documents_modal",title:"Reset Documents",text:"Do you want to delete all documents?",triggerString:"Reset",triggerValue:"DOCUMENTS",triggerAccept:a}),(0,l.jsx)(Y,{modal_id:"reset_cache_modal",title:"Reset Cache",text:"Do you want to delete all cached data?",triggerString:"Reset",triggerValue:"CACHE",triggerAccept:a}),(0,l.jsx)(Y,{modal_id:"reset_suggestions_modal",title:"Reset Suggestions",text:"Do you want to delete all autocompletion suggestions?",triggerString:"Reset",triggerValue:"SUGGESTIONS",triggerAccept:a}),(0,l.jsx)(Y,{modal_id:"reset_config_modal",title:"Reset Configuration",text:"Do you want to reset your Verba configuration?",triggerString:"Reset",triggerValue:"CONFIG",triggerAccept:a})]})},eo=e=>{let{title:t,status:s,isFetching:o,settingConfig:n}=e;return(0,l.jsx)("div",{className:"flex flex-col gap-2",children:(0,l.jsxs)("div",{className:"flex flex-col bg-bg-alt-verba rounded-lg shadow-lg p-5 text-text-verba gap-6 h-[65vh] overflow-auto",children:[(0,l.jsx)("div",{className:"flex gap-2",children:(0,l.jsx)("p",{className:"text-text-verba font-bold text-lg",children:t})}),o&&(0,l.jsx)("div",{className:"flex items-center justify-center pl-4 mb-4 gap-3",children:(0,l.jsx)(z(),{color:n.Customization.settings.text_color.color,loading:!0,size:10,speedMultiplier:.75})}),(0,l.jsx)("div",{className:"flex flex-col gap-2",children:s&&Object.entries(s).map(e=>{let[t,s]=e;return(0,l.jsx)(es,{title:t,value:null,checked:s},"Status_"+t)})})]})})},en=e=>{let{APIHost:t,settingConfig:s,fetchHost:o}=e,[n,r]=(0,g.useState)(null),[a,i]=(0,g.useState)("Offline"),[c,d]=(0,g.useState)(null),[x,m]=(0,g.useState)(null),[u,h]=(0,g.useState)(null),[b,p]=(0,g.useState)(!1);(0,g.useEffect)(()=>{null!=t?(async()=>{try{p(!0);let e=await fetch(t+"/api/get_status",{method:"GET"}),s=await e.json();s?(s.error&&console.log(s.error),r(s.type),i("Online"),d(s.libraries),m(s.variables),h(s.schemas),p(!1)):console.warn("Status could not be retrieved")}catch(e){console.error("Failed to fetch document:",e),i("Offline"),r(null),d(null),m(null),h(null),p(!1)}})():(console.warn("Missing API Host for retrieving status"),i("Offline"),r(null),d(null),m(null),h(null),p(!1))},[]);let f=async()=>{if(t)try{p(!0);let e=await fetch(t+"/api/get_status",{method:"GET"}),s=await e.json();s?(s.error&&console.log(s.error),r(s.type),i("Online"),d(s.libraries),m(s.variables),h(s.schemas),p(!1)):console.warn("Status could not be retrieved")}catch(e){console.error("Failed to fetch document:",e),i("Offline"),r(null),d(null),m(null),h(null),p(!1)}},v=e=>{localStorage.removeItem(e)},j=async e=>{try{r(null),d(null),m(null),h(null),p(!0),v("VERBA_CONVERSATION"),v("VERBA_CHUNKS"),await fetch(t+"/api/reset",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({resetMode:e})})&&(await o(),await f())}catch(e){console.error("Failed to delete document:",e)}};return(0,l.jsxs)("div",{className:"flex sm:flex-col md:flex-row justify-center items-start gap-3 ",children:[(0,l.jsx)("div",{className:"w-full md:w-1/3",children:(0,l.jsx)(el,{reset_verba:j,settingConfig:s,type:n,isFetching:b,connected:a,schemas:u})}),(0,l.jsx)("div",{className:"w-full md:w-1/3",children:(0,l.jsx)(eo,{settingConfig:s,title:"Libraries",isFetching:b,status:c})}),(0,l.jsx)("div",{className:"w-full md:w-1/3",children:(0,l.jsx)(eo,{settingConfig:s,title:"Variables",isFetching:b,status:x})})]})},er=e=>{let{title:t,TextFieldSetting:s,RAGConfig:o,RAGConfigTitle:n,RAGComponentTitle:r,setRAGConfig:a}=e;return(0,l.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,l.jsx)("div",{className:"flex items-center justify-center lg:text-base text-sm",children:(0,l.jsx)("p",{children:s.description})}),(0,l.jsx)("div",{className:"flex items-center justify-center",children:(0,l.jsx)("label",{className:"input input-bordered flex items-center gap-2 w-full lg:text-base text-sm bg-bg-verba",children:(0,l.jsx)("input",{type:"text",className:"grow",placeholder:t,value:o[n].components[r].config[t].text,onChange:e=>{let s=e.target.value;a(e=>{let l=JSON.parse(JSON.stringify(e));return console.log(l[n].components[r]),l[n].components[r].config[t].text=s,l})}})})})]},t)},ea=e=>{let{title:t,NumberFieldSetting:s,RAGConfig:o,RAGConfigTitle:n,RAGComponentTitle:r,setRAGConfig:a}=e;return(0,l.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,l.jsx)("div",{className:"flex items-center justify-center lg:text-base text-sm",children:(0,l.jsx)("p",{children:s.description})}),(0,l.jsx)("div",{className:"flex items-center justify-center",children:(0,l.jsx)("label",{className:"input input-bordered flex items-center gap-2 w-full lg:text-base text-sm bg-bg-verba",children:(0,l.jsx)("input",{type:"number",className:"grow",placeholder:t,value:o[n].components[r].config[t].value,onChange:e=>{let s=e.target.value;a(e=>{let l=JSON.parse(JSON.stringify(e));return console.log(l[n].components[r]),l[n].components[r].config[t].value=s,l})}})})})]},t)},ei=e=>{let{APIHost:t,files:s,settingConfig:o,textValues:n,RAGConfig:r,RAGConfigTitle:a,RAGComponents:i,setRAGConfig:c,setFiles:d,setTextValues:x}=e,[m,u]=(0,g.useState)(n?n[0]:""),h=e=>{c(t=>{let s=JSON.parse(JSON.stringify(t));return s[a].selected=e,s})},p=(e,t)=>{if(!r)return null;switch(t.type){case"text":return(0,l.jsx)(er,{title:e,RAGConfig:r,TextFieldSetting:t,RAGComponentTitle:i.selected,RAGConfigTitle:a,setRAGConfig:c});case"number":return(0,l.jsx)(ea,{title:e,RAGConfig:r,NumberFieldSetting:t,RAGComponentTitle:i.selected,RAGConfigTitle:a,setRAGConfig:c});default:return null}};return(0,l.jsx)("div",{className:"flex sm:flex-col md:flex-row justify-center items-start gap-3 w-full",children:(0,l.jsxs)("div",{className:"flex flex-col bg-bg-alt-verba rounded-lg shadow-lg p-5 text-text-verba gap-5 h-[65vh] overflow-auto w-full",children:[(0,l.jsx)("div",{className:"flex flex-col",children:(0,l.jsxs)("p",{className:"text-lg",children:["Select a ",a]})}),(0,l.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-2",children:i&&Object.entries(i.components).map(e=>{let[t,s]=e;return(0,l.jsx)("button",{disabled:!s.available,onClick:()=>{h(t)},className:"btn border-none ".concat(s.available?"flex":"hidden"," ").concat(t===i.selected?"bg-secondary-verba text-text-verba":"bg-button-verba text-text-alt-verba"," hover:bg-button-hover-verba "),children:(0,l.jsx)("p",{children:t})},"Component_"+t)})}),(0,l.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,l.jsxs)("div",{className:"flex lg:flex-row flex-col gap-1",children:[(0,l.jsx)("p",{className:"lg:text-base text-xs",children:"You selected: "}),(0,l.jsx)("p",{className:"font-bold lg:text-base text-sm",children:i.selected})]}),(0,l.jsx)("p",{className:"text-sm text-text-alt-verba",children:i.components[i.selected].description})]}),(0,l.jsx)("div",{className:" flex-col gap-4 grid grid-cols-1 lg:grid-cols-1",children:r&&Object.entries(i.components[i.selected].config).map(e=>{let[t,s]=e;return p(t,s)})}),"UPLOAD"===i.components[i.selected].type&&(0,l.jsxs)("div",{className:"flex lg:flex-row flex-col gap-3",children:[(0,l.jsxs)("div",{className:"flex flex-col gap-2 items-center",children:[(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsx)("button",{onClick:()=>{var e;return null===(e=document.getElementById(a+i.selected+"_upload"))||void 0===e?void 0:e.click()},className:"btn border-none bg-button-verba hover:bg-secondary-verba text-text-verba",children:"Add Files"}),(0,l.jsx)("input",{id:a+i.selected+"_upload",type:"file",value:s?void 0:"",onChange:e=>{e.target.files&&e.target.files[0]&&d(e.target.files)},className:"hidden",multiple:!0})]}),s&&(0,l.jsx)("div",{className:"flex",children:(0,l.jsx)("button",{onClick:()=>{d(null)},className:"btn text-sm border-none bg-warning-verba hover:bg-button-hover-verba ",children:"Clear Files"})})]}),s&&(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)("p",{className:"flex text-text-alt-verba text-sm ",children:"Files:"}),(0,l.jsx)("div",{className:"flex flex-col gap-1 overflow-y-auto h-[15vh] border-2 p-2 rounded-lg border-bg-verba",children:s&&Array.from(s).map((e,t)=>(0,l.jsx)("p",{children:e.name},t+e.name))})]})]}),"URL"===i.components[i.selected].type&&(0,l.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,l.jsx)("div",{className:"flex items-center justify-center",children:n.length>0&&m!==n[0]||""!=m&&n.length<=0?(0,l.jsx)("p",{children:"*Enter URL"}):(0,l.jsx)("p",{children:"Enter URL"})}),(0,l.jsxs)("div",{className:"flex flex-row gap-2 w-full items-center justify-center",children:[(0,l.jsx)("div",{className:"flex flex-col items-center justify-center gap-1 w-full",children:(0,l.jsx)("label",{className:"input input-bordered flex items-center w-full bg-bg-verba",children:(0,l.jsx)("input",{type:"text",className:"grow",value:m,onChange:e=>{u(e.target.value)}})})}),(0,l.jsx)("button",{onClick:()=>{x([m])},className:"btn bg-bg-verba border-none hover:bg-secondary-verba",children:(0,l.jsx)(b.l_A,{})})]})]}),(0,l.jsx)("div",{})]})})},ec=e=>{let{APIHost:t,setCurrentPage:s,settingConfig:o,RAGConfig:n,setRAGConfig:r,showComponents:a,buttonTitle:i,baseSetting:c,settingTemplate:d}=e,[x,m]=(0,g.useState)(JSON.parse(JSON.stringify(n))),[u,h]=(0,g.useState)(null),[p,f]=(0,g.useState)([]),[v,j]=(0,g.useState)(!1),[y,N]=(0,g.useState)([]),C=async()=>{if(j(!0),!u&&p.length<=0){j(!1);return}try{S("INFO","Importing...");let e=u?await Promise.all(Array.from(u).map(e=>new Promise((t,s)=>{let l=new FileReader;l.onload=()=>{let s=function(e){let t="",s=new Uint8Array(e),l=s.byteLength;for(let e=0;e<l;e++)t+=String.fromCharCode(s[e]);return btoa(t)}(l.result),o=e.name;t({filename:o,extension:e.name.split(".").pop()||"",content:s})},l.onerror=()=>s(l.error),l.readAsArrayBuffer(e)}))):[];if(h(null),e){let s=await fetch(t+"/api/import",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({config:{RAG:x,SETTING:{selectedTheme:d,themes:c}},data:e,textValues:p})}),l=await s.json();if(l){for(let e=0;e<l.logging.length;e++)N(t=>[...t,l.logging[e]]);j(!1)}else j(!1)}else j(!1)}catch(e){console.error("Failed to fetch from API:",e),j(!1)}},w=async()=>{if(t){j(!0);try{let e=await fetch(t+"/api/set_config",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({config:{RAG:x,SETTING:{selectedTheme:d,themes:c}}})}),s=await e.json();s&&console.log(s),j(!1)}catch(e){console.error("Failed to fetch from API:",e),j(!1)}}},S=(e,t)=>{let s={type:e,message:t};N(e=>[...e,s])};return(0,l.jsxs)("div",{className:"flex sm:flex-col md:flex-row justify-between gap-3 ",children:[x&&Object.entries(x).map(e=>{let[s,n]=e;return a.includes(s)&&(0,l.jsx)("div",{className:"w-full md:w-1/4",children:(0,l.jsx)(ei,{textValues:p,setTextValues:f,files:u,setFiles:h,settingConfig:o,APIHost:t,RAGConfig:x,RAGConfigTitle:s,RAGComponents:n,setRAGConfig:m},s)},"RAGButton_"+s)}),x?(0,l.jsxs)("div",{className:"flex flex-col gap-2 w-full md:w-1/4 items-end",children:[(0,l.jsxs)("div",{className:"flex flex-row gap-2 w-full",children:[(0,l.jsx)("button",{disabled:v,onClick:()=>{r(x),"Import"===i?C():(w(),s("CHAT"))},className:"btn w-1/2 btn-lg text-base flex gap-2 bg-secondary-verba hover:bg-button-hover-verba text-text-verba",children:v?(0,l.jsx)("div",{children:(0,l.jsx)("div",{className:"flex items-center",children:(0,l.jsx)(z(),{color:o.Customization.settings.text_color.color,loading:!0,size:10,speedMultiplier:.75})})}):(0,l.jsxs)("div",{className:"flex gap-2 items-center justify-center",children:[(0,l.jsx)(b.Xur,{}),i,u&&(0,l.jsxs)("p",{className:"text-sm",children:["(",u.length,")"]})]})}),(0,l.jsxs)("button",{disabled:v,onClick:()=>{m(JSON.parse(JSON.stringify(n))),N([]),f([]),h(null)},className:"btn w-1/2 btn-lg text-base text-text-verba bg-warning-verba hover:bg-button-hover-verba",children:[(0,l.jsx)(_.B4e,{}),"Clear"]})]}),"Import"===i&&y.length>0&&(0,l.jsx)("div",{className:"bg-bg-console-verba h-[58vh] overflow-auto w-full p-5 flex flex-col gap-1 rounded-lg",children:y&&y.map((e,t)=>(0,l.jsx)("pre",{className:"text-xs font-mono ".concat("INFO"===e.type?"text-text-console-verba":"WARNING"===e.type?"text-primary-verba":"SUCCESS"===e.type?"text-secondary-verba":"ERROR"===e.type?"text-warning-verba":""),children:(0,l.jsxs)("code",{children:["(",e.type,") ",e.message]})},"console_message_"+t))})]}):(0,l.jsx)("div",{className:"flex items-center justify-center",children:(0,l.jsxs)("div",{className:"flex items-center justify-center",children:[(0,l.jsx)(z(),{color:o.Customization.settings.text_color.color,loading:!0,size:10,speedMultiplier:.75}),(0,l.jsx)("p",{children:"Loading Components..."})]})})]})};let ed=async()=>{let e=async e=>{try{let t=await fetch(e);if(!t.ok)throw Error("HTTP status ".concat(t.status));return!0}catch(t){return console.error("Failed to fetch from ".concat(e,":"),t),!1}};if(await e("http://localhost:8000/api/health"))return"http://localhost:8000";if(await e("/api/health"))return"";throw Error("Both health checks failed")};var ex=s(9881);let eg={Inter:n(),Plus_Jakarta_Sans:a(),Open_Sans:c(),PT_Mono:x()};function em(){var e;let[t,s]=(0,g.useState)("CHAT"),[o,n]=(0,g.useState)(!1),[r,a]=(0,g.useState)(""),[i,c]=(0,g.useState)("Default"),[d,x]=(0,g.useState)(S),m=(null===(e=eg[d[i].Customization.settings.font.value])||void 0===e?void 0:e.className)||"",[u,h]=(0,g.useState)(null),[b,p]=(0,g.useState)(null),f=async()=>{try{let e=await ed();if(p(e),""===e||"http://localhost:8000"===e)try{let t=await fetch(e+"/api/health",{method:"GET"}),s=await t.json();s&&(n(s.production),a(s.gtag));let l=await fetch(e+"/api/config",{method:"GET"}),o=await l.json();o?(o.error&&console.log(o.error),o.data.RAG&&h(o.data.RAG),o.data.SETTING.themes?(x(o.data.SETTING.themes),c(o.data.SETTING.selectedTheme)):(x(S),c("Default"))):console.warn("Configuration could not be retrieved")}catch(e){console.error("Failed to fetch configuration:",e),h(null)}}catch(e){console.error("Error detecting host:",e),p(null)}};(0,g.useEffect)(()=>{f()},[]);let v=async()=>{if(b)try{await fetch(b+"/api/set_config",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({config:{RAG:u,SETTING:{selectedTheme:i,themes:d}}})})}catch(e){console.error("Failed to update config:",e)}};return(0,g.useEffect)(()=>{v()},[d,i]),(0,g.useEffect)(()=>{document.documentElement.style.setProperty("--primary-verba",d[i].Customization.settings.primary_color.color),document.documentElement.style.setProperty("--secondary-verba",d[i].Customization.settings.secondary_color.color),document.documentElement.style.setProperty("--warning-verba",d[i].Customization.settings.warning_color.color),document.documentElement.style.setProperty("--bg-verba",d[i].Customization.settings.bg_color.color),document.documentElement.style.setProperty("--bg-alt-verba",d[i].Customization.settings.bg_alt_color.color),document.documentElement.style.setProperty("--text-verba",d[i].Customization.settings.text_color.color),document.documentElement.style.setProperty("--text-alt-verba",d[i].Customization.settings.text_alt_color.color),document.documentElement.style.setProperty("--button-verba",d[i].Customization.settings.button_color.color),document.documentElement.style.setProperty("--button-hover-verba",d[i].Customization.settings.button_hover_color.color),document.documentElement.style.setProperty("--bg-console-verba",d[i].Customization.settings.bg_console.color),document.documentElement.style.setProperty("--text-console-verba",d[i].Customization.settings.text_console.color)},[d,i]),(0,l.jsxs)("main",{className:"min-h-screen p-5 bg-bg-verba text-text-verba ".concat(m),"data-theme":d[i].Customization.settings.theme,children:[""!==r&&(0,l.jsx)(ex.GoogleAnalytics,{gaId:r}),(0,l.jsx)(y,{APIHost:b,production:o,title:d[i].Customization.settings.title.text,subtitle:d[i].Customization.settings.subtitle.text,imageSrc:d[i].Customization.settings.image.src,version:"v1.0.0",currentPage:t,setCurrentPage:s}),"CHAT"===t&&(0,l.jsx)(Q,{production:o,settingConfig:d[i],APIHost:b,RAGConfig:u,setCurrentPage:s}),"DOCUMENTS"===t&&(0,l.jsx)(et,{RAGConfig:u,production:o,setCurrentPage:s,settingConfig:d[i],APIHost:b}),"STATUS"===t&&!o&&(0,l.jsx)(en,{fetchHost:f,settingConfig:d[i],APIHost:b}),"ADD"===t&&!o&&(0,l.jsx)(ec,{baseSetting:d,settingTemplate:i,buttonTitle:"Import",settingConfig:d[i],APIHost:b,RAGConfig:u,setRAGConfig:h,setCurrentPage:s,showComponents:["Reader","Chunker","Embedder"]}),"RAG"===t&&!o&&(0,l.jsx)(ec,{baseSetting:d,settingTemplate:i,buttonTitle:"Save",settingConfig:d[i],APIHost:b,RAGConfig:u,setRAGConfig:h,setCurrentPage:s,showComponents:["Embedder","Retriever","Generator"]}),"SETTINGS"===t&&!o&&(0,l.jsx)(R,{settingTemplate:i,setSettingTemplate:c,baseSetting:d,setBaseSetting:x}),(0,l.jsx)("footer",{className:"footer footer-center p-4 mt-8 bg-bg-verba text-text-alt-verba",children:(0,l.jsx)("aside",{children:(0,l.jsx)("p",{children:"Build with  and Weaviate \xa9 2024"})})})]})}}},function(e){e.O(0,[13,582,33,190,400,61,982,420,712,68,971,23,744],function(){return e(e.s=87094)}),_N_E=e.O()}]);