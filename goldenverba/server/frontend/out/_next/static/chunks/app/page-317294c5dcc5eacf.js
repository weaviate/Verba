(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{87094:function(e,t,n){Promise.resolve().then(n.bind(n,79640))},79640:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return eZ}});var r=n(57437),s=n(2265),a=n(9881),l=n(58177),o=n(8603),i=n(14063),c=n(97223),d=e=>{let{Icon:t,iconSize:n,title:s,currentPage:a,setPage:l,setCurrentPage:o,hide:i}=e;return(0,r.jsxs)("button",{className:"btn md:btn-sm lg:btn-md ".concat(i?"hidden":"flex"," flex-grow items-center justify-center border-none hover:bg-button-hover-verba ").concat(a===l?"bg-primary-verba text-text-verba":"bg-button-verba text-text-alt-verba"),onClick:e=>{o(l)},children:[(0,r.jsx)(t,{size:n}),(0,r.jsx)("p",{className:"md:text-xs lg:text-sm sm:hidden md:flex",children:s})]},s)};async function x(){try{let e=await fetch("https://api.github.com/repos/weaviate/verba",{method:"GET"}),t=await e.json();if(t)return t.stargazers_count;return 0}catch(e){return console.error("Failed to perform search:",e),0}}let u=e=>e>=1e3?(e/1e3).toFixed(1).replace(/\.0$/,"")+"k":e.toString();var b=e=>{let{imageSrc:t,title:n,subtitle:a,version:b,currentPage:m,setCurrentPage:g,production:h}=e,[f,v]=(0,s.useState)("0");(0,s.useEffect)(()=>{(async()=>{try{let e=await x();if(e){let t=u(e);v(t)}}catch(e){console.error("Failed to fetch GitHub stars:",e)}})()},[]);let p=()=>{window.open("https://github.com/weaviate/verba","_blank","noopener,noreferrer")};return(0,r.jsxs)("div",{className:"flex justify-between items-center mb-10",children:[(0,r.jsxs)("div",{className:"flex flex-row items-center gap-5",children:[(0,r.jsx)("img",{src:t,width:80,height:80,className:"flex rounded-lg w-[80px] h-[80px] object-contain"}),(0,r.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-end justify-center lg:gap-3",children:[(0,r.jsx)("p",{className:"sm:text-2xl md:text-3xl text-text-verba",children:n}),(0,r.jsx)("p",{className:"sm:text-sm text-base text-text-alt-verba font-light",children:a})]})]}),(0,r.jsxs)("div",{className:"flex flex-row justify-center items-center",children:[(0,r.jsx)("div",{className:"hidden sm:h-[3vh] lg:h-[5vh] bg-text-alt-verba w-px sm:mx-2 md:mx-4"}),(0,r.jsxs)("div",{className:"lg:flex hidden lg:flex-row items-center lg:gap-3 justify-between",children:[(0,r.jsx)("div",{className:" ".concat(h?"h-[0vh]":"sm:h-[3vh] lg:h-[5vh] mx-1"," hidden sm:block bg-text-alt-verba w-px")}),(0,r.jsx)(d,{hide:!1,Icon:l.utr,iconSize:18,title:"Chat",currentPage:m,setCurrentPage:g,setPage:"CHAT"}),(0,r.jsx)(d,{hide:h,Icon:o.Lgw,iconSize:18,title:"Import Data",currentPage:m,setCurrentPage:g,setPage:"ADD"}),(0,r.jsx)(d,{hide:!1,Icon:l.emU,iconSize:18,title:"Documents",currentPage:m,setCurrentPage:g,setPage:"DOCUMENTS"}),(0,r.jsx)(d,{hide:h,Icon:l.zfW,iconSize:18,title:"Settings",currentPage:m,setCurrentPage:g,setPage:"SETTINGS"}),(0,r.jsx)("div",{className:"sm:h-[3vh] lg:h-[5vh] mx-1 hidden sm:block bg-text-alt-verba w-px"}),(0,r.jsxs)("button",{className:"md:hidden btn md:btn-sm lg:btn-md lg:flex items-center justify-center border-none bg-secondary-verba hover:bg-button-hover-verba",onClick:p,children:[(0,r.jsx)(i.hJX,{size:18,className:"text-text-verba"}),(0,r.jsx)("p",{className:"text-xs sm:hidden md:flex text-text-verba ",children:f})]}),(0,r.jsx)("p",{className:"hidden lg:flex text-xs text-text-alt-verba",children:b})]}),(0,r.jsx)("div",{className:"flex flex-row items-center sm:gap-1 lg:gap-5 justify-between",children:(0,r.jsx)("div",{className:"lg:hidden sm:flex md:ml-4 sm:mr-8",children:(0,r.jsx)("ul",{className:"menu md:menu-md sm:menu-sm sm:menu-horizontal bg-base-200 rounded-box hover:bg-button-hover-verba bg-button-verba z-50",children:(0,r.jsx)("li",{children:(0,r.jsxs)("details",{children:[(0,r.jsx)("summary",{children:(0,r.jsx)(c.bqP,{size:20})}),(0,r.jsxs)("ul",{className:"bg-bg-alt-verba",children:[(0,r.jsx)("li",{onClick:e=>{g("CHAT")},children:(0,r.jsx)("a",{children:"Chat"})}),(0,r.jsx)("li",{onClick:e=>{g("DOCUMENTS")},children:(0,r.jsx)("a",{children:"Documents"})}),!h&&(0,r.jsx)("li",{onClick:e=>{g("STATUS")},children:(0,r.jsx)("a",{children:"Status"})}),!h&&(0,r.jsx)("li",{onClick:e=>{g("ADD")},children:(0,r.jsx)("a",{children:"Add Documents"})}),!h&&(0,r.jsx)("li",{onClick:e=>{g("RAG")},children:(0,r.jsx)("a",{children:"RAG"})}),!h&&(0,r.jsx)("li",{onClick:e=>{g("SETTINGS")},children:(0,r.jsx)("a",{children:"Settings"})}),(0,r.jsx)("li",{onClick:p,children:(0,r.jsx)("a",{children:"GitHub"})}),(0,r.jsx)("li",{className:"items-center justify-center text-xs text-text-alt-verba mt-2",children:b})]})]})})})})})]})]})};let m=async e=>{try{return(await fetch(e)).ok}catch(t){return console.error("Failed to fetch from ".concat(e,":"),t),!1}},g=async()=>{if(await m("http://localhost:8000/api/health"))return"http://localhost:8000";if(await m("/api/health"))return window.location.origin;throw Error("Both health checks failed, please check the Verba Server")},h=async e=>{try{let t=await g(),n=await fetch("".concat(t).concat(e),{method:"GET"}),r=await n.json();return r||console.warn("Could not retrieve data from ".concat(e)),r}catch(t){return console.error("Failed to fetch data from ".concat(e,":"),t),null}},f=()=>h("/api/health"),v=async(e,t,n)=>{let r=await g(),s=await fetch("".concat(r,"/api/connect"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({credentials:{deployment:e,url:t,key:n}})});return await s.json()},p=async e=>{try{let t=await g(),n=await fetch("".concat(t,"/api/get_rag_config"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return await n.json()}catch(e){return console.error("Error retrieving content",e),null}},j=async(e,t)=>{if(!e)return!1;try{let n=await g(),r=await fetch("".concat(n,"/api/set_rag_config"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({rag_config:e,credentials:t})});return 200===r.status}catch(e){return console.error("Error setting config:",e),!1}},w=async(e,t,n)=>{try{let r=await g(),s=await fetch("".concat(r,"/api/set_theme_config"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({themes:e,theme:t,credentials:n})});return 200===s.status}catch(e){return console.error("Error setting config:",e),!1}},y=async(e,t,n)=>{try{let r=await g(),s=await fetch("".concat(r,"/api/query"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:e,RAG:t,credentials:n})});return await s.json()}catch(e){return console.error("Error sending query",e),null}},N=async(e,t)=>{if(!e)return null;try{let n=await g(),r=await fetch("".concat(n,"/api/get_document"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uuid:e,credentials:t})});return await r.json()}catch(e){return console.error("Error retrieving selected document",e),null}},S=async(e,t)=>{try{let n=await g(),r=await fetch("".concat(n,"/api/get_datacount"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({embedding_model:e,credentials:t})});return await r.json()}catch(e){return console.error("Error retrieving content",e),null}},_=async(e,t,n,r)=>{if(!e)return null;try{let s=await g(),a=await fetch("".concat(s,"/api/get_content"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uuid:e,page:t,chunkScores:n,credentials:r})});return await a.json()}catch(e){return console.error("Error retrieving content",e),null}},C=async(e,t,n)=>{if(!e)return null;try{let r=await g(),s=await fetch("".concat(r,"/api/get_vectors"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uuid:e,showAll:t,credentials:n})});return await s.json()}catch(e){return console.error("Error retrieving content",e),null}},k=async(e,t,n,r)=>{if(!e)return null;try{let s=await g(),a=await fetch("".concat(s,"/api/get_chunks"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uuid:e,page:t,pageSize:n,credentials:r})});return await a.json()}catch(e){return console.error("Error retrieving content",e),null}},E=async(e,t,n)=>{if(!e)return null;try{let r=await g(),s=await fetch("".concat(r,"/api/get_chunk"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uuid:e,embedder:t,credentials:n})});return await s.json()}catch(e){return console.error("Error retrieving content",e),null}},D=async(e,t,n,r,s)=>{try{let a=await g(),l=await fetch("".concat(a,"/api/get_all_documents"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:e,labels:t,page:n,pageSize:r,credentials:s})});return await l.json()}catch(e){return console.error("Error retrieving all documents",e),null}},R=async(e,t)=>{try{let n=await g(),r=await fetch("".concat(n,"/api/delete_document"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uuid:e,credentials:t})});return 200===r.status}catch(e){return console.error("Error deleting document",e),!1}},O=async(e,t)=>{try{let n=await g(),r=await fetch("".concat(n,"/api/reset"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({resetMode:e,credentials:t})});return 200===r.status}catch(e){return console.error("Error deleting all documents",e),!1}},I=async e=>{try{let t=await g(),n=await fetch("".concat(t,"/api/get_meta"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return await n.json()}catch(e){return console.error("Error retrieving selected document",e),null}};var z=n(65125),T=e=>{let{tooltip_text:t,display_text:n}=e;return(0,r.jsxs)("div",{className:"items-center gap-2 flex",children:[(0,r.jsx)("div",{className:"tooltip tooltip-right text-xs","data-tip":t,children:(0,r.jsx)("button",{className:"btn btn-circle btn-sm border-none bg-bg-verba hover:bg-secondary-verba text-text-verba",children:(0,r.jsx)(i.LL$,{})})}),(0,r.jsx)("p",{className:"text-sm text-text-alt-verba truncate max-w-[350px]",title:n,children:n})]})},A=e=>{let{title:t,modal_id:n,text:s,triggerAccept:a,triggerString:l,triggerValue:o}=e;return(0,r.jsx)("dialog",{id:n,className:"modal",children:(0,r.jsxs)("div",{className:"modal-box flex flex-col gap-2",children:[(0,r.jsx)("h3",{className:"font-bold text-lg",children:t}),(0,r.jsx)("p",{className:"whitespace-pre-wrap",children:s}),(0,r.jsx)("div",{className:"modal-action",children:(0,r.jsxs)("form",{method:"dialog",className:"flex gap-2",children:[a&&l&&(0,r.jsx)("button",{className:"btn text-text-alt-verba hover:text-text-verba bg-button-verba border-none hover:bg-primary-verba",onClick:()=>{a(o)},children:l}),(0,r.jsx)("button",{className:"btn text-text-alt-verba hover:text-text-verba bg-button-verba border-none hover:bg-warning-verba",children:"Cancel"})]})})]})})},F=e=>{let{selectedDocument:t,setSelectedDocument:n,production:a,credentials:l}=e,[o,c]=(0,s.useState)(""),[d,x]=(0,s.useState)(1),[u,b]=(0,s.useState)([]),[m,g]=(0,s.useState)([]),[h,f]=(0,s.useState)([]),[v,p]=(0,s.useState)(!1),[j,w]=(0,s.useState)(!1),y=async e=>{try{w(!0);let t=await D(e||"",h,d,20,l);t&&(""!==t.error?(console.error(t.error),w(!1),b(null)):(b(t.documents),g(t.labels),w(!1)))}catch(e){console.error("Failed to fetch document:",e),w(!1)}};(0,s.useEffect)(()=>{p(!0)},[]),(0,s.useEffect)(()=>{y(o)},[d,v,h]);let N=()=>{y(o)},S=async e=>{!a&&await R(e,l)&&(e==t&&n(null),y(o))},_=async()=>{a||(n(null),b(null),await O("DOCUMENTS",l))},C=e=>{f(t=>[...t,e])},k=e=>{f(t=>t.filter(t=>t!==e))},E=e=>{h.includes(e)?k(e):C(e)},I=e=>{let t=document.getElementById(e);t instanceof HTMLDialogElement&&t.showModal()};return(0,r.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[(0,r.jsxs)("div",{className:"bg-bg-alt-verba rounded-2xl flex gap-2 p-6 items-center justify-between h-min w-full",children:[(0,r.jsx)("div",{className:"flex gap-2 justify-start w-[8vw]",children:(0,r.jsx)(T,{tooltip_text:"Search and inspect different documents imported into Verba",display_text:"Search"})}),(0,r.jsx)("label",{className:"input flex items-center gap-2 w-full bg-bg-verba",children:(0,r.jsx)("input",{type:"text",className:"grow w-full",onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),N())},placeholder:"Search for documents",value:o,onChange:e=>{c(e.target.value)}})}),(0,r.jsx)("button",{type:"button",onClick:N,className:"btn btn-square border-none bg-primary-verba text-text-verba hover:bg-button-hover-verba",children:(0,r.jsx)(i.U41,{size:15})}),(0,r.jsx)("button",{type:"button",onClick:()=>{c(""),f([]),y("")},className:"btn btn-square border-none bg-button-verba text-text-verba hover:bg-button-hover-verba",children:(0,r.jsx)(z.Ffb,{size:18})})]}),(0,r.jsxs)("div",{className:"bg-bg-alt-verba rounded-2xl flex flex-col p-6 gap-3 items-center h-full w-full overflow-auto",children:[(0,r.jsx)("div",{className:"grid grid-flow-col gap-2 justify-start items-start w-full",children:m&&m.map((e,t)=>(0,r.jsx)("button",{onClick:()=>{E(e)},className:"flex p-2 px-4 text-sm text-text-verba justify-center text-center items-center rounded-xl ".concat(h.includes(e)?"bg-primary-verba hover:bg-button-hover-verba":"bg-bg-verba hover:bg-primary-verba"," transition-colors duration-300 ease-in-out border-none"),children:(0,r.jsx)("p",{children:e})},document.title+t+e))}),j&&(0,r.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,r.jsx)("span",{className:"loading loading-spinner loading-sm"}),(0,r.jsx)("p",{className:"text-text-alt-verba",children:"Loading Documents"})]}),(0,r.jsxs)("div",{className:"flex flex-col w-full",children:[u&&u.map((e,s)=>(0,r.jsxs)("div",{className:"flex justify-between items-center gap-2 rounded-2xl p-1 w-full",children:[(0,r.jsx)("button",{onClick:()=>n(e.uuid),className:"flex ".concat(t&&t===e.uuid?"bg-secondary-verba hover:bg-button-hover-verba":"bg-button-verba hover:bg-secondary-verba","  w-full p-3 rounded-lg transition-colors duration-300 ease-in-out border-none"),children:(0,r.jsx)("p",{className:"text-text-verba",children:e.title})},e.title+s),(0,r.jsx)("div",{className:"flex justify-end items-center",children:(0,r.jsx)("button",{onClick:()=>{I("remove_document"+e.uuid)},className:"btn btn-square bg-button-verba border-none hover:bg-warning-verba text-text-verba",children:(0,r.jsx)(i.Xm5,{size:15})})}),(0,r.jsx)(A,{modal_id:"remove_document"+e.uuid,title:"Remove Document",text:"Do you want to remove "+e.title+"?",triggerString:"Delete",triggerValue:e.uuid,triggerAccept:S})]},"Document"+s+e.title))," "]})]}),(0,r.jsx)("div",{className:"bg-bg-alt-verba rounded-2xl flex gap-2 p-6 items-center justify-center h-min w-full",children:(0,r.jsxs)("div",{className:"flex gap-3 items-center justify-between w-full",children:[(0,r.jsxs)("div",{className:"join justify-center items-center text-text-verba",children:[d>1&&(0,r.jsx)("button",{onClick:()=>{u&&(1==d?x(1):x(e=>e-1))},className:"join-item btn btn-sqare border-none bg-button-verba hover:bg-secondary-verba",children:"\xab"}),(0,r.jsxs)("button",{className:"join-item btn border-none bg-button-verba hover:bg-secondary-verba",children:["Page ",d]}),u&&u.length>=20&&(0,r.jsx)("button",{onClick:()=>{u&&(u.length<20?x(1):x(e=>e+1))},className:"join-item btn btn-square border-none bg-button-verba hover:bg-secondary-verba",children:"\xbb"})]}),(0,r.jsxs)("button",{onClick:()=>{let e=document.getElementById("remove_all_documents");e instanceof HTMLDialogElement&&e.showModal()},className:"flex bg-button-verba hover:bg-button-hover-verba border-none btn text-text-verba gap-2",children:[(0,r.jsx)(i.Xm5,{size:15}),(0,r.jsx)("p",{children:"Delete all Documents"})]})]})}),(0,r.jsx)(A,{modal_id:"remove_all_documents",title:"Remove all Document?",text:"Do you want to all remove documents from Verba?",triggerString:"Remove All",triggerValue:null,triggerAccept:_})]})},M=n(68842),P=n(33149),L=n(26547),W=n(20789),B=n(77954),G=n(97776),J=n(71375);let q=["green","blue","red","yellow","purple","cyan","orange","limegreen","pink","teal","violet","forestgreen","gold","navy","magenta","mediumspringgreen","darkorange","deepskyblue","crimson","lightseagreen","royalblue","chartreuse","mediumorchid","aqua","orangered","mediumaquamarine","plum","lime","dodgerblue","lightcoral","mediumslateblue","lightgreen","darkred","springgreen","lightpink","indigo","lightyellow","mediumvioletred","seagreen","fuchsia","darkseagreen","thistle","orange","powderblue","yellowgreen","cornflowerblue","darkmagenta","darkblue","gold","mediumblue","rosybrown","darkgreen","lightskyblue","mediumseagreen","firebrick","lavender","darkcyan","khaki","mediumturquoise","saddlebrown","lightblue","olive","mintcream","turquoise","rebeccapurple","lightgoldenrodyellow"];function V(e,t,n){return n===t?0:(e-t)/(n-t)}(0,M.e)({OrbitControls:L.z});let U=e=>{let{vector:t,color:n,setHoverTitle:a,documentTitle:l,multiplication:o,dynamicColor:i,chunk_id:c,chunk_uuid:d,setSelectedChunk:x,selectedChunk:u,minX:b,maxX:m,minY:g,maxY:h,minZ:f,maxZ:v,chunkScores:p}=e,j=(0,s.useRef)(null),w=(0,s.useRef)(!1),y=(0,s.useMemo)(()=>null==p?void 0:p.some(e=>e.uuid===d),[p,d]),N=(0,s.useMemo)(()=>y?new G.Color("yellow"):u===d?new G.Color("green"):i?function(e,t,n,r,s,a,l){let o=V(e.x,t,n),i=V(e.y,r,s),c=V(e.z,a,l);return new G.Color("rgb(".concat(Math.floor(255*o),",").concat(Math.floor(255*i),",").concat(Math.floor(255*c),")"))}(t,b,m,g,h,f,v):new G.Color(n),[y,u,d,i,n,t,b,m,g,h,f,v]),S=y?3:u===d?1.5:1,_=y?1:w.current?1:.5,C=(0,s.useCallback)(()=>{w.current=!0,a.current("".concat(l," | ").concat(c))},[l,c,a]),k=(0,s.useCallback)(()=>{w.current=!1,a.current(null)},[a]),E=(0,s.useCallback)(()=>{x(d)},[d,x]);return(0,M.C)(()=>{if(j.current){j.current.position.lerp(new G.Vector3(t.x*o,t.y*o,t.z*o),.02);let e=j.current.material;e.color.set(w.current?"blue":N),e.opacity=w.current?1:_,e.transparent=!w.current}}),(0,r.jsx)(W.b,{rotationIntensity:.2,children:(0,r.jsxs)("mesh",{ref:j,position:[0,0,0],onPointerEnter:C,onPointerLeave:k,onClick:E,children:[(0,r.jsx)("sphereGeometry",{args:[S,32,32]}),(0,r.jsx)("meshBasicMaterial",{color:N,opacity:_,transparent:!0})]})})};var H=e=>{let{credentials:t,selectedDocument:n,chunkScores:a}=e;(0,s.useRef)([]);let[l,o]=(0,s.useState)(!1),[i,c]=(0,s.useState)([]),[d,x]=(0,s.useState)(""),[u,b]=(0,s.useState)(!1),[m,g]=(0,s.useState)(!0),[h,f]=(0,s.useState)(null),v=(0,s.useRef)(e=>f(e)),[p,j]=(0,s.useState)(200),[w,y]=(0,s.useState)(0),[N,S]=(0,s.useState)(null),[_,k]=(0,s.useState)(null),[D,R]=(0,s.useState)(-1),[O,I]=(0,s.useState)(1),[T,A]=(0,s.useState)(-1),[F,M]=(0,s.useState)(1),[W,G]=(0,s.useState)(-1),[V,H]=(0,s.useState)(1);function Y(e){return{min:Math.min(...e),max:Math.max(...e)}}(0,s.useEffect)(()=>{n?K():c([])},[u,n]),(0,s.useEffect)(()=>{N?X():k(null)},[N]);let X=async()=>{try{let e=await E(N,d,t);e&&(""!==e.error?(console.error(e.error),k(null)):k(e.chunk))}catch(e){console.error("Failed to fetch document:",e),o(!1)}},K=async()=>{try{o(!0);let e=await C(n,u,t);if(e){if(""!==e.error)console.error(e.error),o(!1),c([]),y(0),x("None");else if(c(e.vector_groups.groups),x(e.vector_groups.embedder),y(e.vector_groups.dimensions),o(!1),!u){let t=e.vector_groups.groups[0].chunks.map(e=>e.vector.x),n=e.vector_groups.groups[0].chunks.map(e=>e.vector.y),r=e.vector_groups.groups[0].chunks.map(e=>e.vector.z),{min:s,max:a}=Y(t);R(s),I(a);let{min:l,max:o}=Y(n);A(l),M(o);let{min:i,max:c}=Y(r);G(i),H(c)}}}catch(e){console.error("Failed to fetch document:",e),o(!1)}};return(0,r.jsxs)("div",{className:"flex flex-col gap-2 h-full w-full",children:[(0,r.jsx)("div",{className:"flex justify-end w-full gap-2 items-center",children:(0,r.jsxs)("div",{className:"flex w-full items-start justify-between",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsxs)("div",{className:"flex gap-1 items-center",children:[l&&(0,r.jsx)("div",{className:"flex items-center justify-center text-text-alt-verba gap-2 h-full",children:(0,r.jsx)("span",{className:"loading loading-spinner loading-sm"})}),(0,r.jsx)("p",{className:"text-text-alt-verba text-sm font-bold",children:"Embedding Model:"}),(0,r.jsx)("p",{className:"text-text-alt-verba text-sm",children:d})]}),(0,r.jsxs)("div",{className:"flex gap-1 items-center",children:[(0,r.jsx)("p",{className:"text-text-alt-verba text-sm font-bold",children:"Hover:"}),(0,r.jsx)("p",{className:"text-sm text-text-alt-verba",children:h})]}),(0,r.jsxs)("div",{className:"flex gap-1 items-center",children:[(0,r.jsx)("p",{className:"text-text-alt-verba text-sm font-bold",children:"Vectors:"}),(0,r.jsxs)("p",{className:"text-sm text-text-alt-verba",children:[i.length," x ",(()=>{let e=0;for(let t of i)e+=t.chunks.length;return e})()," x ",w]})]})]}),(0,r.jsxs)("div",{className:"flex gap-10 items-center justify-between min-w-[20vw]",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[(0,r.jsxs)("div",{className:"flex gap-2 items-center justify-between",children:[(0,r.jsx)("p",{className:"text-xs text-text-alt-verba",children:"Show All Documents"}),(0,r.jsx)("input",{type:"checkbox",className:"toggle",checked:u,onChange:e=>{b(e.target.checked)}})]}),(0,r.jsxs)("div",{className:"flex gap-2 items-center justify-between",children:[(0,r.jsx)("p",{className:"text-xs text-text-alt-verba",children:"Dynamic Coloring"}),(0,r.jsx)("input",{type:"checkbox",className:"toggle",checked:m,onChange:e=>{g(e.target.checked)}})]})]}),(0,r.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[(0,r.jsxs)("div",{className:"dropdown dropdown-bottom flex w-full justify-start items-center",children:[(0,r.jsxs)("button",{tabIndex:0,role:"button",disabled:!0,className:"btn btn-sm bg-button-verba hover:bg-button-hover-verba text-text-verba w-full flex justify-start border-none",children:[(0,r.jsx)(J.WMq,{size:15}),(0,r.jsx)("p",{children:"PCA"})]}),(0,r.jsx)("ul",{tabIndex:0,className:"dropdown-content menu bg-base-100 rounded-box z-[1] w-full p-2 shadow"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 w-full",children:[(0,r.jsx)("p",{className:"text-text-alt-verba text-sm",children:"Zoom"}),(0,r.jsx)("input",{onChange:e=>{j(Number(e.target.value))},type:"range",min:0,max:"1000",value:p,className:"range range-xs grow w-full"})]})]}),_&&(0,r.jsx)("button",{onClick:()=>{k(null),S(null)},className:"flex btn btn-square border-none text-text-verba bg-button-verba hover:bg-warning-verba gap-2",children:(0,r.jsx)(z.B4e,{size:15})})]})]})}),(0,r.jsxs)("div",{className:"flex gap-5 h-[45vh] w-full",children:[(0,r.jsx)("div",{className:"flex flex-grow transition-all duration-300 ease-in-out ".concat(N?"w-2/3":"w-full"," h-full"),children:(0,r.jsxs)(P.Xz,{children:[(0,r.jsx)("ambientLight",{intensity:1}),(0,r.jsx)(L.z,{}),(0,r.jsx)(B.c,{makeDefault:!0,position:[0,0,150]}),(0,r.jsx)("axesHelper",{args:[50]}),i.map((e,t)=>e.chunks.map((n,s)=>(0,r.jsx)(U,{dynamicColor:m,multiplication:p,vector:n.vector,color:function(e){if(!(e>=q.length))return q[e];{let e=Math.floor(Math.random()*q.length);return q[e]}}(t),setHoverTitle:v,documentTitle:e.name,chunk_id:n.chunk_id,setSelectedChunk:S,selectedChunk:N,chunk_uuid:n.uuid,minX:D,minY:T,minZ:W,maxX:O,maxY:F,maxZ:V,chunkScores:a},"Sphere_"+s+e.name)))]})}),(0,r.jsx)("div",{className:"flex flex-grow transition-all duration-300 ease-in-out ".concat(N?"w-1/3 opacity-100":"w-0 opacity-0"," overflow-auto"),children:_&&(0,r.jsxs)("div",{className:"flex flex-col p-3 gap-2 w-full",children:[(0,r.jsxs)("p",{className:"text-text-alt-verba fond-bold",children:["Chunk ",_.chunk_id]}),(0,r.jsx)("p",{className:"text-text-alt-verba text-sm",children:_.content})]})})]})]})},Y=n(13921),X=n(7395),K=n(38666),Z=e=>{let{selectedDocument:t,credentials:n,selectedTheme:a}=e,[o,c]=(0,s.useState)(!1),[d,x]=(0,s.useState)([]),[u,b]=(0,s.useState)(1),[m,g]=(0,s.useState)(0),[h,f]=(0,s.useState)(!0);(0,s.useEffect)(()=>{j(u),f(1===u&&0===m)},[u,m]),(0,s.useEffect)(()=>{j(1),g(0),f(1===u&&0===m)},[t]);let v=async()=>{m===d.length-1?(await j(u+1)?b(e=>e+1):(await j(1),b(1)),g(0)):g(e=>e+1)},p=async()=>{if(0===m){if(u>1){let e=u-1;await j(e)&&(b(e),g(9))}else{let e=u,t=!0;for(;t;)(t=await j(e+1))&&e++;await j(e),b(e),g(d.length-1)}}else g(e=>e-1)},j=async e=>{try{c(!0);let r=await k(t,e,10,n);if(r){if(""===r.error)return x(r.chunks),c(!1),r.chunks.length>0;console.error(r.error),c(!1),x([])}return!1}catch(e){return console.error("Failed to fetch document:",e),c(!1),!1}};return 0==d.length?(0,r.jsx)("div",{children:o&&(0,r.jsxs)("div",{className:"flex items-center justify-center text-text-alt-verba gap-2 h-full",children:[(0,r.jsx)("span",{className:"loading loading-spinner loading-sm"}),(0,r.jsx)("p",{children:"Loading Chunks"})]})}):(0,r.jsx)("div",{className:"flex flex-col h-full",children:d.length>0&&(0,r.jsxs)("div",{className:"bg-bg-alt-verba flex flex-col rounded-lg overflow-hidden h-full",children:[(0,r.jsxs)("div",{className:"flex-grow overflow-hidden p-3",children:[(0,r.jsx)("div",{className:"flex justify-between mb-2",children:(0,r.jsx)("div",{className:"flex gap-2",children:(0,r.jsxs)("div",{className:"flex gap-2 items-center p-3 bg-secondary-verba rounded-full w-fit",children:[(0,r.jsx)(l.$Kz,{size:12}),(0,r.jsxs)("p",{className:"text-xs flex text-text-verba",children:["Chunk ",d[m].chunk_id]})]})})}),(0,r.jsx)("div",{className:"overflow-y-auto h-[calc(100%-3rem)]",children:(0,r.jsx)(Y.D,{className:"max-w-[50vw] items-center justify-center flex-wrap md:prose-base sm:prose-sm p-3 prose-pre:bg-bg-alt-verba",components:{code(e){let{node:t,inline:n,className:s,children:l,...o}=e,i=/language-(\w+)/.exec(s||"");return!n&&i?(0,r.jsx)(X.Z,{style:"dark"===a.theme?K.vk:K.Yn,language:i[1],PreTag:"div",...o,children:String(l).replace(/\n$/,"")}):(0,r.jsx)("code",{className:s,...o,children:l})}},children:d[m].content})})]}),d.length>1&&(0,r.jsxs)("div",{className:"flex justify-center gap-2 p-3 bg-bg-alt-verba",children:[(0,r.jsxs)("button",{onClick:p,className:"flex gap-2 items-center p-3 bg-button-verba hover:bg-button-hover-verba rounded-full w-fit ".concat(h?"cursor-not-allowed opacity-50":""),disabled:h,children:[(0,r.jsx)(i.O18,{size:12}),(0,r.jsx)("p",{className:"text-xs flex text-text-verba",children:"Previous Chunk"})]}),(0,r.jsxs)("button",{onClick:v,className:"flex gap-2 items-center p-3 bg-button-verba hover:bg-button-hover-verba rounded-full w-fit",children:[(0,r.jsx)(i.Rdr,{size:12}),(0,r.jsx)("p",{className:"text-xs flex text-text-verba",children:"Next Chunk"})]})]})]})})},$=n(25847),Q=n(21794),ee=e=>{let{document:t,selectedDocument:n,selectedTheme:a,credentials:o,chunkScores:c}=e,[d,x]=(0,s.useState)(!0),[u,b]=(0,s.useState)(1),[m,g]=(0,s.useState)(1),[h,f]=(0,s.useState)([]),v=(0,s.useRef)(null);(0,s.useEffect)(()=>{t?p():f([]),b(1),g(1)},[t,c]),(0,s.useEffect)(()=>{t?p():(f([]),b(1),g(1))},[u]),(0,s.useEffect)(()=>{if(c&&c.length>0){var e;null===(e=v.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}},[h,c]);let p=async()=>{try{x(!0);let e=await _(n,u,c||[],o);e&&(""!==e.error?(f([{content:e.error,chunk_id:0,score:0,type:"text"}]),b(1),g(1)):(f(e.content),g(e.maxPage)),x(!1))}catch(e){console.error("Failed to fetch content from document:",e),x(!1)}},j=(e,t)=>"text"===e.type?(0,r.jsx)("div",{className:"flex p-2",ref:c?null:v,children:(0,r.jsx)(Y.D,{className:"max-w-[50vw] items-center justify-center flex-wrap md:prose-base sm:prose-sm p-3 prose-pre:bg-bg-alt-verba",components:{code(e){let{node:t,inline:n,className:s,children:l,...o}=e,i=/language-(\w+)/.exec(s||"");return!n&&i?(0,r.jsx)(X.Z,{style:"dark"===a.theme?K.vk:K.Yn,language:i[1],PreTag:"div",...o,children:String(l).replace(/\n$/,"")}):(0,r.jsx)("code",{className:s,...o,children:l})}},children:e.content})},"CONTENT_SNIPPET"+t):(0,r.jsxs)("div",{className:"flex p-2 border-2 flex-col gap-2 border-secondary-verba shadow-lg rounded-3xl",ref:v,children:[(0,r.jsx)("div",{className:"flex justify-between",children:(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsxs)("div",{className:"flex gap-2 items-center p-3 bg-secondary-verba rounded-full w-fit",children:[(0,r.jsx)(Q.dvR,{size:12}),(0,r.jsx)("p",{className:"text-xs flex text-text-verba",children:"Context Used"})]}),(0,r.jsxs)("div",{className:"flex gap-2 items-center p-3 bg-secondary-verba rounded-full w-fit",children:[(0,r.jsx)(l.$Kz,{size:12}),(0,r.jsxs)("p",{className:"text-xs flex text-text-verba",children:["Chunk ",e.chunk_id+1]})]}),e.score>0&&(0,r.jsxs)("div",{className:"flex gap-2 items-center p-3 bg-primary-verba rounded-full w-fit",children:[(0,r.jsx)(Q.dvR,{size:12}),(0,r.jsx)("p",{className:"text-xs flex text-text-verba",children:"High Relevancy"})]})]})}),(0,r.jsx)(Y.D,{className:"w-full items-center justify-center flex-wrap md:prose-base sm:prose-sm p-3 prose-pre:bg-bg-alt-verba",components:{code(e){let{node:t,inline:n,className:s,children:l,...o}=e,i=/language-(\w+)/.exec(s||"");return!n&&i?(0,r.jsx)(X.Z,{style:"dark"===a.theme?K.vk:K.Yn,language:i[1],PreTag:"div",...o,children:String(l).replace(/\n$/,"")}):(0,r.jsx)("code",{className:s,...o,children:l})}},children:e.content})]});return t?(0,r.jsx)("div",{className:"flex flex-col h-full",children:t&&(0,r.jsxs)("div",{className:"bg-bg-alt-verba flex flex-col rounded-lg overflow-hidden h-full",children:[(0,r.jsx)("div",{className:"p-3 bg-bg-alt-verba",children:(0,r.jsxs)("div",{className:"flex gap-4 w-full justify-between",children:[(0,r.jsxs)("div",{className:"flex gap-4 items-center",children:[d&&(0,r.jsx)("div",{className:"flex items-center justify-center text-text-alt-verba gap-2",children:(0,r.jsx)("span",{className:"loading loading-spinner loading-sm"})}),(0,r.jsx)("p",{className:"text-lg font-bold truncate max-w-[350px]",title:t.title,children:t.title})]}),(0,r.jsx)("div",{className:"gap-2 grid grid-cols-3",children:Object.entries(t.labels).map(e=>{let[n,s]=e;return(0,r.jsx)("div",{className:"flex bg-bg-verba min-w-[8vw] p-2 text-sm text-text-verba justify-center text-center items-center rounded-xl",children:(0,r.jsx)("p",{children:s})},t.title+n+s)})})]})}),(0,r.jsx)("div",{className:"flex-grow overflow-hidden p-3",children:(0,r.jsx)("div",{className:"overflow-y-auto h-full",children:h&&h.map((e,t)=>j(e,t))})}),(0,r.jsxs)("div",{className:"flex justify-center gap-2 p-3 bg-bg-alt-verba",children:[(0,r.jsxs)("button",{onClick:()=>{1==u?b(m):b(e=>e-1)},className:"flex gap-2 items-center p-3 bg-button-verba hover:bg-button-hover-verba rounded-full w-fit",children:[(0,r.jsx)(i.O18,{size:12}),(0,r.jsxs)("p",{className:"text-xs flex text-text-verba",children:["Previous ",c?"Chunk":"Page"]})]}),(0,r.jsx)("div",{className:"flex items-center",children:(0,r.jsxs)("p",{className:"text-xs text-text-verba",children:[c?"Chunk ":"Page "," ",u]})}),(0,r.jsxs)("button",{onClick:()=>{u==m?b(1):b(e=>e+1)},className:"flex gap-2 items-center p-3 bg-button-verba hover:bg-button-hover-verba rounded-full w-fit",children:[(0,r.jsx)(i.Rdr,{size:12}),(0,r.jsxs)("p",{className:"text-xs flex text-text-verba",children:["Next ",c?"Chunk":"Page"]})]})]})]})}):(0,r.jsx)("div",{})},et=e=>{let{credentials:t,selectedDocument:n,setSelectedDocument:a,chunkScores:l,selectedTheme:o}=e,[c,d]=(0,s.useState)("Content"),[x,u]=(0,s.useState)(!1),[b,m]=(0,s.useState)(null);(0,s.useEffect)(()=>{n?h():m(null)},[n]);let g=e=>{window.open(e,"_blank","noopener,noreferrer")},h=async()=>{try{u(!0);let e=await N(n,t);e&&(""!==e.error?(console.error(e.error),u(!1),m(null),a(null)):(m(e.document),u(!1)))}catch(e){console.error("Failed to fetch document:",e),u(!1)}};return n?(0,r.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[(0,r.jsxs)("div",{className:"bg-bg-alt-verba rounded-2xl flex gap-2 p-6 items-center justify-between h-min w-full",children:[(0,r.jsx)("div",{className:"flex gap-2 justify-start ",children:(0,r.jsx)(T,{tooltip_text:"Inspect your all information about your document, such as chunks, metadata and more.",display_text:b?b.title:"Loading..."})}),(0,r.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,r.jsxs)("button",{onClick:()=>{d("Content")},className:"flex ".concat("Content"===c?"bg-primary-verba hover:bg-button-hover-verba text-text-verba":"bg-button-verba hover:text-text-verba hover:bg-button-hover-verba"," border-none btn text-text-alt-verba gap-2"),children:[(0,r.jsx)(z.Vqr,{size:15}),(0,r.jsx)("p",{children:"Content"})]}),(0,r.jsxs)("button",{onClick:()=>{d("Chunks")},className:"flex ".concat("Chunks"===c?"bg-primary-verba hover:bg-button-hover-verba text-text-verba":"bg-button-verba hover:text-text-verba hover:bg-button-hover-verba"," border-none btn text-text-alt-verba gap-2"),children:[(0,r.jsx)(z.Fqs,{size:15}),(0,r.jsx)("p",{children:"Chunks"})]}),(0,r.jsxs)("button",{onClick:()=>{d("Vector Space")},className:"flex ".concat("Vector Space"===c?"bg-primary-verba hover:bg-button-hover-verba text-text-verba":"bg-button-verba hover:text-text-verba hover:bg-button-hover-verba"," border-none btn text-text-alt-verba gap-2"),children:[(0,r.jsx)($.FUn,{size:15}),(0,r.jsx)("p",{children:"Vector"})]}),(0,r.jsx)("button",{onClick:()=>{a(null)},className:"flex btn btn-square border-none text-text-verba bg-warning-verba hover:bg-button-hover-verba gap-2",children:(0,r.jsx)(z.B4e,{size:15})})]})]}),(0,r.jsxs)("div",{className:"bg-bg-alt-verba rounded-2xl flex flex-col p-6 h-full w-full overflow-y-auto overflow-x-hidden",children:["Content"===c&&(0,r.jsx)(ee,{selectedTheme:o,document:b,credentials:t,selectedDocument:n,chunkScores:l}),"Chunks"===c&&(0,r.jsx)(Z,{selectedTheme:o,credentials:t,selectedDocument:n}),"Vector Space"===c&&(0,r.jsx)(H,{credentials:t,selectedDocument:n,chunkScores:l})]}),(0,r.jsx)("div",{className:"bg-bg-alt-verba rounded-2xl flex gap-2 p-6 items-center justify-end h-min w-full",children:(0,r.jsxs)("div",{className:"flex gap-3 justify-end",children:[n&&b&&b.source&&(0,r.jsxs)("button",{onClick:()=>{g(b.source)},className:"flex btn border-none text-text-verba bg-button-verba hover:bg-button-hover-verba gap-2",children:[(0,r.jsx)(i.DAO,{size:15}),(0,r.jsx)("p",{children:"View Source"})]}),(0,r.jsxs)("button",{onClick:()=>{d("Metadata")},className:"flex ".concat("Metadata"===c?"bg-primary-verba hover:bg-button-hover-verba text-text-verba":"bg-button-verba hover:text-text-verba hover:bg-button-hover-verba"," border-none btn text-text-alt-verba gap-2"),children:[(0,r.jsx)(i.DAO,{size:15}),(0,r.jsx)("p",{children:"View Metadata"})]})]})})]}):(0,r.jsx)("div",{})},en=e=>{let{selectedTheme:t,production:n,credentials:a}=e,[l,o]=(0,s.useState)(null);return(0,r.jsxs)("div",{className:"flex justify-center gap-3 h-[80vh] ",children:[(0,r.jsx)("div",{className:"".concat(l?"hidden lg:flex lg:w-[45vw]":"w-full lg:w-[45vw] lg:flex"),children:(0,r.jsx)(F,{production:n,setSelectedDocument:o,credentials:a,selectedDocument:l})}),(0,r.jsx)("div",{className:"".concat(l?"lg:w-[55vw] w-full flex":"hidden lg:flex lg:w-[55vw]"),children:(0,r.jsx)(et,{credentials:a,setSelectedDocument:o,selectedTheme:t,selectedDocument:l})})]})};let er={DONE:"bg-secondary-verba",ERROR:"bg-warning-verba",READY:"bg-button-verba",STARTING:"bg-button-verba",CHUNKING:"bg-button-verba",LOADING:"bg-button-verba",EMBEDDING:"bg-button-verba",INGESTING:"bg-button-verba",NER:"bg-button-verba",EXTRACTION:"bg-button-verba",SUMMARIZING:"bg-button-verba",WAITING:"bg-button-verba"},es={DONE:"Finished",ERROR:"Failed",READY:"Ready",STARTING:"Importing...",CHUNKING:"Chunking...",LOADING:"Loading...",EMBEDDING:"Embedding...",INGESTING:"Weaviating...",NER:"Extracting NER...",EXTRACTION:"Extraction REL...",SUMMARIZING:"Summarizing...",WAITING:"Uploading..."},ea={theme_name:"Light",title:{text:"Verba",type:"text",description:"Title"},subtitle:{text:"The Golden RAGtriever",type:"text",description:"Subtitle"},intro_message:{text:"Welcome to Verba, your open-source RAG application!",type:"text",description:"First Message"},image:{src:"https://github.com/weaviate/Verba/blob/main/img/verba_icon.png?raw=true",type:"image",description:"Logo"},primary_color:{color:"#FDFF91",type:"color",description:"Primary"},secondary_color:{color:"#90FFA8",type:"color",description:"Secondary"},warning_color:{color:"#FF8399",type:"color",description:"Warning"},bg_color:{color:"#FEF7F7",type:"color",description:"Background"},bg_alt_color:{color:"#FFFFFF",type:"color",description:"Alt. Background"},text_color:{color:"#161616",type:"color",description:"Text"},text_alt_color:{color:"#8E8E8E",type:"color",description:"Alt. Text"},button_color:{color:"#EFEFEF",type:"color",description:"Button"},button_hover_color:{color:"#DCDCDC",type:"color",description:"Button Hover"},font:{value:"Plus_Jakarta_Sans",type:"select",options:["Inter","Plus_Jakarta_Sans","Open_Sans","PT_Mono"],description:"Text Font"},theme:"light"},el={...ea,theme_name:"Dark",title:{...ea.title,text:"Verba"},subtitle:{...ea.subtitle,text:"The Dark RAGtriever"},intro_message:{...ea.intro_message,text:"Welcome to the dark mode version of Verba! Spooky, right?"},image:{...ea.image,src:"https://github.com/weaviate/Verba/blob/main/img/verba_icon.png?raw=true"},primary_color:{...ea.primary_color,color:"#BB86FC"},secondary_color:{...ea.secondary_color,color:"#008F82"},warning_color:{...ea.warning_color,color:"#FF8399"},bg_color:{...ea.bg_color,color:"#202020"},bg_alt_color:{...ea.bg_alt_color,color:"#2F2929"},text_color:{...ea.text_color,color:"#ffffff"},text_alt_color:{...ea.text_alt_color,color:"#999999"},button_color:{...ea.button_color,color:"#3C3C3C"},button_hover_color:{...ea.button_hover_color,color:"#2C2C2C"},font:{...ea.font,value:"Open_Sans"},theme:"dark"},eo={...ea,theme_name:"WCD",title:{...ea.title,text:"Verba"},subtitle:{...ea.subtitle,text:"Chatbot for Weaviate"},intro_message:{...ea.intro_message,text:"Welcome to Weaviate, your AI-Native vector database. How can I help you?"},image:{...ea.image,src:"https://github.com/weaviate/Verba/blob/1.0.0/frontend/public/weaviate.png?raw=true"},primary_color:{...ea.primary_color,color:"#BF40C5"},secondary_color:{...ea.secondary_color,color:"#28395B"},warning_color:{...ea.warning_color,color:"#EA3A31"},bg_color:{...ea.bg_color,color:"#0C1428"},bg_alt_color:{...ea.bg_alt_color,color:"#192136"},text_color:{...ea.text_color,color:"#ffffff"},text_alt_color:{...ea.text_alt_color,color:"#AAAAAA"},button_color:{...ea.button_color,color:"#1D253A"},button_hover_color:{...ea.button_hover_color,color:"#313749"},font:{...ea.font,value:"Open_Sans"},theme:"dark"},ei={...ea,theme_name:"Weaviate",title:{...ea.title,text:"Weaviate Verba"},subtitle:{...ea.subtitle,text:"Chatbot for Weaviate"},intro_message:{...ea.intro_message,text:"Welcome to Weaviate, your AI-Native vector database. How can I help you with Weaviate today?"},image:{...ea.image,src:"https://github.com/weaviate/Verba/blob/1.0.0/frontend/public/weaviate.png?raw=true"},primary_color:{...ea.primary_color,color:"#6BDF4A"},secondary_color:{...ea.secondary_color,color:"#7AD6EB"},warning_color:{...ea.warning_color,color:"#F4404E"},bg_color:{...ea.bg_color,color:"#EDEDED"},bg_alt_color:{...ea.bg_alt_color,color:"#ffffff"},text_color:{...ea.text_color,color:"#130C49"},text_alt_color:{...ea.text_alt_color,color:"#8196A6"},button_color:{...ea.button_color,color:"#E6E3E3"},button_hover_color:{...ea.button_hover_color,color:"#FFFFFF"},font:{...ea.font,value:"Inter"},theme:"light"};var ec=n(50670),ed=n.n(ec),ex=n(72810),eu=n.n(ex),eb=n(5117),em=n.n(eb),eg=n(58146),eh=n.n(eg);let ef={Inter:ed(),Plus_Jakarta_Sans:eu(),Open_Sans:em(),PT_Mono:eh()},ev=()=>{let e="https:"===window.location.protocol?"wss:":"ws:",t=window.location.host;return"".concat(e,"//").concat(t,"/ws/generate_stream")},ep=()=>{let e=document.activeElement;e&&e instanceof HTMLElement&&e.blur()},ej=()=>{let e="https:"===window.location.protocol?"wss:":"ws:",t=window.location.host;return"".concat(e,"//").concat(t,"/ws/import_files")};var ew=e=>{var t,n,a;let{fileData:l,fileMap:o,setFileMap:c,handleDeleteFile:d,selectedFileData:x,setSelectedFileData:u}=e,[b,m]=(0,s.useState)("New Link"),[g,h]=(0,s.useState)(!0);return(0,s.useEffect)(()=>{x&&o[x].isURL&&m(o[x].content?o[x].content:"")},[o,x]),(0,r.jsxs)("div",{className:"flex justify-between items-center gap-2 rounded-2xl p-1 w-full",children:["READY"!=o[l.fileID].status?(0,r.jsxs)("button",{className:"min-w-[11vw] flex gap-2 items-center justify-center text-text-verba ".concat(er[o[l.fileID].status]," hover:bg-button-hover-verba rounded-lg p-3"),children:["DONE"!=o[l.fileID].status&&"ERROR"!=o[l.fileID].status?(0,r.jsx)("span",{className:"loading loading-spinner loading-sm"}):"","DONE"===o[l.fileID].status&&(0,r.jsx)(i.FJM,{size:15}),"ERROR"===o[l.fileID].status&&(0,r.jsx)(z.vVM,{size:15}),(0,r.jsx)("p",{className:"text-sm",children:es[o[l.fileID].status]})]}):(0,r.jsxs)("div",{className:"dropdown dropdown-bottom flex justify-start items-center min-w-[11vw] tooltip tooltip-right","data-tip":o[l.fileID].rag_config.Reader.components[o[l.fileID].rag_config.Reader.selected].description,children:[(0,r.jsxs)("button",{tabIndex:0,role:"button",className:"btn bg-button-verba hover:bg-button-hover-verba text-text-verba w-full flex justify-start border-none",children:[(0,r.jsx)(J.WMq,{size:15}),(0,r.jsx)("p",{children:o[l.fileID].rag_config.Reader.selected})]}),(0,r.jsx)("ul",{tabIndex:0,className:"dropdown-content menu bg-base-100 rounded-box z-[1] w-52 p-2 shadow",children:(t=o[l.fileID].rag_config,n=e=>{let t=JSON.parse(JSON.stringify(o[l.fileID])),n=JSON.parse(JSON.stringify(o[l.fileID].rag_config));n.Reader.selected=e,t.rag_config=n;let r={...o};r[l.fileID]=t,c(r),x&&x===o[l.fileID].filename&&u(l.fileID)},a=o[l.fileID].isURL?"URL":"FILE",Object.entries(t.Reader.components).filter(e=>{let[t,n]=e;return n.type===a}).map(e=>{let[t,s]=e;return(0,r.jsx)("li",{onClick:()=>{n(s.name),ep()},children:(0,r.jsx)("a",{children:s.name})},"Dropdown_"+s.name)}))})]}),(0,r.jsx)("button",{onClick:()=>{u(l.fileID)},className:"flex ".concat(x&&x===o[l.fileID].fileID?"bg-secondary-verba hover:bg-button-hover-verba":"bg-button-verba hover:bg-secondary-verba"," w-full p-3 rounded-lg transition-colors duration-300 ease-in-out border-none overflow-hidden"),children:(0,r.jsx)("p",{className:"text-text-verba truncate",children:o[l.fileID].filename})}),(0,r.jsx)("div",{className:"flex justify-end items-center",children:(0,r.jsx)("button",{onClick:()=>{let e=document.getElementById("remove_file_"+o[l.fileID].filename);e instanceof HTMLDialogElement&&e.showModal()},className:"btn btn-square bg-button-verba border-none hover:bg-warning-verba text-text-verba",children:(0,r.jsx)(i.Xm5,{size:15})})}),(0,r.jsx)(A,{modal_id:"remove_file_"+o[l.fileID].filename,title:"Remove File",text:o[l.fileID].isURL?"Do you want to remove the URL?":"Do you want to remove "+o[l.fileID].filename+" from the selection?",triggerString:"Delete",triggerValue:o[l.fileID].fileID,triggerAccept:d})]})},ey=e=>{let{fileMap:t,setFileMap:n,RAGConfig:a,setRAGConfig:l,selectedFileData:c,setSelectedFileData:d,importSelected:x,socketStatus:u,reconnect:b,importAll:m}=e,g=s.useRef(null);(0,s.useEffect)(()=>{null!==g.current&&(g.current.setAttribute("directory",""),g.current.setAttribute("webkitdirectory",""))},[g]);let h=e=>{n(t=>{if(null===e)return d(null),{};{e===c&&d(null);let n={...t};return delete n[e],n}})},[f,v]=(0,s.useState)(null),[p,j]=(0,s.useState)(null),w=async(e,r)=>{if(e.target.files&&a){let s=e.target.files,l={...t},o=r?p:f;for(let e=0;e<s.length;e++){let t=s[e],n=JSON.parse(JSON.stringify(a));o&&(n.Reader.selected=o);let r=t.name,i=t.name;if(i in l){let e=Date.now();i="".concat(i,"_").concat(e)}let c=t.name.split(".").pop()||"",d=await function(e){return new Promise((t,n)=>{let r=new FileReader;r.onload=()=>{t(function(e){let t="",n=new Uint8Array(e),r=n.byteLength;for(let e=0;e<r;e++)t+=String.fromCharCode(n[e]);return btoa(t)}(r.result))},r.onerror=()=>n(r.error),r.readAsArrayBuffer(e)})}(t);l[i]={fileID:i,filename:r,extension:c,status_report:{},source:"",isURL:!1,overwrite:!1,content:d,labels:["Document"],rag_config:n,file_size:N(d),status:"READY"}}n(l),d(Object.keys(l)[0]),e.target.value=""}},y=e=>{if(a){let r={...t},s=JSON.parse(JSON.stringify(a));s.Reader.selected=e;let l=new Date().toISOString();r[l]={fileID:l,filename:"New "+e+" URL",status_report:{},extension:"URL",isURL:!0,source:"",overwrite:!1,content:"",labels:["Document"],rag_config:s,file_size:0,status:"READY"},n(r),d(l)}},N=e=>{let t=e.replace(/\s+/g,"");if(t.length%2!=0)throw Error("Invalid hex string length.");return t.length/2};return(0,r.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[(0,r.jsxs)("div",{className:"bg-bg-alt-verba rounded-2xl flex gap-2 p-6 items-center justify-between h-min w-full",children:[(0,r.jsx)("div",{className:"flex gap-2 justify-start ",children:(0,r.jsx)(T,{tooltip_text:"Upload your data through this interface into Verba. You can select individual files, directories or add URL to fetch data from.",display_text:"File Selection"})}),(0,r.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,r.jsxs)("div",{className:"dropdown dropdown-bottom",children:[(0,r.jsxs)("button",{tabIndex:0,className:"flex btn border-none text-text-verba bg-button-verba hover:bg-button-hover-verba gap-2",children:[(0,r.jsx)(o.Lgw,{size:15}),(0,r.jsx)("p",{children:"Add Files"}),(0,r.jsx)(o.yQg,{size:15})]}),(0,r.jsx)("ul",{tabIndex:0,className:"dropdown-content menu bg-base-100 rounded-box z-[1] w-52 p-2 shadow",children:a&&Object.entries(a.Reader.components).filter(e=>{let[t,n]=e;return"URL"!==n.type}).map(e=>{let[t,n]=e;return(0,r.jsx)("li",{onClick:()=>{var e;v(n.name),null===(e=document.getElementById("files_upload"))||void 0===e||e.click(),ep()},children:(0,r.jsx)("a",{children:n.name})},"File_"+n.name+t)})})]}),(0,r.jsx)("input",{id:"files_upload",type:"file",onChange:e=>w(e,!1),className:"hidden",multiple:!0}),(0,r.jsxs)("div",{className:"dropdown dropdown-bottom",children:[(0,r.jsxs)("button",{tabIndex:0,className:"flex btn border-none text-text-verba bg-button-verba hover:bg-button-hover-verba gap-2",children:[(0,r.jsx)(J.Lec,{size:15}),(0,r.jsx)("p",{children:"Add Directory"}),(0,r.jsx)(o.yQg,{size:15})]}),(0,r.jsx)("ul",{tabIndex:0,className:"dropdown-content menu bg-base-100 rounded-box z-[1] w-52 p-2 shadow",children:a&&Object.entries(a.Reader.components).filter(e=>{let[t,n]=e;return"URL"!==n.type}).map(e=>{let[t,n]=e;return(0,r.jsx)("li",{onClick:()=>{var e;j(n.name),null===(e=document.getElementById("dir_upload"))||void 0===e||e.click(),ep()},children:(0,r.jsx)("a",{children:n.name})},"Dir_"+n.name+t)})})]}),(0,r.jsx)("input",{id:"dir_upload",type:"file",ref:g,onChange:e=>w(e,!0),className:"hidden",multiple:!0}),(0,r.jsxs)("div",{className:"dropdown dropdown-bottom",children:[(0,r.jsxs)("button",{tabIndex:0,className:"flex btn border-none text-text-verba bg-button-verba hover:bg-button-hover-verba gap-2",children:[(0,r.jsx)(o.Lgw,{size:15}),(0,r.jsx)("p",{children:"Add URL"}),(0,r.jsx)(o.yQg,{size:15})]}),(0,r.jsx)("ul",{tabIndex:0,className:"dropdown-content menu bg-base-100 rounded-box z-[1] w-52 p-2 shadow",children:a&&Object.entries(a.Reader.components).filter(e=>{let[t,n]=e;return"URL"===n.type}).map(e=>{let[t,n]=e;return(0,r.jsx)("li",{onClick:()=>{y(n.name),ep()},children:(0,r.jsx)("a",{children:n.name})},"URL_"+n.name+t)})})]})]})]}),(0,r.jsx)("div",{className:"bg-bg-alt-verba rounded-2xl flex flex-col p-6 items-center h-full w-full overflow-auto",children:Object.entries(t).map(e=>{let[s,a]=e;return(0,r.jsx)(ew,{fileData:a,handleDeleteFile:h,selectedFileData:c,setSelectedFileData:d,fileMap:t,setFileMap:n},"FileComponent_"+s)})}),"ONLINE"===u?(0,r.jsx)("div",{className:"bg-bg-alt-verba rounded-2xl flex gap-2 p-6 items-center justify-end h-min w-full",children:(0,r.jsxs)("div",{className:"flex gap-3 justify-end",children:[c&&(0,r.jsxs)("button",{onClick:x,className:"flex btn border-none text-text-verba bg-secondary-verba hover:bg-button-hover-verba gap-2",children:[(0,r.jsx)(i.Xur,{size:15}),(0,r.jsx)("p",{children:"Import Selected"})]}),(0,r.jsxs)("button",{onClick:m,className:"flex btn border-none text-text-verba bg-button-verba hover:bg-button-hover-verba gap-2",children:[(0,r.jsx)(i.Xur,{size:15}),(0,r.jsx)("p",{children:"Import All"})]}),(0,r.jsxs)("button",{onClick:()=>{let e=document.getElementById("remove_all_files");e instanceof HTMLDialogElement&&e.showModal()},className:"flex btn border-none text-text-verba bg-button-verba hover:bg-warning-verba gap-2",children:[(0,r.jsx)(z.B4e,{size:15}),(0,r.jsx)("p",{children:"Clear Files"})]})]})}):(0,r.jsx)("div",{className:"bg-bg-alt-verba rounded-2xl flex gap-2 p-6 items-center justify-end h-min w-full",children:(0,r.jsx)("div",{className:"flex gap-3 justify-end",children:(0,r.jsxs)("button",{onClick:b,className:"flex btn border-none text-text-verba bg-button-verba hover:bg-button-hover-verba gap-2",children:[(0,r.jsx)($.Nwf,{size:15}),(0,r.jsx)("p",{children:"Reconnect to Verba"})]})})}),(0,r.jsx)(A,{modal_id:"remove_all_files",title:"Clear all files?",text:"Do you want to clear all files from your selection?",triggerString:"Clear All",triggerValue:null,triggerAccept:h})]})},eN=n(67447),eS=n(88033),e_=e=>{var t;let{selectedFileData:n,fileMap:a,setFileMap:o,blocked:c}=e,[d,x]=(0,s.useState)(""),[u,b]=(0,s.useState)(""),[m,g]=(0,s.useState)("");(0,s.useEffect)(()=>{n&&(x(a[n].filename),b(a[n].source))},[a,n]);let h=(0,s.useCallback)((e,t)=>{if(n){let r=JSON.parse(JSON.stringify(a[n]));r[e]=t;let s={...a};s[n]=r,o(s)}},[n,a,o]),f=(0,s.useCallback)(e=>{let t=e.target.value;x(t),h("filename",t)},[h]),v=(0,s.useCallback)(e=>{let t=e.target.value;b(t),h("source",t)},[h]),p=e=>{if(n){let t=JSON.parse(JSON.stringify(a[n]));t.overwrite=e;let r={...a};r[n]=t,o(r)}},j=e=>{if(n&&!a[n].labels.includes(e)&&e.length>0){let t=JSON.parse(JSON.stringify(a[n]));t.labels.push(e);let r={...a};r[n]=t,o(r),g("")}},w=e=>{if(n&&a[n].labels.includes(e)&&e.length>0){let t=JSON.parse(JSON.stringify(a[n]));t.labels=t.labels.filter(t=>t!==e);let r={...a};r[n]=t,o(r),g("")}};return n?(0,r.jsxs)("div",{className:"flex flex-col justify-start gap-3 rounded-2xl p-1 w-full ",children:[n&&"READY"!=a[n].status&&(0,r.jsx)("div",{className:"divider  text-text-alt-verba",children:"Import Status"}),(0,r.jsx)("div",{className:"flex flex-col gap-3 text-text-verba",children:n&&Object.entries(a[n].status_report).map(e=>{let[t,n]=e;return(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsxs)("p",{className:"flex min-w-[8vw] gap-2 items-center text-text-verba",children:["DONE"===n.status&&(0,r.jsx)(i.FJM,{size:15}),"ERROR"===n.status&&(0,r.jsx)(z.vVM,{size:15}),es[n.status]]}),(0,r.jsx)("label",{className:"input flex items-center gap-2 w-full ".concat(er[n.status]," bg-bg-verba"),children:(0,r.jsx)("input",{type:"text",className:"grow w-full",value:0!=n.took?n.message+" ("+n.took+"s)":n.message,disabled:!0})})]},"Status"+t)})}),(0,r.jsx)("div",{className:"divider text-text-alt-verba",children:"File Settings"}),(0,r.jsxs)("div",{className:"flex gap-2 justify-between items-center text-text-verba",children:[(0,r.jsx)("p",{className:"flex min-w-[8vw]",children:"Title"}),(0,r.jsx)("label",{className:"input flex items-center gap-2 w-full bg-bg-verba",children:(0,r.jsx)("input",{type:"text",className:"grow w-full",value:d,onChange:f,disabled:c})})]}),(0,r.jsxs)("div",{className:"flex gap-2 justify-between items-center text-text-verba",children:[(0,r.jsx)("p",{className:"flex min-w-[8vw]",children:"Source Link"}),(0,r.jsx)("label",{className:"input flex items-center gap-2 w-full bg-bg-verba",children:(0,r.jsx)("input",{type:"text",className:"grow w-full",value:u,onChange:v,disabled:c})})]}),(0,r.jsxs)("div",{className:"flex gap-2 justify-between items-center text-text-verba",children:[(0,r.jsx)("p",{className:"flex min-w-[8vw]",children:"Labels"}),(0,r.jsx)("label",{className:"input flex items-center gap-2 w-full bg-bg-verba",children:(0,r.jsx)("input",{type:"text",className:"grow w-full",value:m,onChange:e=>{g(e.target.value)},disabled:c,title:m})}),(0,r.jsx)("button",{onClick:()=>{j(m)},disabled:c,className:"btn btn-square bg-button-verba border-none hover:bg-secondary-verba text-text-verba",children:(0,r.jsx)(l.Kth,{size:15})})]}),(0,r.jsxs)("div",{className:"flex gap-2 items-center text-text-verba",children:[(0,r.jsx)("p",{className:"flex min-w-[8vw]"}),(0,r.jsx)("p",{className:"text-sm text-text-alt-verba text-start",children:"Add or remove labels for Document Filtering"})]}),(0,r.jsxs)("div",{className:"flex gap-2 items-center text-text-verba",children:[(0,r.jsx)("p",{className:"flex min-w-[8vw]"}),(0,r.jsx)("div",{className:"grid grid-cols-3 gap-2",children:Object.entries((t=a[n]).labels).map(e=>{let[n,s]=e;return(0,r.jsxs)("div",{className:"flex bg-bg-verba min-w-[10vw] p-2 text-sm text-text-verba justify-between items-center rounded-xl",children:[(0,r.jsx)("p",{className:"truncate max-w-[80%]",title:s,children:s}),(0,r.jsx)("button",{onClick:()=>{w(s)},disabled:c,className:"btn btn-sm btn-square bg-button-verba border-none hover:bg-warning-verba text-text-verba ml-2",children:(0,r.jsx)(i.Xm5,{size:12})})]},t.fileID+n+s)})})]}),(0,r.jsxs)("div",{className:"flex gap-2 items-center text-text-verba",children:[(0,r.jsx)("p",{className:"flex min-w-[8vw]",children:"Overwrite"}),(0,r.jsx)("input",{type:"checkbox",className:"checkbox checkbox-md",onChange:e=>p(e.target.checked),checked:!!n&&a[n].overwrite,disabled:c})]}),(0,r.jsx)("div",{className:"divider  text-text-alt-verba",children:"File Info"}),(0,r.jsxs)("div",{className:"flex gap-2 justify-between items-center text-text-verba",children:[(0,r.jsx)("p",{className:"flex min-w-[8vw]",children:"Extension"}),(0,r.jsx)("label",{className:"input flex items-center gap-2 w-full bg-bg-verba",children:(0,r.jsx)("input",{type:"text",className:"grow w-full",value:a[n].extension,disabled:!0})})]}),(0,r.jsxs)("div",{className:"flex gap-2 justify-between items-center text-text-verba",children:[(0,r.jsx)("p",{className:"flex min-w-[8vw]",children:"File Size"}),(0,r.jsx)("label",{className:"input flex items-center gap-2 w-full bg-bg-verba",children:(0,r.jsx)("input",{type:"text",className:"grow w-full",value:(e=>{if(0===e)return"0 B";let t=Math.floor(Math.log(e)/Math.log(1024));return"".concat((e/Math.pow(1024,t)).toFixed(2)," ").concat(["B","KB","MB","GB","TB"][t])})(a[n].file_size),disabled:!0})})]}),(0,r.jsx)("div",{className:"divider  text-text-alt-verba",children:"Ingestion Pipeline"}),(0,r.jsxs)("div",{className:"flex gap-2 justify-between items-center text-text-verba",children:[(0,r.jsx)("p",{className:"flex min-w-[8vw]",children:"Reader"}),(0,r.jsx)("label",{className:"input flex items-center gap-2 w-full bg-bg-verba",children:(0,r.jsx)("input",{type:"text",className:"grow w-full",value:a[n].rag_config.Reader.selected,disabled:!0})})]}),(0,r.jsxs)("div",{className:"flex gap-2 items-center text-text-verba",children:[(0,r.jsx)("p",{className:"flex min-w-[8vw]"}),(0,r.jsx)("p",{className:"text-sm text-text-alt-verba text-start",children:n&&a[n].rag_config.Reader.components[a[n].rag_config.Reader.selected].description})]}),(0,r.jsxs)("div",{className:"flex gap-2 justify-between items-center text-text-verba",children:[(0,r.jsx)("p",{className:"flex min-w-[8vw]",children:"Chunker"}),(0,r.jsx)("label",{className:"input flex items-center gap-2 w-full bg-bg-verba",children:(0,r.jsx)("input",{type:"text",className:"grow w-full",value:a[n].rag_config.Chunker.selected,disabled:!0})})]}),(0,r.jsxs)("div",{className:"flex gap-2 items-center text-text-verba",children:[(0,r.jsx)("p",{className:"flex min-w-[8vw]"}),(0,r.jsx)("p",{className:"text-sm text-text-alt-verba text-start",children:n&&a[n].rag_config.Chunker.components[a[n].rag_config.Chunker.selected].description})]}),(0,r.jsxs)("div",{className:"flex gap-2 justify-between items-center text-text-verba",children:[(0,r.jsx)("p",{className:"flex min-w-[8vw]",children:"Embedder"}),(0,r.jsx)("label",{className:"input flex items-center gap-2 w-full bg-bg-verba",children:(0,r.jsx)("input",{type:"text",className:"grow w-full",value:a[n].rag_config.Embedder.selected,disabled:!0})})]}),(0,r.jsxs)("div",{className:"flex gap-2 items-center text-text-verba",children:[(0,r.jsx)("p",{className:"flex min-w-[8vw]"}),(0,r.jsx)("p",{className:"text-sm text-text-alt-verba text-start",children:n&&a[n].rag_config.Embedder.components[a[n].rag_config.Embedder.selected].description})]}),(0,r.jsx)("div",{className:"divider"}),(0,r.jsxs)("div",{className:"flex gap-2 justify-between items-center text-text-verba",children:[(0,r.jsx)("p",{className:"flex min-w-[8vw]",children:"Debug"}),(0,r.jsx)("button",{onClick:()=>{let e=document.getElementById("File_Debug_Modal");e instanceof HTMLDialogElement&&e.showModal()},className:"btn btn-square bg-button-verba border-none hover:bg-secondary-verba text-text-verba",children:(0,r.jsx)(eS.ZWp,{size:15})})]}),(0,r.jsx)("dialog",{id:"File_Debug_Modal",className:"modal",children:(0,r.jsxs)("div",{className:"modal-box min-w-fit",children:[(0,r.jsx)("h3",{className:"font-bold text-lg",children:"Debugging File Configuration"}),(0,r.jsx)("pre",{className:"whitespace-pre-wrap",children:n?(()=>{let e={...a[n]};return e.content="File Content",JSON.stringify(e,null,2)})():""}),(0,r.jsx)("div",{className:"modal-action",children:(0,r.jsx)("form",{method:"dialog",children:(0,r.jsx)("button",{className:"btn text-text-verba bg-warning-verba border-none hover:bg-button-hover-verba ml-2",children:"Close"})})})]})})]}):(0,r.jsx)("div",{})};let eC=e=>{let{values:t,config_title:n,updateConfig:a,component_name:o,blocked:c}=e,[d,x]=(0,s.useState)(""),[u,b]=(0,s.useState)(t);(0,s.useEffect)(()=>{a(o,n,u)},[u]);let m=e=>{u.includes(e)||(b(t=>[...t,e]),x(""))},g=e=>{u.includes(e)&&b(t=>t.filter(t=>t!==e))};return(0,r.jsxs)("div",{className:"flex flex-col w-full gap-2",children:[(0,r.jsxs)("div",{className:"flex gap-2 justify-between",children:[(0,r.jsx)("label",{className:"input flex items-center gap-2 w-full bg-bg-verba",children:(0,r.jsx)("input",{type:"text",className:"grow w-full",disabled:c,value:d,onChange:e=>{x(e.target.value)}})}),(0,r.jsx)("button",{onClick:()=>{m(d)},disabled:c,className:"btn btn-square bg-button-verba border-none hover:bg-secondary-verba text-text-verba",children:(0,r.jsx)(l.Kth,{size:15})})]}),(0,r.jsx)("div",{className:"grid grid-cols-3 gap-2",children:t.map((e,t)=>(0,r.jsxs)("div",{className:"flex bg-bg-verba w-full p-2 text-center text-sm text-text-verba justify-between items-center rounded-xl",children:[(0,r.jsx)("div",{className:"flex w-full justify-center items-center overflow-hidden",children:(0,r.jsx)("p",{className:"truncate",title:e,children:e})}),(0,r.jsx)("button",{disabled:c,onClick:()=>{g(e)},className:"btn btn-sm btn-square bg-button-verba border-none hover:bg-warning-verba text-text-verba ml-2",children:(0,r.jsx)(i.Xm5,{size:12})})]},e+t))})]})};var ek=e=>{let{RAGConfig:t,component_name:n,selectComponent:s,updateConfig:a,blocked:l}=e;return(0,r.jsxs)("div",{className:"flex flex-col justify-start gap-3 rounded-2xl p-1 w-full ",children:[(0,r.jsx)("div",{className:"divider text-text-alt-verba",children:n}),(0,r.jsxs)("div",{className:"flex gap-2 justify-between items-center text-text-verba",children:[(0,r.jsx)("p",{className:"flex min-w-[8vw]",children:n}),(0,r.jsxs)("div",{className:"dropdown dropdown-bottom flex justify-start items-center w-full",children:[(0,r.jsxs)("button",{tabIndex:0,role:"button",disabled:l,className:"btn bg-button-verba hover:bg-button-hover-verba text-text-verba w-full flex justify-start border-none",children:[(0,r.jsx)(J.WMq,{size:15}),(0,r.jsx)("p",{children:t[n].selected})]}),(0,r.jsx)("ul",{tabIndex:0,className:"dropdown-content menu bg-base-100 rounded-box z-[1] w-full p-2 shadow",children:Object.entries(t[n].components).map(e=>{let[t,a]=e;return(0,r.jsx)("li",{onClick:()=>{l||(s(n,a.name),ep())},children:(0,r.jsx)("a",{children:a.name})},"ComponentDropdown_"+a.name)})})]})]}),(0,r.jsxs)("div",{className:"flex gap-2 items-center text-text-verba",children:[(0,r.jsx)("p",{className:"flex min-w-[8vw]"}),(0,r.jsx)("p",{className:"text-sm text-text-alt-verba text-start",children:t[n].components[t[n].selected].description})]}),Object.entries(t[n].components[t[n].selected].config).map(e=>{let[s,o]=e;return(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex gap-3 justify-between items-center text-text-verba",children:[(0,r.jsx)("p",{className:"flex min-w-[8vw]",children:s}),"dropdown"===o.type&&(0,r.jsxs)("div",{className:"dropdown dropdown-bottom flex justify-start items-center w-full",children:[(0,r.jsxs)("button",{tabIndex:0,role:"button",disabled:l,className:"btn bg-button-verba hover:bg-button-hover-verba text-text-verba w-full flex justify-start border-none",children:[(0,r.jsx)(J.WMq,{size:15}),(0,r.jsx)("p",{children:o.value})]}),(0,r.jsx)("ul",{tabIndex:0,className:"dropdown-content menu bg-base-100 max-h-[20vh] overflow-auto rounded-box z-[1] w-full p-2 shadow",children:t[n].components[t[n].selected].config[s].values.map(e=>(0,r.jsx)("li",{onClick:()=>{l||(a(n,s,e),ep())},children:(0,r.jsx)("a",{children:e})},"ConfigValue"+e))})]}),"boolean"!=typeof o.value&&["text","number","password"].includes(o.type)&&(0,r.jsx)("label",{className:"input flex items-center gap-2 w-full bg-bg-verba",children:(0,r.jsx)("input",{type:o.type,className:"grow w-full",value:o.value,onChange:e=>{l||a(n,s,e.target.value)}})}),"boolean"!=typeof o.value&&"multi"==o.type&&(0,r.jsx)(eC,{component_name:n,values:o.values,config_title:s,updateConfig:a,blocked:l}),"bool"==o.type&&(0,r.jsx)("div",{className:"flex justify-center items-center w-full",children:(0,r.jsx)("input",{type:"checkbox",className:"checkbox checkbox-md",onChange:e=>{l||a(n,s,e.target.checked)},checked:"boolean"==typeof o.value&&o.value})})]}),(0,r.jsxs)("div",{className:"flex gap-2 items-center text-text-verba",children:[(0,r.jsx)("p",{className:"flex min-w-[8vw]"}),(0,r.jsx)("p",{className:"text-sm text-text-alt-verba text-start",children:o.description})]})]},"Configuration"+s+n)})]})},eE=e=>{var t;let{selectedFileData:n,fileMap:a,setFileMap:o,RAGConfig:c,setRAGConfig:d,setSelectedFileData:x,credentials:u}=e,[b,m]=(0,s.useState)("Basic"),g=async()=>{n&&(await j(a[n].rag_config,u)?d(a[n].rag_config):console.error("Failed to set RAG config:"))},h=(0,s.useCallback)((e,t,r)=>{o(s=>{if(n){let a={...s},l=a[n],o=l.rag_config[e].components[l.rag_config[e].selected].config;return"string"==typeof r||"boolean"==typeof r?o[t].value=r:o[t].values=r,a}return s})},[n]),f=(e,t)=>{o(r=>{if(n){let s=JSON.parse(JSON.stringify(r[n])),a=JSON.parse(JSON.stringify(r[n].rag_config));a[e].selected=t,s.rag_config=a;let l={...r};return l[n]=s,l}return r})};return(0,r.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[(0,r.jsxs)("div",{className:"bg-bg-alt-verba rounded-2xl flex gap-2 p-6 items-center justify-between h-min w-full",children:[(0,r.jsx)("div",{className:"flex gap-2 justify-start ",children:(0,r.jsx)(T,{tooltip_text:"Configure all import settings related to chunking, embedding, adding meta data and more. You can save made changes individually or apply them to all other files",display_text:"Import Config"})}),(0,r.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,r.jsxs)("button",{onClick:()=>{m("Basic")},className:"flex ".concat("Basic"===b?"bg-primary-verba hover:bg-button-hover-verba":"bg-button-verba hover:bg-button-hover-verba"," border-none btn text-text-verba gap-2"),children:[(0,r.jsx)(l.zfW,{size:15}),(0,r.jsx)("p",{children:"Overview"})]}),(0,r.jsxs)("button",{onClick:()=>{m("Pipeline")},className:"flex ".concat("Pipeline"===b?"bg-primary-verba hover:bg-button-hover-verba":"bg-button-verba hover:bg-button-hover-verba"," border-none btn text-text-verba gap-2"),children:[(0,r.jsx)(i.KOq,{size:15}),(0,r.jsx)("p",{children:"Config"})]}),(0,r.jsx)("button",{onClick:()=>{x(null)},className:"flex btn btn-square border-none text-text-verba bg-button-verba hover:bg-warning-verba gap-2",children:(0,r.jsx)(z.B4e,{size:15})})]})]}),(0,r.jsxs)("div",{className:"bg-bg-alt-verba rounded-2xl flex flex-col p-6 items-center h-full w-full overflow-auto",children:["Basic"===b&&(0,r.jsx)(e_,{selectedFileData:n,fileMap:a,setFileMap:o,blocked:n?null!==(t=a[n].block)&&void 0!==t&&t:void 0}),"Pipeline"===b&&n&&(0,r.jsxs)("div",{className:"flex flex-col gap-10 w-full",children:[(0,r.jsx)(ek,{RAGConfig:a[n].rag_config,component_name:"Reader",selectComponent:f,updateConfig:h,blocked:a[n].block}),(0,r.jsx)(ek,{RAGConfig:a[n].rag_config,component_name:"Chunker",selectComponent:f,updateConfig:h,blocked:a[n].block}),(0,r.jsx)(ek,{RAGConfig:a[n].rag_config,component_name:"Embedder",selectComponent:f,updateConfig:h,blocked:a[n].block})]})]}),(0,r.jsx)("div",{className:"bg-bg-alt-verba rounded-2xl flex gap-2 p-6 items-center justify-end h-min w-full",children:(0,r.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,r.jsxs)("button",{onClick:()=>{let e=document.getElementById("apply_setting_to_all");e instanceof HTMLDialogElement&&e.showModal()},className:"flex btn border-none text-text-verba bg-secondary-verba hover:bg-button-hover-verba gap-2",children:[(0,r.jsx)(eN.HL_,{size:15}),(0,r.jsx)("p",{children:"Apply to All"})]}),(0,r.jsxs)("button",{onClick:()=>{let e=document.getElementById("set_default_settings");e instanceof HTMLDialogElement&&e.showModal()},className:"flex btn border-none text-text-verba bg-button-verba hover:bg-button-hover-verba gap-2",children:[(0,r.jsx)(l.zfW,{size:15}),(0,r.jsx)("p",{children:"Set as Default"})]}),(0,r.jsxs)("button",{onClick:()=>{let e=document.getElementById("reset_Setting");e instanceof HTMLDialogElement&&e.showModal()},className:"flex btn border-none text-text-verba bg-button-verba hover:bg-warning-verba gap-2",children:[(0,r.jsx)(z.B4e,{size:15}),(0,r.jsx)("p",{children:"Reset"})]})]})}),(0,r.jsx)(A,{modal_id:"apply_setting_to_all",title:"Apply Pipeline Settings",text:"Apply Pipeline Settings to all files?",triggerString:"Apply",triggerValue:null,triggerAccept:()=>{o(e=>{if(n){let t=JSON.parse(JSON.stringify(e[n].rag_config)),r={...e};for(let s in e){let a=JSON.parse(JSON.stringify(e[s]));a.rag_config=t,a.source=e[n].source,a.labels=e[n].labels,a.overwrite=e[n].overwrite,r[s]=a}return r}return e})}}),(0,r.jsx)(A,{modal_id:"reset_Setting",title:"Reset Setting",text:"Reset pipeline settings of this file?",triggerString:"Reset",triggerValue:null,triggerAccept:()=>{o(e=>{if(n&&c){let t={...e},r=JSON.parse(JSON.stringify(e[n]));return r.rag_config=c,t[n]=r,t}return e})}}),(0,r.jsx)(A,{modal_id:"set_default_settings",title:"Set Default",text:"Set current pipeline settings as default for future files?",triggerString:"Set",triggerValue:null,triggerAccept:g})]})},eD=e=>{let{credentials:t,RAGConfig:n,setRAGConfig:a}=e,[l,o]=(0,s.useState)({}),[i,c]=(0,s.useState)(null),[d,x]=(0,s.useState)(!1),[u,b]=(0,s.useState)(null),[m,g]=(0,s.useState)("OFFLINE");(0,s.useEffect)(()=>{x(!0)},[]),(0,s.useEffect)(()=>{let e=ej(),t=new WebSocket(e);return t.onopen=()=>{console.log("Import WebSocket connection opened to "+e),g("ONLINE")},t.onmessage=e=>{g("ONLINE");try{let t=JSON.parse(e.data);"new_file_id"in t?o(e=>{let n={...e};return n[t.new_file_id]={...n[t.original_file_id],fileID:t.new_file_id,filename:t.filename,block:!0},n}):f(t)}catch(t){console.error("Received data is not valid JSON:",e.data);return}},t.onerror=e=>{console.error("Import WebSocket Error:",e),g("OFFLINE"),h()},t.onclose=e=>{g("OFFLINE"),h(),e.wasClean?console.log("Import WebSocket connection closed cleanly, code=".concat(e.code,", reason=").concat(e.reason)):console.error("WebSocket connection died")},b(t),()=>{t.readyState!==WebSocket.CLOSED&&t.close()}},[d]);let h=()=>{o(e=>{if(l){let t={...e};for(let e in t)"DONE"!=t[e].status&&"ERROR"!=t[e].status&&"READY"!=t[e].status&&(t[e].status="ERROR",t[e].status_report.ERROR={fileID:e,status:"ERROR",message:"Connection was interrupted",took:0});return t}return e})},f=e=>{o(t=>{if(e&&e.fileID in t){let n=JSON.parse(JSON.stringify(t[e.fileID])),r={...t};return n.status=e.status,n.status_report[e.status]=e,r[e.fileID]=n,r}return t})},v=e=>{o(t=>{if(e in t){let n=JSON.parse(JSON.stringify(t[e])),r={...t};return n.status="WAITING",Object.entries(n.status_report).length>0&&(n.status_report={}),r[e]=n,r}return t})},p=(e,n)=>{if((null==u?void 0:u.readyState)===WebSocket.OPEN){v(n);let r=[],s=0;for(;s<e.length;){let t=e.slice(s,s+2e3);r.push(t),s+=2e3}let a=r.length;r.forEach((e,r)=>{u.send(JSON.stringify({chunk:e,isLastChunk:r===a-1,total:a,order:r,fileID:n,credentials:t}))})}else console.error("WebSocket is not open. ReadyState:",null==u?void 0:u.readyState),x(e=>!e)};return(0,r.jsxs)("div",{className:"flex justify-center gap-3 h-[80vh] ",children:[(0,r.jsx)("div",{className:"".concat(i?"hidden lg:flex lg:w-[45vw]":"w-full lg:w-[45vw] lg:flex"),children:(0,r.jsx)(ey,{fileMap:l,setFileMap:o,RAGConfig:n,setRAGConfig:a,selectedFileData:i,setSelectedFileData:c,importSelected:()=>{i&&["READY","DONE","ERROR"].includes(l[i].status)&&!l[i].block&&p(JSON.stringify(l[i]),i)},importAll:()=>{for(let e in l)["READY","DONE","ERROR"].includes(l[e].status)&&!l[e].block&&p(JSON.stringify(l[e]),e)},socketStatus:m,reconnect:()=>{x(e=>!e)}})}),(0,r.jsx)("div",{className:"".concat(i?"lg:w-[55vw] w-full flex":"hidden lg:flex lg:w-[55vw]"),children:i&&(0,r.jsx)(eE,{selectedFileData:i,RAGConfig:n,credentials:t,setRAGConfig:a,fileMap:l,setFileMap:o,setSelectedFileData:c})})]})},eR=n(34673),eO=n(21789),eI=n(19159),ez=(n(91997),n(1293)),eT=n(67161),eA="attribute vec4 tangent;\nuniform float uTime;\nuniform float uPositionFrequency;\nuniform float uTimeFrequency;\nuniform float uStrength;\nuniform float uWarpPositionFrequency;\nuniform float uWarpTimeFrequency;\nuniform float uWarpStrength;\n\nvarying float vWobble;\n\n//	Simplex 4D Noise \n//	by Ian McEwan, Ashima Arts\n//\nvec4 permute(vec4 x){return mod(((x*34.0)+1.0)*x, 289.0);}\nfloat permute(float x){return floor(mod(((x*34.0)+1.0)*x, 289.0));}\nvec4 taylorInvSqrt(vec4 r){return 1.79284291400159 - 0.85373472095314 * r;}\nfloat taylorInvSqrt(float r){return 1.79284291400159 - 0.85373472095314 * r;}\n\nvec4 grad4(float j, vec4 ip)\n{\n  const vec4 ones = vec4(1.0, 1.0, 1.0, -1.0);\n  vec4 p,s;\n\n  p.xyz = floor( fract (vec3(j) * ip.xyz) * 7.0) * ip.z - 1.0;\n  p.w = 1.5 - dot(abs(p.xyz), ones.xyz);\n  s = vec4(lessThan(p, vec4(0.0)));\n  p.xyz = p.xyz + (s.xyz*2.0 - 1.0) * s.www; \n\n  return p;\n}\n\n\nfloat simplexNoise4d(vec4 v)\n{\n  const vec2  C = vec2( 0.138196601125010504,  // (5 - sqrt(5))/20  G4\n                        0.309016994374947451); // (sqrt(5) - 1)/4   F4\n  // First corner\n  vec4 i  = floor(v + dot(v, C.yyyy) );\n  vec4 x0 = v -   i + dot(i, C.xxxx);\n\n  // Other corners\n\n  // Rank sorting originally contributed by Bill Licea-Kane, AMD (formerly ATI)\n  vec4 i0;\n\n  vec3 isX = step( x0.yzw, x0.xxx );\n  vec3 isYZ = step( x0.zww, x0.yyz );\n  //  i0.x = dot( isX, vec3( 1.0 ) );\n  i0.x = isX.x + isX.y + isX.z;\n  i0.yzw = 1.0 - isX;\n\n  //  i0.y += dot( isYZ.xy, vec2( 1.0 ) );\n  i0.y += isYZ.x + isYZ.y;\n  i0.zw += 1.0 - isYZ.xy;\n\n  i0.z += isYZ.z;\n  i0.w += 1.0 - isYZ.z;\n\n  // i0 now contains the unique values 0,1,2,3 in each channel\n  vec4 i3 = clamp( i0, 0.0, 1.0 );\n  vec4 i2 = clamp( i0-1.0, 0.0, 1.0 );\n  vec4 i1 = clamp( i0-2.0, 0.0, 1.0 );\n\n  //  x0 = x0 - 0.0 + 0.0 * C \n  vec4 x1 = x0 - i1 + 1.0 * C.xxxx;\n  vec4 x2 = x0 - i2 + 2.0 * C.xxxx;\n  vec4 x3 = x0 - i3 + 3.0 * C.xxxx;\n  vec4 x4 = x0 - 1.0 + 4.0 * C.xxxx;\n\n  // Permutations\n  i = mod(i, 289.0); \n  float j0 = permute( permute( permute( permute(i.w) + i.z) + i.y) + i.x);\n  vec4 j1 = permute( permute( permute( permute (\n             i.w + vec4(i1.w, i2.w, i3.w, 1.0 ))\n           + i.z + vec4(i1.z, i2.z, i3.z, 1.0 ))\n           + i.y + vec4(i1.y, i2.y, i3.y, 1.0 ))\n           + i.x + vec4(i1.x, i2.x, i3.x, 1.0 ));\n  // Gradients\n  // ( 7*7*6 points uniformly over a cube, mapped onto a 4-octahedron.)\n  // 7*7*6 = 294, which is close to the ring size 17*17 = 289.\n\n  vec4 ip = vec4(1.0/294.0, 1.0/49.0, 1.0/7.0, 0.0) ;\n\n  vec4 p0 = grad4(j0,   ip);\n  vec4 p1 = grad4(j1.x, ip);\n  vec4 p2 = grad4(j1.y, ip);\n  vec4 p3 = grad4(j1.z, ip);\n  vec4 p4 = grad4(j1.w, ip);\n\n  // Normalise gradients\n  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n  p0 *= norm.x;\n  p1 *= norm.y;\n  p2 *= norm.z;\n  p3 *= norm.w;\n  p4 *= taylorInvSqrt(dot(p4,p4));\n\n  // Mix contributions from the five corners\n  vec3 m0 = max(0.6 - vec3(dot(x0,x0), dot(x1,x1), dot(x2,x2)), 0.0);\n  vec2 m1 = max(0.6 - vec2(dot(x3,x3), dot(x4,x4)            ), 0.0);\n  m0 = m0 * m0;\n  m1 = m1 * m1;\n  return 49.0 * ( dot(m0*m0, vec3( dot( p0, x0 ), dot( p1, x1 ), dot( p2, x2 )))\n               + dot(m1*m1, vec2( dot( p3, x3 ), dot( p4, x4 ) ) ) ) ;\n\n}\n\nfloat getWobble(vec3 position){\n    vec3 warpedPosition = position;\n    warpedPosition += simplexNoise4d(vec4(position * uWarpPositionFrequency, uTime * uWarpTimeFrequency)) * uWarpStrength;\n\n    float wobble = simplexNoise4d(vec4(warpedPosition * uPositionFrequency, uTime * uTimeFrequency)) * uStrength;\n    return wobble;\n}\n\nvoid main()\n{\n    vec3 biTangent = cross(normal, tangent.xyz);\n\n    float shift = 0.01;\n    vec3 positionA = csm_Position + tangent.xyz * shift;\n    vec3 positionB = csm_Position + biTangent * shift;\n\n    float wobble = getWobble(csm_Position);\n    csm_Position += wobble * normal;\n    positionA += getWobble(positionA) * normal;\n    positionB += getWobble(positionB) * normal;\n\n    vec3 toA = normalize(positionA - csm_Position);\n    vec3 toB = normalize(positionB - csm_Position);\n    csm_Normal = normalize(cross(toA, toB));\n\n    vWobble = wobble / uStrength;\n}";let eF="";eF="/static";let eM=e=>{let{color:t}=e,n=(0,eR.L)(eF+"/verba.glb"),a=(0,s.useMemo)(()=>new G.MeshPhysicalMaterial({metalness:1,roughness:.075,color:"#f1ff33",transmission:1,ior:1,thickness:1,transparent:!1,wireframe:!1,clearcoat:1,clearcoatRoughness:0}),[]);return(0,s.useEffect)(()=>{},[a]),(0,s.useEffect)(()=>{n.scene.traverse(e=>{e instanceof G.Mesh&&(e.material=a)})},[n,a]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("color",{args:[t],attach:"background"}),(0,r.jsx)(eO.N,{global:!0,rotation:[.13,.1,0],polar:[-.4,.2],azimuth:[-1,.75],config:{mass:2,tension:400},snap:{mass:4,tension:400},children:(0,r.jsx)(W.b,{speed:1,rotationIntensity:.4,children:(0,r.jsx)("primitive",{object:n.scene,"position-y":-.1,"position-x":.15,"position-z":-1,scale:.6})})})]})},eP=(0,s.memo)(e=>{let{startPosition:t,endPosition:n,size:a,colorA:l,colorB:o}=e,i=(0,s.useMemo)(()=>({uTime:{value:0},uPositionFrequency:{value:.677},uTimeFrequency:{value:.041},uStrength:{value:.557},uWarpPositionFrequency:{value:.267},uWarpTimeFrequency:{value:.135},uWarpStrength:{value:.238},uColorA:{value:new G.Color(l)},uColorB:{value:new G.Color(o)},uRefractionStrength:{value:.1},uFresnelPower:{value:2},uTransparency:{value:.5}}),[]),c=(0,s.useMemo)(()=>new eI.Z({baseMaterial:G.MeshPhysicalMaterial,metalness:1,roughness:.914,uniforms:i,color:"#ffffff",transmission:1,ior:1.5,thickness:1,silent:!0,transparent:!0,wireframe:!1,clearcoat:1,clearcoatRoughness:0,vertexShader:eA,fragmentShader:"varying float vWobble;\nuniform vec3 uColorA;\nuniform vec3 uColorB;\n\nvoid main()\n{\n    float colorMix = smoothstep(-1.0, 1.0, vWobble);\n    csm_DiffuseColor.rgb = mix(uColorA, uColorB, colorMix);\n}"}),[]),d=(0,s.useMemo)(()=>new eI.Z({baseMaterial:G.MeshDepthMaterial,silent:!0,vertexShader:eA,depthPacking:G.RGBADepthPacking}),[]),x=(0,s.useRef)(null),u=(0,s.useRef)(null),b=new G.Vector3(...n);(0,s.useEffect)(()=>{x.current&&(u.current=new G.Vector3(...t),x.current.position.copy(u.current))},[t]),(0,s.useEffect)(()=>{},[c]),(0,M.C)((e,t)=>{i.uTime.value=e.clock.elapsedTime,x.current&&u.current&&(x.current.position.lerp(b,.02),.01>x.current.position.distanceTo(b)&&(u.current=null))});let m=new G.IcosahedronGeometry(a,30),g=(0,eT.$1)(m);return g.computeTangents(),(0,r.jsx)("mesh",{ref:x,material:c,receiveShadow:!0,castShadow:!0,customDepthMaterial:d,children:(0,r.jsx)("bufferGeometry",{attach:"geometry",...g})})});eP.displayName="CoolShape";let eL=()=>{let{scene:e}=(0,M.A)();return(0,s.useEffect)(()=>{new ez.x().load(eF+"/cloudy.hdr",t=>{t.mapping=G.EquirectangularReflectionMapping,e.environment=t})},[e]),null};var eW=e=>{let{credentials:t,setCredentials:n,setSelectedTheme:a,setThemes:l,setIsLoggedIn:o,setRAGConfig:c}=e,[d,x]=(0,s.useState)(!0),[u,b]=(0,s.useState)(!1),[m,g]=(0,s.useState)(!0),[h,f]=(0,s.useState)(""),[p,j]=(0,s.useState)("Local"),[w,y]=(0,s.useState)(t.url),[N,S]=(0,s.useState)(t.key);(0,s.useEffect)(()=>{let e=setTimeout(()=>{x(!1)},300);return()=>clearTimeout(e)},[]);let _=async()=>{f(""),b(!0);let e=await v(p,w,N);e&&(e.error?(o(!1),f(e.error)):(o(!0),n({deployment:p,key:N,url:w}),c(e.rag_config),e.themes&&l(e.themes),e.theme&&a(e.theme))),b(!1)};return(0,s.useMemo)(()=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(eP,{startPosition:[-3.3,-.8,-1],endPosition:[-1.3,-1,-4],size:2,colorA:"#00ffbf",colorB:"#00ff01"}),(0,r.jsx)(eP,{startPosition:[1.5,10,-6],endPosition:[1.5,1,-5],size:1,colorA:"#00c0ff",colorB:"#00c0ff"})]}),[]),(0,r.jsxs)("div",{className:"w-screen h-screen bg-white",children:[(0,r.jsxs)("div",{className:"flex w-full h-full transition-opacity duration-1000 ".concat(d?"opacity-0":"opacity-100"),children:[(0,r.jsx)("div",{className:"w-3/5 h-full bg-white",children:(0,r.jsxs)(P.Xz,{camera:{position:[0,-.25,3],fov:40},className:"w-full h-full touch-none",children:[(0,r.jsx)("color",{attach:"background",args:["#ffffff"]}),(0,r.jsx)(eL,{}),(0,r.jsx)("ambientLight",{intensity:.5}),(0,r.jsx)("directionalLight",{position:[5,5,5],intensity:1}),(0,r.jsx)(eM,{color:""})]})}),(0,r.jsx)("div",{className:"w-2/5 h-full flex justify-start items-center p-5",children:(0,r.jsxs)("div",{className:"flex flex-col gap-8 items-start justify-center",children:[(0,r.jsxs)("div",{className:"flex flex-col items-start gap-2",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("p",{className:"font-light text-5xl text-text-alt-verba",children:"Welcome to"}),(0,r.jsx)("p",{className:"font-light text-5xl text-text-verba",children:"Verba"})]}),(0,r.jsx)("p",{className:"text-text-verba text-lg ",children:"Choose your deployment"})]}),m?(0,r.jsxs)("div",{className:"flex flex-col justify-start gap-4 w-full",children:[(0,r.jsx)("button",{onClick:()=>{g(!1),j("Weaviate")},className:"bg-button-verba btn border-none hover:bg-secondary-verba text-text-alt-verba hover:text-text-verba p-3 rounded-lg",children:(0,r.jsx)("p",{children:"Weaviate"})}),(0,r.jsx)("button",{onClick:()=>{g(!1),j("Docker")},className:"bg-button-verba btn border-none hover:bg-secondary-verba text-text-alt-verba hover:text-text-verba p-3 rounded-lg",children:(0,r.jsx)("p",{children:"Docker"})}),(0,r.jsx)("button",{onClick:()=>{j("Local"),_()},className:"bg-button-verba btn border-none hover:bg-secondary-verba text-text-alt-verba hover:text-text-verba p-3 rounded-lg",children:(0,r.jsx)("p",{children:"Local"})})]}):(0,r.jsxs)("div",{className:"flex flex-col justify-start gap-4 w-full",children:[(0,r.jsxs)("label",{className:"input flex items-center gap-2 border-none shadow-md bg-bg-verba",children:[(0,r.jsx)(i.i1q,{className:"text-text-alt-verba"}),(0,r.jsx)("input",{type:"text",value:w,onChange:e=>y(e.target.value),placeholder:"Weaviate URL",className:"grow bg-button-verba text-text-alt-verba hover:text-text-verba w-full"})]}),(0,r.jsxs)("label",{className:"input flex items-center gap-2 border-none shadow-md bg-bg-verba",children:[(0,r.jsx)(i.q2z,{className:"text-text-alt-verba"}),(0,r.jsx)("input",{type:"password",value:N,onChange:e=>S(e.target.value),placeholder:"API Key",className:"grow bg-button-verba text-text-alt-verba hover:text-text-verba w-full"})]}),(0,r.jsxs)("div",{className:"flex justify-between gap-4",children:[(0,r.jsx)("button",{onClick:()=>g(!0),className:"flex-1 bg-button-verba btn border-none hover:bg-secondary-verba text-text-alt-verba hover:text-text-verba p-3 rounded-lg",children:"Other Deployments"}),(0,r.jsx)("button",{onClick:_,className:"flex-1 bg-secondary-verba btn border-none hover:bg-button-hover-verba text-text-verba hover:text-text-verba p-3 rounded-lg",disabled:u,children:u?(0,r.jsx)("span",{className:"loading loading-spinner"}):"Connect"})]}),h&&(0,r.jsx)("div",{className:"bg-red-100 p-2 rounded w-full",children:(0,r.jsx)("p",{className:"flex w-full",children:h})})]})]})})]}),d&&(0,r.jsx)("div",{className:"absolute inset-0 bg-white flex justify-center items-center"})]})},eB=n(93850),eG=e=>{let{RAGConfig:t,setRAGConfig:n,onSave:s,onReset:a}=e,o=(e,t,r)=>{n(n=>{if(n){let s={...n};return"string"==typeof r||"boolean"==typeof r?s[e].components[s[e].selected].config[t].value=r:s[e].components[s[e].selected].config[t].values=r,s}return n})},i=(e,t)=>{n(n=>{if(n){let r={...n};return r[e].selected=t,r}return n})};return t?(0,r.jsxs)("div",{className:"flex flex-col justify-start gap-3 rounded-2xl p-1 w-full ",children:[(0,r.jsx)(ek,{RAGConfig:t,component_name:"Embedder",selectComponent:i,updateConfig:o,blocked:!1}),(0,r.jsx)(ek,{RAGConfig:t,component_name:"Generator",selectComponent:i,updateConfig:o,blocked:!1}),(0,r.jsx)(ek,{RAGConfig:t,component_name:"Retriever",selectComponent:i,updateConfig:o,blocked:!1}),(0,r.jsxs)("div",{className:"flex justify-end gap-2 mt-4",children:[(0,r.jsxs)("button",{onClick:s,className:"flex btn border-none text-text-verba bg-button-verba hover:bg-button-hover-verba gap-2",children:[(0,r.jsx)(l.zfW,{size:15}),(0,r.jsx)("p",{children:"Set as Default"})]}),(0,r.jsxs)("button",{onClick:a,className:"flex btn border-none text-text-verba bg-button-verba hover:bg-warning-verba gap-2",children:[(0,r.jsx)(z.B4e,{size:15}),(0,r.jsx)("p",{children:"Reset"})]})]})]}):(0,r.jsx)("div",{})},eJ=e=>{let{message:t,selectedTheme:n,selectedDocument:s,setSelectedDocument:a,message_index:o,setSelectedDocumentScore:c,setSelectedChunkScore:d}=e;return"string"==typeof t.content?(0,r.jsx)("div",{className:"flex items-end gap-2 ".concat("user"===t.type?"justify-end":"justify-start"),children:(0,r.jsxs)("div",{className:"flex flex-col items-start p-5 rounded-3xl animate-press-in sm:text-sm md:text-base ".concat({user:"bg-bg-verba",system:"bg-bg-alt-verba",error:"bg-warning-verba",retrieval:"bg-bg-verba"}[t.type]),children:[t.cached&&(0,r.jsx)(i.i1q,{size:12,className:"text-text-verba"}),"system"===t.type&&(0,r.jsx)(Y.D,{className:"prose md:prose-base sm:prose-sm p-3 prose-pre:bg-bg-alt-verba",components:{code(e){let{node:t,inline:s,className:a,children:l,...o}=e,i=/language-(\w+)/.exec(a||"");return!s&&i?(0,r.jsx)(X.Z,{style:"dark"===n.theme?K.vk:K.Yn,language:i[1],PreTag:"div",...o,children:String(l).replace(/\n$/,"")}):(0,r.jsx)("code",{className:a,...o,children:l})}},children:t.content}),"user"===t.type&&(0,r.jsx)("div",{className:"whitespace-pre-wrap",children:t.content}),"error"===t.type&&(0,r.jsxs)("div",{className:"whitespace-pre-wrap flex items-center gap-2 text-sm text-text-verba",children:[(0,r.jsx)(eB.I2T,{size:15}),(0,r.jsx)("p",{children:t.content})]})]})}):(0,r.jsx)("div",{className:"grid grid-cols-3 gap-3 w-full",children:t.content.map((e,t)=>(0,r.jsx)("button",{onClick:()=>{a(e.uuid),c(e.uuid+e.score+e.chunks.length),d(e.chunks)},className:"flex ".concat(s&&s===e.uuid+e.score+e.chunks.length?"bg-secondary-verba hover:bg-button-hover-verba":"bg-button-verba hover:bg-secondary-verba"," rounded-3xl p-3 items-center justify-between transition-colors duration-300 ease-in-out border-none"),children:(0,r.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,r.jsx)("p",{className:"text-xs flex-grow truncate mr-2",title:e.title,children:e.title}),(0,r.jsxs)("div",{className:"flex gap-1 items-center text-text-verba flex-shrink-0",children:[(0,r.jsx)(l.$Kz,{size:12}),(0,r.jsx)("p",{className:"text-sm",children:e.chunks.length})]})]})},"Retrieval"+e.title+t))})},eq=e=>{let{credentials:t,setSelectedDocument:n,setSelectedChunkScore:a,currentPage:c,RAGConfig:d,selectedTheme:x,setRAGConfig:u}=e,[b,m]=(0,s.useState)("Chat"),g=(0,s.useRef)(!1),[h,f]=(0,s.useState)("DONE"),[v,w]=(0,s.useState)("");(0,s.useRef)(null);let[N,_]=(0,s.useState)(null),[C,k]=(0,s.useState)(!1),[E,D]=(0,s.useState)(!1),[R,O]=(0,s.useState)(null),[I,A]=(0,s.useState)(0),[F,M]=(0,s.useState)(""),[P,L]=(0,s.useState)([]),W=d?d.Embedder.components[d.Embedder.selected].config.Model.value:"No Config found";(0,s.useState)("No Embedding Model"),(0,s.useEffect)(()=>{D(!0)},[]),(0,s.useEffect)(()=>{d?U():A(0)},[W,c]),(0,s.useEffect)(()=>{L(e=>0===e.length?[{type:"system",content:x.intro_message.text}]:e)},[x.intro_message.text]),(0,s.useEffect)(()=>{let e=ev(),t=new WebSocket(e);return t.onopen=()=>{console.log("WebSocket connection opened to "+e),k(!0)},t.onmessage=e=>{let t;if(!g.current){w("");return}try{t=JSON.parse(e.data)}catch(t){console.error("Received data is not valid JSON:",e.data);return}let n=t.message;if(w(e=>e+n),"stop"===t.finish_reason){g.current=!1,f("DONE");let e=t.full_text;if(t.cached){let n=t.distance;L(t=>[...t,{type:"system",content:e,cached:!0,distance:n}])}else L(t=>[...t,{type:"system",content:e}]);w("")}},t.onerror=e=>{console.error("WebSocket Error:",e),k(!1),g.current=!1,f("DONE")},t.onclose=e=>{e.wasClean?console.log("WebSocket connection closed cleanly, code=".concat(e.code,", reason=").concat(e.reason)):console.error("WebSocket connection died"),k(!1),g.current=!1,f("DONE")},_(t),()=>{t.readyState!==WebSocket.CLOSED&&t.close()}},[E]),(0,s.useEffect)(()=>{d?U():A(0)},[d]);let B=async()=>{let e=await p(t);e&&u(e.rag_config)},G=async()=>{if(!g.current&&F.trim()){M(""),g.current=!0,f("CHUNKS"),L(e=>[...e,{type:"user",content:F}]);try{let e=await y(F,d,t);!e||e.error?J(e?e.error:"No data received"):q(e,F)}catch(e){J("Failed to fetch from API"),console.error("Failed to fetch from API:",e)}}},J=e=>{L(t=>[...t,{type:"error",content:e}]),g.current=!1,f("DONE")},q=(e,t)=>{if(L(t=>[...t,{type:"retrieval",content:e.documents}]),e.documents.length>0){let r=e.documents[0];n(r.uuid),O("".concat(r.uuid).concat(r.score).concat(r.chunks.length)),a(r.chunks),e.context&&(V(t,e.context),f("RESPONSE"))}},V=(e,t)=>{if((null==N?void 0:N.readyState)===WebSocket.OPEN){let n=JSON.stringify({query:e,context:t,conversation:P.filter(e=>"user"===e.type||"system"===e.type).map(e=>({type:e.type,content:e.content})),rag_config:d});N.send(n)}else console.error("WebSocket is not open. ReadyState:",null==N?void 0:N.readyState)},U=async()=>{try{let e=await S(W,t);e&&A(e.datacount)}catch(e){console.error("Failed to fetch from API:",e)}},H=async()=>{await j(d,t)},Y=async()=>{B()};return(0,r.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[(0,r.jsxs)("div",{className:"bg-bg-alt-verba rounded-2xl flex gap-2 p-6 items-center justify-between h-min w-full",children:[(0,r.jsx)("div",{className:"flex gap-2 justify-start items-center",children:(0,r.jsx)(T,{tooltip_text:"Use the Chat interface to interact with your data and to perform Retrieval Augmented Generation (RAG)",display_text:"Chat"})}),(0,r.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,r.jsxs)("button",{onClick:()=>{m("Chat")},className:"flex ".concat("Chat"===b?"bg-primary-verba text-text-verba hover:bg-button-hover-verba":"bg-button-verba hover:text-text-verba hover:bg-button-hover-verba"," border-none btn text-text-alt-verba gap-2"),children:[(0,r.jsx)(l.utr,{size:15}),(0,r.jsx)("p",{children:"Chat"})]}),(0,r.jsxs)("button",{onClick:()=>{m("Config")},className:"flex ".concat("Config"===b?"bg-primary-verba text-text-verba hover:bg-button-hover-verba":"bg-button-verba hover:text-text-verba hover:bg-button-hover-verba"," border-none btn text-text-alt-verba gap-2"),children:[(0,r.jsx)(i.KOq,{size:15}),(0,r.jsx)("p",{children:"Config"})]})]})]}),(0,r.jsxs)("div",{className:"bg-bg-alt-verba rounded-2xl flex flex-col p-6 h-full w-full overflow-y-auto overflow-x-hidden",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-3 ".concat("Chat"===b?"flex flex-col gap-3 ":"hidden"),children:[(0,r.jsxs)("div",{className:"flex w-full justify-start items-center text-text-alt-verba gap-2",children:[0===I&&(0,r.jsx)(eB.I2T,{size:15}),0===I&&(0,r.jsx)("p",{className:"text-text-alt-verba text-sm items-center flex",children:"".concat(I," documents embedded by ").concat(W)})]}),P.map((e,t)=>(0,r.jsx)("div",{className:"".concat("user"===e.type?"text-right":""),children:(0,r.jsx)(eJ,{message:e,message_index:t,selectedTheme:x,selectedDocument:R,setSelectedDocumentScore:O,setSelectedDocument:n,setSelectedChunkScore:a})},"Message_"+t)),v&&(0,r.jsx)(eJ,{message:{type:"system",content:v,cached:!1},message_index:-1,selectedTheme:x,selectedDocument:R,setSelectedDocumentScore:O,setSelectedDocument:n,setSelectedChunkScore:a}),g.current&&(0,r.jsx)("div",{className:"flex flex-col gap-2",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("span",{className:"text-text-alt-verba loading loading-dots loading-md"}),(0,r.jsxs)("p",{className:"text-text-alt-verba",children:["CHUNKS"===h&&"Retrieving...","RESPONSE"===h&&"Generating..."]}),(0,r.jsx)("button",{className:"btn btn-circle btn-sm bg-bg-alt-verba hover:bg-warning-verba hover:text-text-verba text-text-alt-verba shadow-none border-none text-sm",children:(0,r.jsx)(z.B4e,{size:15})})]})})]}),"Config"===b&&(0,r.jsx)(eG,{RAGConfig:d,setRAGConfig:u,onReset:Y,onSave:H})]}),(0,r.jsx)("div",{className:"bg-bg-alt-verba rounded-2xl flex gap-2 p-6 items-center justify-end h-min w-full",children:C?(0,r.jsxs)("div",{className:"flex gap-2 items-center justify-end w-full",children:[(0,r.jsx)("label",{className:"input flex items-center gap-2 w-full bg-bg-verba",children:(0,r.jsx)("input",{type:"text",className:"grow w-full placeholder-text-alt-verba",placeholder:I>0?"Chatting with ".concat(I," documents..."):"No documents detected...",onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),G())},value:F,onChange:e=>{M(e.target.value)}})}),(0,r.jsx)("button",{type:"button",onClick:e=>{G()},className:"btn btn-square border-none text-text-verba bg-primary-verba hover:bg-button-hover-verba",children:(0,r.jsx)(o.OUD,{size:15})}),(0,r.jsx)("button",{type:"button",onClick:()=>{n(null),a([]),O(null),L([{type:"system",content:x.intro_message.text}])},className:"btn btn-square text-text-alt-verba hover:text-text-verba border-none bg-button-verba hover:bg-button-hover-verba",children:(0,r.jsx)(z.Ffb,{size:18})})]}):(0,r.jsx)("div",{className:"flex gap-2 items-center justify-end w-full",children:(0,r.jsxs)("button",{onClick:()=>{D(e=>!e)},className:"flex btn border-none text-text-verba bg-button-verba hover:bg-button-hover-verba gap-2",children:[(0,r.jsx)($.Nwf,{size:15}),(0,r.jsx)("p",{children:"Reconnect to Verba"})]})})})]})},eV=e=>{let{credentials:t,selectedTheme:n,production:a,currentPage:l,RAGConfig:o,setRAGConfig:i}=e,[c,d]=(0,s.useState)(null),[x,u]=(0,s.useState)([]);return(0,r.jsxs)("div",{className:"flex justify-center gap-3 h-[80vh] ",children:[(0,r.jsx)("div",{className:"".concat(c?"hidden lg:flex lg:w-[45vw]":"w-full lg:w-[45vw] lg:flex"),children:(0,r.jsx)(eq,{credentials:t,selectedTheme:n,setSelectedDocument:d,setSelectedChunkScore:u,currentPage:l,RAGConfig:o,setRAGConfig:i})}),(0,r.jsx)("div",{className:"".concat(c?"lg:w-[55vw] w-full flex":"hidden lg:flex lg:w-[55vw]"),children:(0,r.jsx)(et,{credentials:t,setSelectedDocument:d,selectedTheme:n,selectedDocument:c,chunkScores:x})})]})},eU=n(22034),eH=n(73478),eY=e=>{let{selectedTheme:t,setThemes:n,credentials:a,setSelectedTheme:l,themes:o}=e,[c,d]=(0,s.useState)(""),x=async()=>{await w(o,t,a)},u=(e,t)=>{l(n=>{let r=n[e];if("text"===r.type)return{...n,[e]:{...r,text:t}};if("image"===r.type)return{...n,[e]:{...r,src:t}};if("check"===r.type)return{...n,[e]:{...r,checked:t}};if("color"===r.type)return{...n,[e]:{...r,color:t}};if("select"===r.type)return{...n,[e]:{...r,value:t}};if("number"===r.type)return{...n,[e]:{...r,value:t}};return n})};(0,s.useEffect)(()=>{n(e=>{let n={...e};return n[t.theme_name]=t,n})},[t]);let b=(e,t)=>{if(t.target.files&&t.target.files[0]){let n=new FileReader;n.onload=t=>{var n;"string"==typeof(null===(n=t.target)||void 0===n?void 0:n.result)&&u(e,t.target.result)},n.readAsDataURL(t.target.files[0])}},m=(e,n)=>(0,r.jsx)("div",{children:(0,r.jsxs)("div",{className:"flex gap-3 justify-between items-center text-text-verba",children:[(0,r.jsx)("p",{className:"flex min-w-[8vw]",children:n.description}),"text"===n.type&&(0,r.jsx)("label",{className:"input flex items-center gap-2 w-full border-none bg-bg-verba",children:(0,r.jsx)("input",{type:"text",className:"grow w-full",placeholder:e,value:t[e].text,onChange:t=>u(e,t.target.value)})}),"select"===n.type&&(0,r.jsx)("select",{value:t[e].value,onChange:t=>{u(e,t.target.value)},className:"select bg-bg-verba",children:n.options.map(e=>(0,r.jsx)("option",{value:e,children:e},"Select_"+e))}),"color"===n.type&&(0,r.jsxs)("div",{className:"flex flex-col gap-1 h-[15vh]",children:[(0,r.jsx)("label",{className:"input bg-bg-verba input-sm input-bordered flex items-center gap-2 w-full",children:(0,r.jsx)("input",{type:"text",className:"grow",placeholder:e,value:t[e].color,onChange:t=>{u(e,t.target.value)}})}),(0,r.jsx)(eH.gW,{color:t[e].color,onChange:t=>{u(e,t)}})]}),"image"===n.type&&(0,r.jsxs)("div",{className:"flex justify-between gap-4 w-full items-center",children:[(0,r.jsx)("div",{className:"flex-grow",children:(0,r.jsx)("label",{className:"input flex items-center text-text-verba gap-2 w-full border-none bg-bg-verba",children:(0,r.jsx)("input",{type:"text",className:"grow",placeholder:"Enter image URL",value:c,onChange:e=>d(e.target.value)})})}),(0,r.jsxs)("div",{className:"flex justify-between items-center gap-4",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsx)("button",{onClick:()=>u(e,c),className:"btn border-none shadow-none bg-button-verba hover:bg-button-hover-verba",children:"Set Link"}),(0,r.jsx)("button",{onClick:()=>{var t;return null===(t=document.getElementById("".concat(e,"ImageInput")))||void 0===t?void 0:t.click()},className:"btn border-none shadow-none bg-button-verba hover:bg-button-hover-verba",children:"Upload Image"}),(0,r.jsx)("input",{id:"".concat(e,"ImageInput"),type:"file",accept:"image/*",onChange:t=>b(e,t),className:"hidden"})]}),t[e].src&&(0,r.jsx)("img",{src:t[e].src,alt:"".concat(e," preview"),className:"max-w-full max-h-32 rounded-xl"})]})]})]})},e);return(0,r.jsxs)("div",{className:"flex flex-col w-full h-full p-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsx)("p",{className:"text-2xl font-bold",children:"Customize Theme"}),(0,r.jsx)("select",{className:"select bg-bg-verba",value:Object.keys(o).find(e=>o[e]===t)||"",onChange:e=>l(o[e.target.value]),children:Object.keys(o).map(e=>(0,r.jsx)("option",{value:e,children:e},e))})]}),(0,r.jsx)("div",{className:"flex-grow overflow-y-auto",children:(0,r.jsxs)("div",{className:"gap-4 flex flex-col p-4",children:[(0,r.jsx)("p",{className:"font-bold",children:"Customize Logo"}),Object.entries(t).filter(e=>{let[t,n]=e;return"image"===n.type}).map(e=>{let[t,n]=e;return m(t,n)}),(0,r.jsx)("p",{className:"font-bold mt-4",children:"Customize Text"}),Object.entries(t).filter(e=>{let[t,n]=e;return"text"===n.type}).map(e=>{let[t,n]=e;return m(t,n)}),(0,r.jsx)("p",{className:"font-bold mt-4",children:"Customize Font"}),Object.entries(t).filter(e=>{let[t,n]=e;return"select"===n.type}).map(e=>{let[t,n]=e;return m(t,n)}),(0,r.jsx)("p",{className:"font-bold mt-4",children:"Customize Color"}),Object.entries(t).filter(e=>{let[t,n]=e;return"color"===n.type}).map(e=>{let[t,n]=e;return m(t,n)})]})}),(0,r.jsxs)("div",{className:"flex justify-end gap-2 mt-3",children:[(0,r.jsxs)("button",{onClick:x,className:"btn flex items-center justify-center border-none text-text-verba bg-secondary-verba hover:bg-button-hover-verba",children:[(0,r.jsx)(i.FJM,{}),(0,r.jsx)("p",{className:"",children:"Save"})]}),(0,r.jsxs)("button",{onClick:()=>{n({Light:ea,Dark:el,Weaviate:ei,WCD:eo}),l(ea)},className:"btn flex items-center justify-center border-none text-text-verba bg-warning-verba hover:bg-button-hover-verba",children:[(0,r.jsx)(z.B4e,{}),(0,r.jsx)("p",{className:"",children:"Reset"})]})]})]})},eX=e=>{let{credentials:t}=e,[n,a]=(0,s.useState)(null),[o,c]=(0,s.useState)(null),d=async()=>{let e=await I(t);(null==e?void 0:e.error)===""&&(a(e.node_payload),c(e.collection_payload))};(0,s.useEffect)(()=>{d()},[]);let x=async()=>{await O("DOCUMENTS",t)&&d()},u=async()=>{await O("ALL",t)&&d()},b=async()=>{await O("CONFIG",t)&&d()},m=e=>{let t=document.getElementById(e);t instanceof HTMLDialogElement&&t.showModal()};return(0,r.jsxs)("div",{className:"flex flex-col w-full h-full p-4",children:[(0,r.jsx)("div",{className:"flex justify-between items-center mb-4",children:(0,r.jsx)("p",{className:"text-2xl font-bold",children:"Admin Panel"})}),(0,r.jsx)("div",{className:"flex-grow overflow-y-auto",children:(0,r.jsxs)("div",{className:"gap-4 flex flex-col p-4 text-text-verba",children:[(0,r.jsx)("p",{className:"font-bold text-lg",children:"Resetting Verba"}),(0,r.jsxs)("div",{className:"flex gap-2 justify-between",children:[(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsxs)("button",{onClick:()=>m("reset-documents"),className:"btn border-none hover:text-text-verba text-text-alt-verba shadow-none bg-button-verba hover:bg-button-hover-verba",children:[(0,r.jsx)(l.emU,{size:16}),(0,r.jsx)("p",{children:"Clear Documents"})]}),(0,r.jsxs)("button",{onClick:()=>m("reset-configs"),className:"btn border-none hover:text-text-verba text-text-alt-verba shadow-none bg-button-verba hover:bg-button-hover-verba",children:[(0,r.jsx)(i.LDL,{size:16}),(0,r.jsx)("p",{children:"Clear Config"})]}),(0,r.jsxs)("button",{onClick:()=>m("reset-verba"),className:"btn border-none hover:text-text-verba text-text-alt-verba shadow-none bg-button-verba hover:bg-button-hover-verba",children:[(0,r.jsx)(l.VOs,{size:16}),(0,r.jsx)("p",{children:"Clear Everything"})]})]}),(0,r.jsxs)("button",{onClick:d,className:"btn border-none hover:text-text-verba text-text-alt-verba shadow-none bg-button-verba hover:bg-button-hover-verba",children:[(0,r.jsx)(l.A$d,{size:16}),(0,r.jsx)("p",{children:"Reload Metadata"})]})]}),(0,r.jsx)("p",{className:"font-bold text-lg",children:"Weaviate Information"}),(0,r.jsxs)("div",{className:"flex border-2 border-bg-verba shadow-sm p-4 rounded-lg",children:[(0,r.jsx)("p",{className:"w-32 font-semibold",children:"Connected to"}),(0,r.jsx)("p",{className:"font-mono text-text-verba",children:t.url})]}),(0,r.jsxs)("div",{className:"flex border-2 border-bg-verba shadow-sm p-4 rounded-lg",children:[(0,r.jsx)("p",{className:"w-32 font-semibold",children:"Deployment"}),(0,r.jsx)("p",{className:"font-mono text-text-verba",children:t.deployment})]}),(0,r.jsxs)("div",{className:"flex border-2 border-secondary-verba shadow-sm p-4 rounded-lg",children:[(0,r.jsx)("p",{className:"w-32 font-semibold",children:"Version"}),n?(0,r.jsx)("p",{className:"font-mono text-text-verba",children:n.weaviate_version}):(0,r.jsx)("span",{className:"loading loading-spinner loading-sm"})]}),(0,r.jsxs)("div",{className:"flex flex-col border-2 border-bg-verba shadow-sm p-4 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("p",{className:"w-32 font-semibold",children:"Nodes"}),n?(0,r.jsx)("p",{className:"font-mono text-text-verba",children:n.node_count}):(0,r.jsx)("span",{className:"loading loading-spinner loading-sm"})]}),n?(0,r.jsx)("ul",{className:"flex flex-col mt-2 list-disc list-inside",children:n.nodes.map(e=>(0,r.jsxs)("li",{className:"font-mono text-text-verba flex justify-between",children:[(0,r.jsx)("span",{className:"w-64 truncate",children:e.name}),(0,r.jsxs)("span",{children:["(",e.status," - ",e.shards," shards)"]})]},"Node"+e.name))}):(0,r.jsx)("span",{className:"loading loading-dots loading-sm mt-2"})]}),(0,r.jsxs)("div",{className:"flex flex-col border-2 border-bg-verba shadow-sm p-4 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("p",{className:"w-32 font-semibold",children:"Collections"}),o?(0,r.jsx)("p",{className:"font-mono text-text-verba",children:o.collection_count}):(0,r.jsx)("span",{className:"loading loading-spinner loading-sm"})]}),o?(0,r.jsx)("ul",{className:"flex flex-col mt-2 list-disc list-inside",children:o.collections.map(e=>(0,r.jsxs)("li",{className:"font-mono text-text-verba flex justify-between",children:[(0,r.jsx)("span",{className:"w-128 truncate",children:e.name}),(0,r.jsxs)("span",{children:[e.count," objects"]})]},"Collection"+e.name))}):(0,r.jsx)("span",{className:"loading loading-dots loading-sm mt-2"})]})]})}),(0,r.jsx)(A,{modal_id:"reset-documents",title:"Reset Documents",text:"Are you sure you want to reset all documents? This will clear all documents and chunks from Verba.",triggerAccept:x,triggerString:"Reset"}),(0,r.jsx)(A,{modal_id:"reset-configs",title:"Reset Config",text:"Are you sure you want to reset the config?",triggerAccept:b,triggerString:"Reset"}),(0,r.jsx)(A,{modal_id:"reset-verba",title:"Reset Verba",text:"Are you sure you want to reset Verba? This will delete all collections related to Verba.",triggerAccept:u,triggerString:"Reset"})]})},eK=e=>{let{selectedTheme:t,themes:n,setThemes:a,setSelectedTheme:o,credentials:c}=e,[d,x]=(0,s.useState)("INFO");return(0,r.jsxs)("div",{className:"flex justify-center gap-3 h-[80vh] ",children:[(0,r.jsx)("div",{className:"w-1/3 flex",children:(0,r.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[(0,r.jsx)("div",{className:"bg-bg-alt-verba rounded-2xl flex gap-2 p-6 items-center justify-between h-min w-full",children:(0,r.jsx)("div",{className:"flex gap-2 justify-start ",children:(0,r.jsx)(T,{tooltip_text:"Customize Verba's Theme, reset collections, logout or report issues.",display_text:"Settings"})})}),(0,r.jsxs)("div",{className:"bg-bg-alt-verba gap-2 rounded-2xl flex flex-col p-6 h-full w-full overflow-y-auto overflow-x-hidden",children:[(0,r.jsxs)("button",{onClick:()=>x("INFO"),className:"flex ".concat("INFO"===d?"bg-secondary-verba hover:bg-button-hover-verba":"bg-button-verba hover:bg-secondary-verba","  w-full p-3 rounded-lg items-center text-text-verba gap-2 transition-colors duration-300 ease-in-out border-none"),children:[(0,r.jsx)(eU.Xn2,{size:18}),(0,r.jsx)("p",{className:"text-text-verba",children:"Admin"})]},"Info Button Setting"),(0,r.jsxs)("button",{onClick:()=>x("THEME"),className:"flex ".concat("THEME"===d?"bg-secondary-verba hover:bg-button-hover-verba":"bg-button-verba hover:bg-secondary-verba","  w-full p-3 rounded-lg items-center text-text-verba gap-2 transition-colors duration-300 ease-in-out border-none"),children:[(0,r.jsx)(i._TT,{size:18}),(0,r.jsx)("p",{className:"text-text-verba",children:"Customize Theme"})]},"Theme Button Setting"),(0,r.jsxs)("button",{className:"flex bg-button-verba hover:bg-secondary-verba  w-full p-3 rounded-lg items-center text-text-verba gap-2 transition-colors duration-300 ease-in-out border-none",onClick:()=>window.location.reload(),children:[(0,r.jsx)(l.p$f,{size:18}),(0,r.jsx)("p",{className:"text-text-verba",children:"Logout"})]},"Logout Button Setting"),(0,r.jsxs)("button",{className:"flex bg-button-verba hover:bg-secondary-verba  w-full p-3 rounded-lg items-center text-text-verba gap-2 transition-colors duration-300 ease-in-out border-none",onClick:()=>window.open("https://github.com/weaviate/Verba/issues/new/choose","_blank"),children:[(0,r.jsx)(eB.N3m,{size:18}),(0,r.jsx)("p",{className:"text-text-verba",children:"Report Issue"})]},"Issue Button Setting")]})]})}),(0,r.jsx)("div",{className:"w-2/3 flex",children:(0,r.jsx)("div",{className:"flex flex-col gap-2 w-full",children:(0,r.jsxs)("div",{className:"bg-bg-alt-verba gap-2 rounded-2xl flex flex-col p-6 h-full w-full overflow-y-auto overflow-x-hidden",children:["THEME"===d&&(0,r.jsx)(eY,{themes:n,credentials:c,setThemes:a,setSelectedTheme:o,selectedTheme:t}),"INFO"===d&&(0,r.jsx)(eX,{credentials:c})]})})})]})};function eZ(){var e;let[t,n]=(0,s.useState)("CHAT"),[l,o]=(0,s.useState)(!1),[i,c]=(0,s.useState)(""),[d,x]=(0,s.useState)({Light:ea,Dark:el,Weaviate:ei,WCD:eo}),[u,m]=(0,s.useState)(d.Light),g=u.font.value,h=g&&(null===(e=ef[g])||void 0===e?void 0:e.className)||"",[v,p]=(0,s.useState)(!1),[j,w]=(0,s.useState)(!1),[y,N]=(0,s.useState)(!1),[S,_]=(0,s.useState)({deployment:"Local",url:"",key:""}),[C,k]=(0,s.useState)(null),E=(0,s.useCallback)(async()=>{try{let[e]=await Promise.all([f()]);e?(o(e.production),c(e.gtag),p(!0),_({deployment:"Local",url:e.deployments.WEAVIATE_URL_VERBA,key:e.deployments.WEAVIATE_API_KEY_VERBA})):(console.warn("Could not retrieve health data"),p(!1),w(!1))}catch(e){console.error("Error during initial fetch:",e),p(!1),w(!1)}},[]);(0,s.useEffect)(()=>{E()},[]),(0,s.useEffect)(()=>{if(j){let e=setTimeout(()=>{N(!0)},1e3);return()=>clearTimeout(e)}},[j]);let D=(0,s.useCallback)(()=>{Object.entries({"--primary-verba":u.primary_color.color,"--secondary-verba":u.secondary_color.color,"--warning-verba":u.warning_color.color,"--bg-verba":u.bg_color.color,"--bg-alt-verba":u.bg_alt_color.color,"--text-verba":u.text_color.color,"--text-alt-verba":u.text_alt_color.color,"--button-verba":u.button_color.color,"--button-hover-verba":u.button_hover_color.color}).forEach(e=>{let[t,n]=e;document.documentElement.style.setProperty(t,n)})},[u]);return(0,s.useEffect)(D,[u]),(0,r.jsxs)("main",{className:"min-h-screen bg-bg-verba text-text-verba ".concat(h),"data-theme":u.theme,children:[""!==i&&(0,r.jsx)(a.GoogleAnalytics,{gaId:i}),!j&&v&&(0,r.jsx)(eW,{setSelectedTheme:m,setThemes:x,credentials:S,setIsLoggedIn:w,setRAGConfig:k,setCredentials:_}),j&&v&&(0,r.jsxs)("div",{className:"transition-opacity duration-1000 ".concat(y?"opacity-100":"opacity-0"," flex flex-col gap-2 p-5"),children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(b,{production:l,title:u.title.text,subtitle:u.subtitle.text,imageSrc:u.image.src,version:"v2.0.0",currentPage:t,setCurrentPage:n}),(0,r.jsx)("div",{className:"".concat("CHAT"!==t||l?"hidden":""),children:(0,r.jsx)(eV,{credentials:S,RAGConfig:C,setRAGConfig:k,production:l,selectedTheme:u,currentPage:t})}),"DOCUMENTS"===t&&!l&&(0,r.jsx)(en,{credentials:S,production:l,selectedTheme:u}),(0,r.jsx)("div",{className:"".concat("ADD"!==t||l?"hidden":""),children:(0,r.jsx)(eD,{RAGConfig:C,setRAGConfig:k,credentials:S})}),(0,r.jsx)("div",{className:"".concat("SETTINGS"!==t||l?"hidden":""),children:(0,r.jsx)(eK,{credentials:S,selectedTheme:u,setSelectedTheme:m,themes:d,setThemes:x})})]}),(0,r.jsx)("footer",{className:"footer footer-center p-4 mt-8 bg-bg-verba text-text-alt-verba transition-all duration-1500 delay-1000 ".concat(j?"opacity-100 translate-y-0":"opacity-0 translate-y-4"),children:(0,r.jsx)("aside",{children:(0,r.jsx)("p",{children:"Build with  and Weaviate \xa9 2024"})})})]}),(0,r.jsx)("img",{referrerPolicy:"no-referrer-when-downgrade",src:"https://static.scarf.sh/a.png?x-pxid=ec666e70-aee5-4e87-bc62-0935afae63ac"})]})}}},function(e){e.O(0,[596,689,520,465,929,582,33,190,400,61,682,420,636,115,864,971,23,744],function(){return e(e.s=87094)}),_N_E=e.O()}]);